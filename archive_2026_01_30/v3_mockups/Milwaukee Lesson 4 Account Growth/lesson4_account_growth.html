<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 4: RozwÃ³j i Ekspansja Kont - Milwaukee B2B Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            color: #212121;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px rgba(211, 47, 47, 0.3);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.95;
        }

        /* Progress Bar */
        .progress-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .progress-bar {
            background: #E0E0E0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .card.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #D32F2F;
        }

        .card-number {
            display: inline-block;
            background: #D32F2F;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .card-title {
            color: #D32F2F;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .card-header p {
            color: #666;
            font-size: 1.1rem;
        }

        /* Video Section */
        .video-container {
            margin: 30px 0;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .video-checkbox {
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #E8F5E9;
            border-radius: 8px;
        }

        .video-checkbox input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .video-checkbox label {
            font-size: 1.1rem;
            cursor: pointer;
        }

        /* Key Points */
        .key-points {
            background: #FFF3E0;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #FF9800;
        }

        .key-points h3 {
            color: #E65100;
            margin-bottom: 15px;
        }

        .key-points ul {
            list-style: none;
            padding: 0;
        }

        .key-points li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .key-points li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #FF9800;
            font-weight: 700;
            font-size: 1.2rem;
        }

        /* Reflection */
        .reflection-section {
            margin: 25px 0;
        }

        .reflection-section h3 {
            color: #D32F2F;
            margin-bottom: 15px;
        }

        .reflection-section textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            font-size: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .reflection-section textarea:focus {
            border-color: #D32F2F;
            outline: none;
        }

        /* Framework Visual */
        .framework-visual {
            margin: 30px 0;
        }

        .framework-matrix {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
            max-width: 900px;
        }

        .framework-quadrant {
            background: white;
            border: 3px solid #D32F2F;
            border-radius: 12px;
            padding: 25px;
            position: relative;
            transition: all 0.3s;
        }

        .framework-quadrant:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(211, 47, 47, 0.2);
        }

        .quadrant-number {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 3rem;
            font-weight: 700;
            color: rgba(211, 47, 47, 0.1);
        }

        .quadrant-title {
            color: #D32F2F;
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .quadrant-subtitle {
            color: #666;
            font-size: 0.9rem;
            font-style: italic;
            margin-bottom: 15px;
        }

        .quadrant-content {
            margin-top: 15px;
        }

        .quadrant-content p {
            margin: 8px 0;
            font-size: 0.95rem;
        }

        .quadrant-content strong {
            color: #212121;
        }

        .quadrant-risk {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 10px;
        }

        .risk-low {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .risk-medium {
            background: #FFF3E0;
            color: #E65100;
        }

        .risk-high {
            background: #FFEBEE;
            color: #C62828;
        }

        /* Comparison Table */
        .comparison-table {
            margin: 30px 0;
            overflow-x: auto;
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:hover {
            background: #FFEBEE;
        }

        /* Insight Box */
        .insight-box {
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
            padding: 20px 25px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 4px solid #1976D2;
        }

        .insight-box strong {
            color: #1565C0;
        }

        /* Success Message */
        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .success-message.show {
            opacity: 1;
        }

        /* Navigation */
        .card-navigation {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
        }

        .nav-button {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(211, 47, 47, 0.3);
        }

        .nav-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(211, 47, 47, 0.4);
        }

        .nav-button:disabled {
            background: #E0E0E0;
            color: #999;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Card 3: Account Mapping Styles */
        .mapping-section {
            margin: 30px 0;
            padding: 25px;
            background: #FAFAFA;
            border-radius: 12px;
            border-left: 4px solid #D32F2F;
        }

        .mapping-section h3 {
            color: #D32F2F;
            margin-bottom: 20px;
        }

        .stakeholder-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stakeholder-controls input,
        .stakeholder-controls select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            flex: 1;
            min-width: 150px;
        }

        .stakeholder-controls input:focus,
        .stakeholder-controls select:focus {
            border-color: #D32F2F;
            outline: none;
        }

        .add-stakeholder-btn {
            background: #D32F2F;
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .add-stakeholder-btn:hover {
            background: #C62828;
            transform: translateY(-2px);
        }

        .stakeholder-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 15px;
        }

        .stakeholder-table th {
            background: #D32F2F;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .stakeholder-table td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
        }

        .stakeholder-table tr:last-child td {
            border-bottom: none;
        }

        .stakeholder-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .influence-high { background: #FFEBEE; color: #C62828; }
        .influence-medium { background: #FFF3E0; color: #E65100; }
        .influence-low { background: #F5F5F5; color: #666; }

        .stance-champion { background: #E8F5E9; color: #2E7D32; }
        .stance-neutral { background: #FFF9C4; color: #F57F17; }
        .stance-blocker { background: #FFEBEE; color: #C62828; }

        .delete-btn {
            background: #F44336;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .delete-btn:hover {
            background: #D32F2F;
        }

        .org-chart {
            margin-top: 20px;
        }

        .org-level {
            margin-bottom: 25px;
        }

        .org-level-title {
            color: #D32F2F;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            padding: 8px 15px;
            background: #FFEBEE;
            border-radius: 8px;
            display: inline-block;
        }

        .org-positions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-left: 20px;
        }

        .org-position {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .org-position:hover {
            border-color: #D32F2F;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.2);
        }

        .position-name {
            font-weight: 600;
            color: #212121;
            margin-bottom: 5px;
        }

        .position-title {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .penetration-bar {
            background: #E0E0E0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .penetration-fill {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            transition: width 0.3s;
        }

        .penetration-label {
            font-size: 0.85rem;
            color: #666;
            margin-top: 4px;
        }

        .add-position-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 100px;
            gap: 10px;
            margin-bottom: 15px;
        }

        .add-position-controls input {
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
        }

        .add-position-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .add-position-btn:hover {
            background: #388E3C;
        }

        .whitespace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .product-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .product-card:hover {
            border-color: #D32F2F;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .product-card h4 {
            color: #D32F2F;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .product-field {
            margin-bottom: 12px;
        }

        .product-field label {
            display: block;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .product-field input,
        .product-field select {
            width: 100%;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.95rem;
        }

        .product-field input:focus,
        .product-field select:focus {
            border-color: #D32F2F;
            outline: none;
        }

        .gap-display {
            background: #E3F2FD;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-weight: 600;
            color: #1565C0;
        }

        .whitespace-summary {
            background: linear-gradient(135deg, #FFEBEE 0%, #FCE4EC 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
            border-left: 4px solid #D32F2F;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .stat-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #D32F2F;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .save-mapping-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }

        .save-mapping-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        .save-mapping-btn:disabled {
            background: #E0E0E0;
            color: #999;
            cursor: not-allowed;
            box-shadow: none;
        }

        /* Card 4: Cross-Sell Calculator Styles */
        .fit-matrix-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .fit-product-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .fit-product-card:hover {
            border-color: #D32F2F;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .fit-product-card.evaluated {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #ffffff 0%, #E8F5E9 100%);
        }

        .fit-product-title {
            color: #D32F2F;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fit-field {
            margin-bottom: 15px;
        }

        .fit-field label {
            display: block;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .fit-field select,
        .fit-field input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .fit-field select:focus,
        .fit-field input:focus {
            border-color: #D32F2F;
            outline: none;
        }

        .fit-score-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #f44336 0%, #ff9800 50%, #4caf50 100%);
            outline: none;
            -webkit-appearance: none;
        }

        .fit-score-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #D32F2F;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .fit-score-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #D32F2F;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .fit-score-display {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            color: #D32F2F;
            margin: 10px 0;
        }

        .fit-score-label {
            text-align: center;
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .revenue-dashboard {
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid #1976D2;
        }

        .revenue-dashboard h3 {
            color: #1565C0;
            margin-bottom: 20px;
        }

        .revenue-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .revenue-stat {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .revenue-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #1976D2;
            margin-bottom: 8px;
        }

        .revenue-label {
            color: #666;
            font-size: 0.95rem;
        }

        .opportunity-ranking {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 5px solid #FF9800;
        }

        .opportunity-ranking h3 {
            color: #E65100;
            margin-bottom: 20px;
        }

        .opportunity-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .opportunity-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #FF9800;
            display: grid;
            grid-template-columns: 50px 1fr auto;
            gap: 20px;
            align-items: center;
            transition: all 0.3s;
        }

        .opportunity-item:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            transform: translateX(5px);
        }

        .opportunity-rank {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .opportunity-details h4 {
            color: #E65100;
            margin-bottom: 8px;
        }

        .opportunity-details p {
            color: #666;
            font-size: 0.9rem;
            margin: 4px 0;
        }

        .opportunity-value {
            text-align: right;
        }

        .opportunity-gap {
            font-size: 1.8rem;
            font-weight: 700;
            color: #E65100;
        }

        .opportunity-fit {
            font-size: 0.9rem;
            color: #666;
        }

        .action-plan-box {
            background: #E8F5E9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #4CAF50;
        }

        .action-plan-box h4 {
            color: #2E7D32;
            margin-bottom: 15px;
        }

        .action-plan-box ul {
            list-style: none;
            padding: 0;
        }

        .action-plan-box li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            color: #424242;
        }

        .action-plan-box li::before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #4CAF50;
            font-weight: 700;
            font-size: 1.3rem;
        }

        .progress-indicator {
            background: #F5F5F5;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            font-size: 0.95rem;
            color: #666;
        }

        .progress-indicator strong {
            color: #D32F2F;
        }

        /* Card 5: Upsell Scenarios Styles */
        .scenario-container {
            margin: 30px 0;
        }

        .scenario-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 3px solid #e0e0e0;
            transition: all 0.3s;
        }

        .scenario-card.answered {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #ffffff 0%, #E8F5E9 100%);
        }

        .scenario-card.answered.incorrect {
            border-color: #FF9800;
            background: linear-gradient(135deg, #ffffff 0%, #FFF3E0 100%);
        }

        .scenario-number {
            display: inline-block;
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .scenario-title {
            color: #D32F2F;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .scenario-context {
            background: #F5F5F5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #FF9800;
        }

        .scenario-context h4 {
            color: #E65100;
            margin-bottom: 10px;
        }

        .scenario-context p {
            color: #424242;
            line-height: 1.7;
            margin: 8px 0;
        }

        .scenario-question {
            font-size: 1.1rem;
            font-weight: 600;
            color: #212121;
            margin: 20px 0 15px 0;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .answer-option {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 18px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .answer-option:hover {
            border-color: #D32F2F;
            background: #FFEBEE;
            transform: translateX(5px);
        }

        .answer-option.selected {
            border-color: #1976D2;
            background: #E3F2FD;
            box-shadow: 0 4px 12px rgba(25, 118, 210, 0.2);
        }

        .answer-option.correct {
            border-color: #4CAF50;
            background: #E8F5E9;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .answer-option.incorrect {
            border-color: #FF9800;
            background: #FFF3E0;
        }

        .answer-letter {
            background: #D32F2F;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .answer-option.selected .answer-letter {
            background: #1976D2;
        }

        .answer-option.correct .answer-letter {
            background: #4CAF50;
        }

        .answer-option.incorrect .answer-letter {
            background: #FF9800;
        }

        .answer-text {
            flex: 1;
            color: #212121;
            font-size: 1rem;
            line-height: 1.5;
        }

        .feedback-box {
            background: #E3F2FD;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #1976D2;
            display: none;
        }

        .feedback-box.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback-box.correct {
            background: #E8F5E9;
            border-left-color: #4CAF50;
        }

        .feedback-box.incorrect {
            background: #FFF3E0;
            border-left-color: #FF9800;
        }

        .feedback-box h4 {
            margin-bottom: 10px;
        }

        .feedback-box.correct h4 {
            color: #2E7D32;
        }

        .feedback-box.incorrect h4 {
            color: #E65100;
        }

        .feedback-box p {
            color: #424242;
            line-height: 1.7;
        }

        .scoring-dashboard {
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
            padding: 35px;
            border-radius: 15px;
            margin: 40px 0;
            border-left: 5px solid #1976D2;
        }

        .scoring-dashboard h3 {
            color: #1565C0;
            margin-bottom: 25px;
            text-align: center;
        }

        .score-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-value {
            font-size: 4rem;
            font-weight: 700;
            color: #1976D2;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1.2rem;
            color: #666;
        }

        .score-interpretation {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .score-interpretation h4 {
            color: #1976D2;
            margin-bottom: 15px;
        }

        .score-interpretation.master {
            border-left: 5px solid #4CAF50;
        }

        .score-interpretation.master h4 {
            color: #2E7D32;
        }

        .score-interpretation.solid {
            border-left: 5px solid #FF9800;
        }

        .score-interpretation.solid h4 {
            color: #E65100;
        }

        .score-interpretation.review {
            border-left: 5px solid #F44336;
        }

        .score-interpretation.review h4 {
            color: #C62828;
        }

        .score-interpretation ul {
            list-style: none;
            padding: 0;
        }

        .score-interpretation li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
            color: #424242;
        }

        .score-interpretation li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .score-interpretation.master li::before {
            color: #4CAF50;
        }

        .score-interpretation.solid li::before {
            color: #FF9800;
        }

        .score-interpretation.review li::before {
            color: #F44336;
        }

        /* Card 6: Growth Plan Builder Styles */
        .template-selector {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 4px solid #4CAF50;
        }

        .template-selector h3 {
            color: #2E7D32;
            margin-bottom: 15px;
        }

        .template-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .template-option {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .template-option:hover {
            border-color: #4CAF50;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.2);
        }

        .template-option.selected {
            border-color: #4CAF50;
            background: #E8F5E9;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .template-option h4 {
            color: #2E7D32;
            margin-bottom: 10px;
        }

        .template-option p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .timeline-visual {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .timeline-header h3 {
            color: #D32F2F;
            margin-bottom: 10px;
        }

        .timeline-track {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .timeline-quarter {
            text-align: center;
        }

        .quarter-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #E0E0E0;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #999;
            transition: all 0.3s;
        }

        .quarter-circle.completed {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
        }

        .quarter-label {
            color: #666;
            font-weight: 600;
        }

        .quarter-section {
            background: #FAFAFA;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #D32F2F;
        }

        .quarter-section.filled {
            border-left-color: #4CAF50;
            background: linear-gradient(135deg, #ffffff 0%, #E8F5E9 100%);
        }

        .quarter-section h3 {
            color: #D32F2F;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quarter-section.filled h3 {
            color: #2E7D32;
        }

        .quarter-fields {
            display: grid;
            gap: 20px;
        }

        .plan-field {
            display: flex;
            flex-direction: column;
        }

        .plan-field label {
            color: #424242;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .plan-field textarea {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
            transition: border-color 0.2s;
        }

        .plan-field input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .plan-field textarea:focus,
        .plan-field input:focus {
            border-color: #D32F2F;
            outline: none;
        }

        .two-column-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .export-section {
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
            border-left: 4px solid #1976D2;
        }

        .export-section h3 {
            color: #1565C0;
            margin-bottom: 15px;
        }

        .export-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .export-btn {
            background: #1976D2;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .export-btn:hover {
            background: #1565C0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);
        }

        .plan-summary {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .plan-summary h4 {
            color: #1976D2;
            margin-bottom: 15px;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .summary-stat {
            text-align: center;
            padding: 15px;
            background: #F5F5F5;
            border-radius: 8px;
        }

        .summary-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1976D2;
        }

        .summary-label {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }

        /* Card 7: Executive Sponsorship Styles */
        .business-case-builder {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .business-case-builder h3 {
            color: #D32F2F;
            margin-bottom: 20px;
        }

        .case-section {
            background: #FAFAFA;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #FF9800;
        }

        .case-section h4 {
            color: #E65100;
            margin-bottom: 15px;
        }

        .case-field {
            margin-bottom: 15px;
        }

        .case-field label {
            display: block;
            color: #424242;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .case-field input,
        .case-field textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .case-field textarea {
            min-height: 80px;
            resize: vertical;
        }

        .case-field input:focus,
        .case-field textarea:focus {
            border-color: #D32F2F;
            outline: none;
        }

        .roi-calculator {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 4px solid #4CAF50;
        }

        .roi-calculator h4 {
            color: #2E7D32;
            margin-bottom: 15px;
        }

        .roi-result {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .roi-metric {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .roi-value {
            font-size: 2rem;
            font-weight: 700;
            color: #2E7D32;
            margin-bottom: 5px;
        }

        .roi-label {
            color: #666;
            font-size: 0.9rem;
        }

        .pitch-templates {
            margin: 30px 0;
        }

        .template-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .template-tab {
            background: #E0E0E0;
            color: #666;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .template-tab:hover {
            background: #D32F2F;
            color: white;
        }

        .template-tab.active {
            background: linear-gradient(135deg, #D32F2F 0%, #C62828 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.3);
        }

        .email-template {
            display: none;
        }

        .email-template.active {
            display: block;
        }

        .template-description {
            background: #E3F2FD;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #1976D2;
        }

        .template-description h4 {
            color: #1565C0;
            margin-bottom: 10px;
        }

        .placeholder-inputs {
            background: #FFF3E0;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid #FF9800;
        }

        .placeholder-inputs h4 {
            color: #E65100;
            margin-bottom: 15px;
        }

        .placeholder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .placeholder-field {
            display: flex;
            flex-direction: column;
        }

        .placeholder-field label {
            color: #424242;
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 0.9rem;
        }

        .placeholder-field input {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .placeholder-field input:focus {
            border-color: #FF9800;
            outline: none;
        }

        .email-preview {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
        }

        .email-preview h4 {
            color: #1976D2;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .email-field {
            margin-bottom: 15px;
        }

        .email-field-label {
            color: #666;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .email-field-value {
            color: #212121;
            font-size: 1rem;
            padding: 8px 0;
        }

        .email-body {
            white-space: pre-wrap;
            line-height: 1.7;
            color: #424242;
            margin-top: 20px;
        }

        .send-email-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .send-email-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
        }

        .copy-email-btn {
            background: #1976D2;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 10px;
        }

        .copy-email-btn:hover {
            background: #1565C0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .header p {
                font-size: 1rem;
            }

            .card {
                padding: 25px;
            }

            .card-title {
                font-size: 1.5rem;
            }

            .framework-matrix {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }

            .comparison-table {
                font-size: 0.85rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 10px;
            }

            .card-navigation {
                flex-direction: column;
            }

            .nav-button {
                width: 100%;
            }

            .stakeholder-controls {
                flex-direction: column;
            }

            .stakeholder-controls input,
            .stakeholder-controls select {
                width: 100%;
            }

            .add-position-controls {
                grid-template-columns: 1fr;
            }

            .whitespace-grid {
                grid-template-columns: 1fr;
            }

            .org-positions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ðŸ’Ž Lesson 4: RozwÃ³j i Ekspansja Kont</h1>
            <p>Skaluj konta z 100k â†’ 500k PLN przez strategiczne zarzÄ…dzanie relacjami</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%;">0 XP</div>
            </div>
            <div class="progress-info">
                <span id="progressText">Rozpocznij lekcjÄ™, aby zdobyÄ‡ XP</span>
                <span id="progressCards">Karta 1/10</span>
            </div>
        </div>

        <!-- Card 1: Video + Reflection -->
        <div class="card active" id="card1">
            <div class="card-header">
                <div class="card-number">1/10</div>
                <h2 class="card-title">ðŸ“¹ Od 100k do 500k: MentalnoÅ›Ä‡ Rozwoju Konta</h2>
                <p>Poznaj fundamenty strategicznego zarzÄ…dzania kontami B2B</p>
            </div>

            <div class="video-container">
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
                </div>
                <div class="video-checkbox">
                    <input type="checkbox" id="videoWatched" onchange="toggleVideoCheckbox()">
                    <label for="videoWatched">ObejrzaÅ‚em caÅ‚e wideo (8 minut)</label>
                </div>
            </div>

            <div class="key-points">
                <h3>ðŸŽ¯ 5 Kluczowych WnioskÃ³w z Video:</h3>
                <ul>
                    <li><strong>Single-Threading = Wysokie Ryzyko:</strong> Jeden kontakt w Zakupach = wraÅ¼liwe konto. JeÅ›li ta osoba odejdzie, tracisz konto. Buduj relacje z minimum 5+ osobami w rÃ³Å¼nych dziaÅ‚ach.</li>
                    <li><strong>Multi-Threading = OdpornoÅ›Ä‡:</strong> 5+ kontaktÃ³w w rÃ³Å¼nych dziaÅ‚ach (Produkcja, Serwis, BHP, Zakupy, CFO) = odporna partnerstwa. Rotacja pracownikÃ³w nie zabija wspÃ³Å‚pracy.</li>
                    <li><strong>RozwÃ³j â‰  WiÄ™cej ProduktÃ³w:</strong> RozwÃ³j = rozwiÄ…zywanie wiÄ™kszej liczby problemÃ³w w wiÄ™kszej liczbie dziaÅ‚Ã³w. Nie sprzedawaj "wiÄ™cej wkrÄ™tarek" - rozwiÄ…zuj problemy Serwisu (awarie), BHP (urazy), CFO (TCO).</li>
                    <li><strong>Strategiczny vs Transakcyjny:</strong> Transakcyjny = wojny cenowe, wymienialny dostawca. Strategiczny = partner biznesowy rozwiÄ…zujÄ…cy problemy, efekty dla biznesu klienta.</li>
                    <li><strong>Timeline: 18-24 miesiÄ…ce:</strong> 100k â†’ 500k nie dzieje siÄ™ z dnia na dzieÅ„. Q1-Q2 = buduj zaufanie (piloty), Q3-Q4 = skaluj (wdraÅ¼aj), Rok 2 = eksplozja wzrostu (referencje wewnÄ™trzne).</li>
                </ul>
            </div>

            <div class="reflection-section">
                <h3>ðŸ’­ Pytanie Refleksyjne:</h3>
                <p style="margin-bottom: 10px; color: #666;">Opisz swoje najwiÄ™ksze konto dzisiaj. Z iloma osobami masz relacje? Jakie dziaÅ‚y jeszcze NIE sÄ… przez Ciebie obsÅ‚ugiwane? Jak wyglÄ…daÅ‚by wzrost 3Ã— w tym koncie?</p>
                <textarea id="videoReflection" placeholder="Wpisz swojÄ… odpowiedÅº tutaj... (minimum 100 znakÃ³w dla najlepszej refleksji)" oninput="autoSaveReflection()"></textarea>
            </div>

            <div class="insight-box">
                <strong>ðŸ’¡ Insight:</strong> Top 1% KAM-Ã³w nie SPRZEDAJE wiÄ™cej. StajÄ… siÄ™ NIEZASTÄ„PIENI. Jak? RozwiÄ…zujÄ… problemy dla PM (przestoje), CFO (ROI), BHP (zgodnoÅ›Ä‡), ZakupÃ³w (TCO), Serwisu (niezawodnoÅ›Ä‡), SzkoleÅ„ (onboarding). Jedna sprzedaÅ¼ narzÄ™dzia â†’ partnerstwo ogÃ³lnofirmowe.
            </div>

            <div class="success-message" id="videoSuccess">âœ… Video ukoÅ„czone! +5 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 2: Growth Framework -->
        <div class="card" id="card2">
            <div class="card-header">
                <div class="card-number">2/10</div>
                <h2 class="card-title">ðŸ“Š Framework Rozwoju: 4 Strategie</h2>
                <p>Poznaj systematyczne podejÅ›cie do wzrostu kont - matrix 2Ã—2</p>
            </div>

            <div class="framework-visual">
                <h3 style="color: #D32F2F; margin-bottom: 20px;">Matrix Rozwoju (Produkty Ã— DziaÅ‚y):</h3>
                
                <div class="framework-matrix">
                    <!-- Quadrant 1: Penetration -->
                    <div class="framework-quadrant">
                        <div class="quadrant-number">1</div>
                        <div class="quadrant-title">ðŸŽ¯ Penetracja</div>
                        <div class="quadrant-subtitle">IstniejÄ…ce Produkty â†’ IstniejÄ…ce DziaÅ‚y</div>
                        <div class="quadrant-content">
                            <p><strong>Strategia:</strong> ZwiÄ™ksz gÄ™stoÅ›Ä‡ uÅ¼ycia w obecnych uÅ¼ytkownikach</p>
                            <p><strong>PrzykÅ‚ad:</strong> PM uÅ¼ywa wkrÄ™tarek M18 na Linii 1 â†’ rozszerz na Linie 2, 3, 4</p>
                            <p><strong>Taktyki:</strong> Programy pilotaÅ¼owe, demo loans, porÃ³wnania side-by-side</p>
                            <p><strong>Wzrost:</strong> 20-50% (ograniczony rozmiarem dziaÅ‚u)</p>
                            <span class="quadrant-risk risk-low">Ryzyko: Niskie</span>
                        </div>
                    </div>

                    <!-- Quadrant 2: Expansion -->
                    <div class="framework-quadrant">
                        <div class="quadrant-number">2</div>
                        <div class="quadrant-title">ðŸ“¦ Ekspansja</div>
                        <div class="quadrant-subtitle">Nowe Produkty â†’ IstniejÄ…ce DziaÅ‚y</div>
                        <div class="quadrant-content">
                            <p><strong>Strategia:</strong> Cross-sell komplementarnych produktÃ³w obecnym kupujÄ…cym</p>
                            <p><strong>PrzykÅ‚ad:</strong> PM ma wkrÄ™tarki â†’ dodaj klucze udarowe, szlifierki, baterie</p>
                            <p><strong>Taktyki:</strong> Pakiety bundle, integracja ONE-KEY, historie kompatybilnoÅ›ci</p>
                            <p><strong>Wzrost:</strong> 50-150% (zaleÅ¼y od dopasowania portfolio)</p>
                            <span class="quadrant-risk risk-low">Ryzyko: Niskie-Åšrednie</span>
                        </div>
                    </div>

                    <!-- Quadrant 3: Development -->
                    <div class="framework-quadrant">
                        <div class="quadrant-number">3</div>
                        <div class="quadrant-title">ðŸ¢ RozwÃ³j</div>
                        <div class="quadrant-subtitle">IstniejÄ…ce Produkty â†’ Nowe DziaÅ‚y</div>
                        <div class="quadrant-content">
                            <p><strong>Strategia:</strong> Sprzedaj obecne produkty nowym dziaÅ‚om (ta sama firma)</p>
                            <p><strong>PrzykÅ‚ad:</strong> Produkcja ma wkrÄ™tarki â†’ sprzedaj do Serwisu, JakoÅ›ci, R&D</p>
                            <p><strong>Taktyki:</strong> Polecenia wewnÄ™trzne, demo cross-dept, success stories</p>
                            <p><strong>Wzrost:</strong> 100-300% (mnoÅ¼nik liczby dziaÅ‚Ã³w)</p>
                            <span class="quadrant-risk risk-medium">Ryzyko: Åšrednie</span>
                        </div>
                    </div>

                    <!-- Quadrant 4: Diversification -->
                    <div class="framework-quadrant">
                        <div class="quadrant-number">4</div>
                        <div class="quadrant-title">ðŸš€ Dywersyfikacja</div>
                        <div class="quadrant-subtitle">Nowe Produkty â†’ Nowe DziaÅ‚y</div>
                        <div class="quadrant-content">
                            <p><strong>Strategia:</strong> WprowadÅº nowe rozwiÄ…zania nowym interesariuszom</p>
                            <p><strong>PrzykÅ‚ad:</strong> Sprzedaj PPE (odzieÅ¼ grzewcza, rÄ™kawice) dziaÅ‚owi BHP (nowy buyer, nowa kategoria)</p>
                            <p><strong>Taktyki:</strong> Executive sponsorship, piloty, business case ROI</p>
                            <p><strong>Wzrost:</strong> 200-500% (najwyÅ¼szy potencjaÅ‚, najtrudniejsza realizacja)</p>
                            <span class="quadrant-risk risk-high">Ryzyko: Wysokie</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="comparison-table">
                <h3 style="color: #D32F2F; margin-bottom: 20px;">ðŸ“‹ PorÃ³wnanie Strategii:</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Strategia</th>
                            <th>Produkty</th>
                            <th>KupujÄ…cy</th>
                            <th>Ryzyko</th>
                            <th>Wzrost %</th>
                            <th>Najlepsze dla</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Penetracja</strong></td>
                            <td>IstniejÄ…ce</td>
                            <td>IstniejÄ…cy</td>
                            <td><span class="quadrant-risk risk-low">Niskie</span></td>
                            <td>20-50%</td>
                            <td>Szybkie wygrane, budowanie zaufania</td>
                        </tr>
                        <tr>
                            <td><strong>Ekspansja</strong></td>
                            <td>Nowe</td>
                            <td>IstniejÄ…cy</td>
                            <td><span class="quadrant-risk risk-low">Niskie-Åšr.</span></td>
                            <td>50-150%</td>
                            <td>PogÅ‚Ä™bianie wallet share</td>
                        </tr>
                        <tr>
                            <td><strong>RozwÃ³j</strong></td>
                            <td>IstniejÄ…ce</td>
                            <td>Nowy</td>
                            <td><span class="quadrant-risk risk-medium">Åšrednie</span></td>
                            <td>100-300%</td>
                            <td>Wykorzystanie success stories</td>
                        </tr>
                        <tr>
                            <td><strong>Dywersyfikacja</strong></td>
                            <td>Nowe</td>
                            <td>Nowy</td>
                            <td><span class="quadrant-risk risk-high">Wysokie</span></td>
                            <td>200-500%</td>
                            <td>Tylko konta strategiczne</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="insight-box">
                <strong>ðŸ’¡ Strategia Wykonania:</strong> Zacznij od Penetracji/Ekspansji (niskie ryzyko, buduj wiarygodnoÅ›Ä‡). Potem RozwÃ³j (wykorzystaj adwokatÃ³w). Dywersyfikacja na koÅ„cu (wymaga executive sponsor). Nie skacz do wysokiego ryzyka zanim zdobÄ™dziesz zaufanie. KolejnoÅ›Ä‡ ma znaczenie.
            </div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 3: Account Mapping Tool -->
        <div class="card" id="card3">
            <div class="card-header">
                <div class="card-number">3/10</div>
                <h2 class="card-title">ðŸ—ºï¸ NarzÄ™dzie Mapowania Konta</h2>
                <p>Zmapuj stakeholderÃ³w, strukturÄ™ organizacyjnÄ… i niewykorzystane moÅ¼liwoÅ›ci</p>
            </div>

            <!-- Section 1: Stakeholder Mapper -->
            <div class="mapping-section">
                <h3>ðŸ‘¥ 1. Mapa StakeholderÃ³w</h3>
                <p style="color: #666; margin-bottom: 20px;">Dodaj kluczowych interesariuszy w organizacji klienta. Minimum 3 osoby wymagane.</p>
                
                <div class="stakeholder-controls">
                    <input type="text" id="stakeholderName" placeholder="ImiÄ™ i nazwisko">
                    <input type="text" id="stakeholderTitle" placeholder="Stanowisko">
                    <input type="text" id="stakeholderDept" placeholder="DziaÅ‚">
                    <select id="stakeholderInfluence">
                        <option value="">Wybierz wpÅ‚yw...</option>
                        <option value="high">Wysoki</option>
                        <option value="medium">Åšredni</option>
                        <option value="low">Niski</option>
                    </select>
                    <select id="stakeholderStance">
                        <option value="">Wybierz postawÄ™...</option>
                        <option value="champion">Champion (Adwokat)</option>
                        <option value="neutral">Neutral (Neutralny)</option>
                        <option value="blocker">Blocker (BlokujÄ…cy)</option>
                    </select>
                    <button class="add-stakeholder-btn" onclick="addStakeholder()">+ Dodaj</button>
                </div>

                <table class="stakeholder-table" id="stakeholderTable">
                    <thead>
                        <tr>
                            <th>Osoba</th>
                            <th>Stanowisko</th>
                            <th>DziaÅ‚</th>
                            <th>WpÅ‚yw</th>
                            <th>Postawa</th>
                            <th>Akcje</th>
                        </tr>
                    </thead>
                    <tbody id="stakeholderList">
                        <!-- Stakeholders will be added here -->
                    </tbody>
                </table>
            </div>

            <!-- Section 2: Org Chart Builder -->
            <div class="mapping-section">
                <h3>ðŸ¢ 2. Struktura Organizacyjna</h3>
                <p style="color: #666; margin-bottom: 20px;">Dodaj kluczowe stanowiska w rÃ³Å¼nych poziomach organizacji. Minimum 5 pozycji wymagane.</p>
                
                <div class="org-chart">
                    <!-- C-Level -->
                    <div class="org-level">
                        <div class="org-level-title">C-Level</div>
                        <div class="add-position-controls">
                            <input type="text" id="clevelName" placeholder="ImiÄ™ i nazwisko">
                            <input type="text" id="clevelTitle" placeholder="Stanowisko (np. CFO, CEO)">
                            <input type="number" id="clevelPenetration" placeholder="%" min="0" max="100">
                            <button class="add-position-btn" onclick="addPosition('clevel')">+ Dodaj C-Level</button>
                        </div>
                        <div class="org-positions" id="clevelPositions">
                            <!-- C-level positions -->
                        </div>
                    </div>

                    <!-- Directors -->
                    <div class="org-level">
                        <div class="org-level-title">Dyrektorzy</div>
                        <div class="add-position-controls">
                            <input type="text" id="directorName" placeholder="ImiÄ™ i nazwisko">
                            <input type="text" id="directorTitle" placeholder="Stanowisko (np. Dyrektor Produkcji)">
                            <input type="number" id="directorPenetration" placeholder="%" min="0" max="100">
                            <button class="add-position-btn" onclick="addPosition('director')">+ Dodaj Dyrektora</button>
                        </div>
                        <div class="org-positions" id="directorPositions">
                            <!-- Director positions -->
                        </div>
                    </div>

                    <!-- Managers -->
                    <div class="org-level">
                        <div class="org-level-title">MenedÅ¼erowie</div>
                        <div class="add-position-controls">
                            <input type="text" id="managerName" placeholder="ImiÄ™ i nazwisko">
                            <input type="text" id="managerTitle" placeholder="Stanowisko (np. Kierownik Serwisu)">
                            <input type="number" id="managerPenetration" placeholder="%" min="0" max="100">
                            <button class="add-position-btn" onclick="addPosition('manager')">+ Dodaj MenedÅ¼era</button>
                        </div>
                        <div class="org-positions" id="managerPositions">
                            <!-- Manager positions -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: White Space Analysis -->
            <div class="mapping-section">
                <h3>ðŸ“Š 3. Analiza White Space (Niewykorzystane MoÅ¼liwoÅ›ci)</h3>
                <p style="color: #666; margin-bottom: 20px;">OceÅ„ 12 kategorii produktÃ³w Milwaukee. Minimum 8 kategorii musi byÄ‡ wypeÅ‚nionych.</p>
                
                <div class="whitespace-grid" id="whitespaceGrid">
                    <!-- Product cards will be generated by JavaScript -->
                </div>

                <div class="whitespace-summary">
                    <h3 style="color: #D32F2F; margin-bottom: 15px;">ðŸ“ˆ Podsumowanie Analizy</h3>
                    <div class="summary-stats">
                        <div class="stat-box">
                            <div class="stat-value" id="currentRevenue">0 PLN</div>
                            <div class="stat-label">Obecne przychody</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="potentialRevenue">0 PLN</div>
                            <div class="stat-label">Potencjalne przychody</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="revenueGap">0 PLN</div>
                            <div class="stat-label">Luka (niewykorzystane)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="penetrationPercent">0%</div>
                            <div class="stat-label">Penetracja portfela</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="save-mapping-btn" id="saveMappingBtn" onclick="saveAccountMapping()" disabled>
                    ðŸ’¾ Zapisz Mapowanie Konta (+15 XP)
                </button>
            </div>

            <div class="success-message" id="mappingSuccess">âœ… Mapowanie konta zapisane! +15 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 4: Cross-Sell Calculator -->
        <div class="card" id="card4">
            <div class="card-header">
                <div class="card-number">4/10</div>
                <h2 class="card-title">ðŸŽ¯ Kalkulator Cross-Sell</h2>
                <p>Zidentyfikuj najwiÄ™ksze moÅ¼liwoÅ›ci sprzedaÅ¼y krzyÅ¼owej w 12 kategoriach produktÃ³w</p>
            </div>

            <div class="progress-indicator">
                <strong id="evaluatedCount">0/12</strong> kategorii ocenionych | Minimum 8 wymagane dla zapisu
            </div>

            <!-- Product Fit Matrix -->
            <div class="mapping-section">
                <h3>ðŸ“Š Matrix Dopasowania ProduktÃ³w</h3>
                <p style="color: #666; margin-bottom: 20px;">OceÅ„ kaÅ¼dÄ… kategoriÄ™ produktÃ³w Milwaukee pod kÄ…tem obecnego uÅ¼ycia, dopasowania do klienta i potencjaÅ‚u przychodowego.</p>
                
                <div class="fit-matrix-grid" id="fitMatrixGrid">
                    <!-- Product cards will be generated by JavaScript -->
                </div>
            </div>

            <!-- Revenue Estimator Dashboard -->
            <div class="revenue-dashboard">
                <h3>ðŸ’° Estymator PrzychodÃ³w</h3>
                <div class="revenue-grid">
                    <div class="revenue-stat">
                        <div class="revenue-value" id="totalCurrentRevenue">0 PLN</div>
                        <div class="revenue-label">Obecne przychody roczne</div>
                    </div>
                    <div class="revenue-stat">
                        <div class="revenue-value" id="totalPotentialRevenue">0 PLN</div>
                        <div class="revenue-label">Potencjalne przychody</div>
                    </div>
                    <div class="revenue-stat">
                        <div class="revenue-value" id="totalRevenueGap">0 PLN</div>
                        <div class="revenue-label">Luka przychodowa</div>
                    </div>
                    <div class="revenue-stat">
                        <div class="revenue-value" id="portfolioPenetration">0%</div>
                        <div class="revenue-label">Penetracja portfolio</div>
                    </div>
                </div>
            </div>

            <!-- Opportunity Ranking -->
            <div class="opportunity-ranking">
                <h3>ðŸ† Ranking MoÅ¼liwoÅ›ci (Top 3 Quick Wins)</h3>
                <p style="color: #666; margin-bottom: 15px;">Produkty z najwyÅ¼szym potencjaÅ‚em wzrostu (wysoki fit + duÅ¼a luka przychodowa)</p>
                <div class="opportunity-list" id="opportunityList">
                    <p style="text-align: center; color: #999; padding: 20px;">OceÅ„ produkty powyÅ¼ej, aby zobaczyÄ‡ ranking...</p>
                </div>

                <div class="action-plan-box" id="actionPlanBox" style="display: none;">
                    <h4>ðŸŽ¯ Plan DziaÅ‚ania dla Top 3:</h4>
                    <ul id="actionPlanList">
                        <!-- Action items will be generated -->
                    </ul>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="save-mapping-btn" id="saveCrossSellBtn" onclick="saveCrossSell()" disabled>
                    ðŸ’¾ Zapisz AnalizÄ™ Cross-Sell (+15 XP)
                </button>
            </div>

            <div class="success-message" id="crossSellSuccess">âœ… Analiza cross-sell zapisana! +15 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 5: Upsell Scenarios -->
        <div class="card" id="card5">
            <div class="card-header">
                <div class="card-number">5/10</div>
                <h2 class="card-title">ðŸš€ Scenariusze Upsell</h2>
                <p>6 przypadkÃ³w z Å¼ycia KAM - wybierz najlepszÄ… strategiÄ™ upsellingu</p>
            </div>

            <div class="progress-indicator">
                <strong id="scenariosAnswered">0/6</strong> scenariuszy rozwiÄ…zanych
            </div>

            <div class="scenario-container" id="scenarioContainer">
                <!-- Scenarios will be generated by JavaScript -->
            </div>

            <div class="scoring-dashboard" id="scoringDashboard" style="display: none;">
                <h3>ðŸŽ¯ Twoje Wyniki</h3>
                <div class="score-display">
                    <div class="score-value" id="finalScore">0/6</div>
                    <div class="score-label">Poprawnych odpowiedzi</div>
                </div>
                <div class="score-interpretation" id="scoreInterpretation">
                    <!-- Interpretation will be generated -->
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="save-mapping-btn" id="saveUpsellBtn" onclick="saveUpsellScenarios()" disabled>
                    ðŸ’¾ ZakoÅ„cz Scenariusze (+20 XP)
                </button>
            </div>

            <div class="success-message" id="upsellSuccess">âœ… Scenariusze upsell ukoÅ„czone! +20 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 6: 12-Month Growth Plan Builder -->
        <div class="card" id="card6">
            <div class="card-header">
                <div class="card-number">6/10</div>
                <h2 class="card-title">ðŸ“… Plan Rozwoju na 12 MiesiÄ™cy</h2>
                <p>Zbuduj kwartalny roadmap rozwoju konta z milestones i metrykami</p>
            </div>

            <!-- Template Selector -->
            <div class="template-selector">
                <h3>ðŸŽ¯ Wybierz Szablon Strategii:</h3>
                <p style="color: #666; margin-bottom: 15px;">Szablon wstÄ™pnie wypeÅ‚ni plan przykÅ‚adowymi dziaÅ‚aniami. MoÅ¼esz go edytowaÄ‡.</p>
                <div class="template-options">
                    <div class="template-option" onclick="selectTemplate('penetration')">
                        <h4>ðŸŽ¯ Penetracja</h4>
                        <p>ZwiÄ™ksz wallet share w istniejÄ…cych liniach produktÃ³w i dziaÅ‚ach</p>
                    </div>
                    <div class="template-option" onclick="selectTemplate('expansion')">
                        <h4>ðŸ“¦ Ekspansja</h4>
                        <p>WprowadÅº nowe kategorie produktÃ³w do obecnych kupujÄ…cych</p>
                    </div>
                    <div class="template-option" onclick="selectTemplate('strategic')">
                        <h4>ðŸ¢ Strategiczny</h4>
                        <p>C-level partnership, multi-threading, rozwiÄ…zania enterprise</p>
                    </div>
                </div>
            </div>

            <!-- Timeline Visual -->
            <div class="timeline-visual">
                <div class="timeline-header">
                    <h3>ðŸ“ Timeline Rozwoju</h3>
                    <p style="color: #666;">WypeÅ‚nij wszystkie 4 kwartaÅ‚y</p>
                </div>
                <div class="timeline-track">
                    <div class="timeline-quarter">
                        <div class="quarter-circle" id="circle_q1">Q1</div>
                        <div class="quarter-label">StyczeÅ„-Marzec</div>
                    </div>
                    <div class="timeline-quarter">
                        <div class="quarter-circle" id="circle_q2">Q2</div>
                        <div class="quarter-label">KwiecieÅ„-Czerwiec</div>
                    </div>
                    <div class="timeline-quarter">
                        <div class="quarter-circle" id="circle_q3">Q3</div>
                        <div class="quarter-label">Lipiec-WrzesieÅ„</div>
                    </div>
                    <div class="timeline-quarter">
                        <div class="quarter-circle" id="circle_q4">Q4</div>
                        <div class="quarter-label">PaÅºdziernik-GrudzieÅ„</div>
                    </div>
                </div>
            </div>

            <!-- Q1 -->
            <div class="quarter-section" id="section_q1">
                <h3>ðŸŒ± Q1: StyczeÅ„-Marzec (Fundament)</h3>
                <div class="quarter-fields">
                    <div class="plan-field">
                        <label>Kluczowe dziaÅ‚ania:</label>
                        <textarea id="q1_actions" placeholder="np. Mapowanie stakeholderÃ³w, analiza white space, pilot PACKOUT w 2 dziaÅ‚ach..." oninput="updateQuarter('q1')"></textarea>
                    </div>
                    <div class="two-column-grid">
                        <div class="plan-field">
                            <label>Target przychodÃ³w (PLN):</label>
                            <input type="number" id="q1_revenue" placeholder="np. 120000" oninput="updateQuarter('q1')">
                        </div>
                        <div class="plan-field">
                            <label>Kluczowi stakeholderzy:</label>
                            <input type="text" id="q1_stakeholders" placeholder="np. Jan Kowalski (PM), Ewa Nowak (Zakupy)" oninput="updateQuarter('q1')">
                        </div>
                    </div>
                    <div class="plan-field">
                        <label>Metryki sukcesu:</label>
                        <textarea id="q1_metrics" placeholder="np. 3 nowe kontakty w Produkcji, pilot PACKOUT zatwierdzony, 15% wzrost uÅ¼ycia M18..." oninput="updateQuarter('q1')"></textarea>
                    </div>
                </div>
            </div>

            <!-- Q2 -->
            <div class="quarter-section" id="section_q2">
                <h3>ðŸŒ± Q2: KwiecieÅ„-Czerwiec (Budowanie)</h3>
                <div class="quarter-fields">
                    <div class="plan-field">
                        <label>Kluczowe dziaÅ‚ania:</label>
                        <textarea id="q2_actions" placeholder="np. Rozszerzenie pilotu PACKOUT, pierwsze QBR, cross-sell ONE-KEY..." oninput="updateQuarter('q2')"></textarea>
                    </div>
                    <div class="two-column-grid">
                        <div class="plan-field">
                            <label>Target przychodÃ³w (PLN):</label>
                            <input type="number" id="q2_revenue" placeholder="np. 180000" oninput="updateQuarter('q2')">
                        </div>
                        <div class="plan-field">
                            <label>Kluczowi stakeholderzy:</label>
                            <input type="text" id="q2_stakeholders" placeholder="np. Piotr WiÅ›niewski (Serwis), Anna Kowalczyk (BHP)" oninput="updateQuarter('q2')">
                        </div>
                    </div>
                    <div class="plan-field">
                        <label>Metryki sukcesu:</label>
                        <textarea id="q2_metrics" placeholder="np. PACKOUT w 5 dziaÅ‚ach, ONE-KEY wdroÅ¼one, pierwsze QBR z CFO..." oninput="updateQuarter('q2')"></textarea>
                    </div>
                </div>
            </div>

            <!-- Q3 -->
            <div class="quarter-section" id="section_q3">
                <h3>ðŸš€ Q3: Lipiec-WrzesieÅ„ (Przyspieszenie)</h3>
                <div class="quarter-fields">
                    <div class="plan-field">
                        <label>Kluczowe dziaÅ‚ania:</label>
                        <textarea id="q3_actions" placeholder="np. PeÅ‚ne wdroÅ¼enie PACKOUT, upgrade do M18 FUEL, training certification..." oninput="updateQuarter('q3')"></textarea>
                    </div>
                    <div class="two-column-grid">
                        <div class="plan-field">
                            <label>Target przychodÃ³w (PLN):</label>
                            <input type="number" id="q3_revenue" placeholder="np. 280000" oninput="updateQuarter('q3')">
                        </div>
                        <div class="plan-field">
                            <label>Kluczowi stakeholderzy:</label>
                            <input type="text" id="q3_stakeholders" placeholder="np. Marek Lewandowski (CFO), Zofia DÄ…browska (CEO)" oninput="updateQuarter('q3')">
                        </div>
                    </div>
                    <div class="plan-field">
                        <label>Metryki sukcesu:</label>
                        <textarea id="q3_metrics" placeholder="np. 100% PACKOUT adoption, 50% fleet na FUEL, certification dla 30 osÃ³b..." oninput="updateQuarter('q3')"></textarea>
                    </div>
                </div>
            </div>

            <!-- Q4 -->
            <div class="quarter-section" id="section_q4">
                <h3>ðŸ† Q4: PaÅºdziernik-GrudzieÅ„ (Skalowanie)</h3>
                <div class="quarter-fields">
                    <div class="plan-field">
                        <label>Kluczowe dziaÅ‚ania:</label>
                        <textarea id="q4_actions" placeholder="np. Executive Business Review, kontrakt roczny odnowiony +40%, roadmap na rok 2..." oninput="updateQuarter('q4')"></textarea>
                    </div>
                    <div class="two-column-grid">
                        <div class="plan-field">
                            <label>Target przychodÃ³w (PLN):</label>
                            <input type="number" id="q4_revenue" placeholder="np. 420000" oninput="updateQuarter('q4')">
                        </div>
                        <div class="plan-field">
                            <label>Kluczowi stakeholderzy:</label>
                            <input type="text" id="q4_stakeholders" placeholder="np. Board-level review, strategic partnership status" oninput="updateQuarter('q4')">
                        </div>
                    </div>
                    <div class="plan-field">
                        <label>Metryki sukcesu:</label>
                        <textarea id="q4_metrics" placeholder="np. Kontrakt 500k PLN podpisany, multi-year agreement, status strategic supplier..." oninput="updateQuarter('q4')"></textarea>
                    </div>
                </div>
            </div>

            <!-- Export Section -->
            <div class="export-section">
                <h3>ðŸ“¤ Podsumowanie i Eksport</h3>
                <div class="plan-summary">
                    <h4>TwÃ³j Roczny Plan:</h4>
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="summary-value" id="totalRevenue">0 PLN</div>
                            <div class="summary-label">Total target roczny</div>
                        </div>
                        <div class="summary-stat">
                            <div class="summary-value" id="quartersCompleted">0/4</div>
                            <div class="summary-label">KwartaÅ‚Ã³w wypeÅ‚nionych</div>
                        </div>
                        <div class="summary-stat">
                            <div class="summary-value" id="growthRate">0%</div>
                            <div class="summary-label">Wzrost Q1 â†’ Q4</div>
                        </div>
                    </div>
                </div>
                <div class="export-buttons" style="margin-top: 20px;">
                    <button class="export-btn" onclick="generatePlanSummary()">ðŸ“Š PodglÄ…d planu</button>
                    <button class="export-btn" onclick="copyPlanToClipboard()">ðŸ“‹ Kopiuj do schowka</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="save-mapping-btn" id="saveGrowthPlanBtn" onclick="saveGrowthPlan()" disabled>
                    ðŸ’¾ Zapisz Plan Rozwoju (+15 XP)
                </button>
            </div>

            <div class="success-message" id="growthPlanSuccess">âœ… Plan rozwoju zapisany! +15 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 7: Executive Sponsorship -->
        <div class="card" id="card7">
            <div class="card-header">
                <div class="card-number">7/10</div>
                <h2 class="card-title">ðŸ’¼ Sponsorstwo Executive (C-Level)</h2>
                <p>Zbuduj business case i przygotuj pitch dla CFO, CEO, COO</p>
            </div>

            <!-- Business Case Builder -->
            <div class="business-case-builder">
                <h3>ðŸ“„ Business Case Builder</h3>
                
                <div class="case-section">
                    <h4>1. Stan Obecny</h4>
                    <div class="case-field">
                        <label>Obecne wydatki roczne (PLN):</label>
                        <input type="number" id="currentSpend" placeholder="np. 120000" oninput="calculateROI()">
                    </div>
                    <div class="case-field">
                        <label>Obecne produkty/usÅ‚ugi:</label>
                        <textarea id="currentProducts" placeholder="np. 50 wkrÄ™tarek M18, podstawowa gwarancja, brak systemu tracking" oninput="updateBusinessCase()"></textarea>
                    </div>
                    <div class="case-field">
                        <label>Kluczowe pain points:</label>
                        <textarea id="painPoints" placeholder="np. Awarie co 18 mies, gubione narzÄ™dzia (5/mies), 3-5 dni downtime przy awarii" oninput="updateBusinessCase()"></textarea>
                    </div>
                </div>

                <div class="case-section">
                    <h4>2. Stan Proponowany</h4>
                    <div class="case-field">
                        <label>Proponowane rozwiÄ…zanie:</label>
                        <textarea id="proposedSolution" placeholder="np. Upgrade do M18 FUEL, PACKOUT storage, Premium Support 24h, ONE-KEY tracking, Certification Program" oninput="updateBusinessCase()"></textarea>
                    </div>
                    <div class="case-field">
                        <label>Inwestycja roczna (PLN):</label>
                        <input type="number" id="proposedSpend" placeholder="np. 180000" oninput="calculateROI()">
                    </div>
                </div>

                <div class="case-section">
                    <h4>3. WpÅ‚yw Finansowy</h4>
                    <div class="case-field">
                        <label>OszczÄ™dnoÅ›ci/zyski roczne (PLN):</label>
                        <input type="number" id="annualSavings" placeholder="np. 250000" oninput="calculateROI()">
                    </div>
                    <div class="case-field">
                        <label>Å¹rÃ³dÅ‚a oszczÄ™dnoÅ›ci/zyskÃ³w:</label>
                        <textarea id="savingsSources" placeholder="np. Redukcja downtime (200k PLN), mniej awarii (30k PLN), mniej strat narzÄ™dzi (20k PLN)" oninput="updateBusinessCase()"></textarea>
                    </div>
                </div>

                <div class="roi-calculator">
                    <h4>ðŸ“Š Kalkulacja ROI</h4>
                    <div class="roi-result">
                        <div class="roi-metric">
                            <div class="roi-value" id="roiAmount">0 PLN</div>
                            <div class="roi-label">Netto zysk roczny</div>
                        </div>
                        <div class="roi-metric">
                            <div class="roi-value" id="roiMultiple">0x</div>
                            <div class="roi-label">ROI multiplier</div>
                        </div>
                        <div class="roi-metric">
                            <div class="roi-value" id="roiPayback">0 mies</div>
                            <div class="roi-label">Payback period</div>
                        </div>
                        <div class="roi-metric">
                            <div class="roi-value" id="roi3Year">0 PLN</div>
                            <div class="roi-label">3-year value</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- C-Level Pitch Templates -->
            <div class="pitch-templates">
                <h3 style="color: #D32F2F; margin-bottom: 20px;">ðŸŽ¯ Szablony Email do C-Level</h3>
                
                <div class="template-tabs">
                    <button class="template-tab active" onclick="switchEmailTemplate('cfo')">CFO (ROI Focus)</button>
                    <button class="template-tab" onclick="switchEmailTemplate('ceo')">CEO (Strategic Vision)</button>
                    <button class="template-tab" onclick="switchEmailTemplate('coo')">COO (Operational Excellence)</button>
                </div>

                <!-- CFO Email Template -->
                <div class="email-template active" id="template_cfo">
                    <div class="template-description">
                        <h4>ðŸ’° CFO Pitch: ROI & Financial Impact</h4>
                        <p><strong>Fokus:</strong> Liczby, TCO, payback period, risk mitigation, cash flow optimization</p>
                    </div>

                    <div class="placeholder-inputs">
                        <h4>ðŸ“ WypeÅ‚nij Placeholdery:</h4>
                        <div class="placeholder-grid">
                            <div class="placeholder-field">
                                <label>{{CFO_NAME}}:</label>
                                <input type="text" id="cfo_name" placeholder="np. Marek Lewandowski" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{COMPANY}}:</label>
                                <input type="text" id="cfo_company" placeholder="np. VW PoznaÅ„" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{CURRENT_SPEND}}:</label>
                                <input type="text" id="cfo_current" placeholder="np. 120,000 PLN" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{PROPOSED_SPEND}}:</label>
                                <input type="text" id="cfo_proposed" placeholder="np. 180,000 PLN" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{ROI_AMOUNT}}:</label>
                                <input type="text" id="cfo_roi" placeholder="np. 250,000 PLN" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{PAYBACK_MONTHS}}:</label>
                                <input type="text" id="cfo_payback" placeholder="np. 8" oninput="updateEmailPreview('cfo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{YOUR_NAME}}:</label>
                                <input type="text" id="cfo_yourname" placeholder="Twoje imiÄ™ i nazwisko" oninput="updateEmailPreview('cfo')">
                            </div>
                        </div>
                    </div>

                    <div class="email-preview">
                        <h4>ðŸ“§ PodglÄ…d Email:</h4>
                        <div class="email-field">
                            <div class="email-field-label">Temat:</div>
                            <div class="email-field-value" id="cfo_subject">ROI 250k PLN: Optymalizacja TCO NarzÄ™dzi Milwaukee</div>
                        </div>
                        <div class="email-field">
                            <div class="email-field-label">Do:</div>
                            <div class="email-field-value" id="cfo_to">{{CFO_NAME}}</div>
                        </div>
                        <div class="email-body" id="cfo_body">Szanowny Panie {{CFO_NAME}},

ChciaÅ‚bym przedstawiÄ‡ analizÄ™ TCO (Total Cost of Ownership) narzÄ™dzi Milwaukee w {{COMPANY}}, ktÃ³ra pokazuje potencjaÅ‚ oszczÄ™dnoÅ›ci {{ROI_AMOUNT}} rocznie przy inwestycji {{PROPOSED_SPEND}}.

ðŸ“Š KLUCZOWE LICZBY:
- Obecne wydatki: {{CURRENT_SPEND}}/rok
- Proponowana inwestycja: {{PROPOSED_SPEND}}/rok (+{{DELTA}} PLN)
- OszczÄ™dnoÅ›ci roczne: {{ROI_AMOUNT}}
- Netto zysk: {{NET_GAIN}} PLN/rok
- ROI: {{ROI_MULTIPLE}}
- Payback period: {{PAYBACK_MONTHS}} miesiÄ™cy
- 3-year value: {{THREE_YEAR}} PLN

ðŸ‘‰ Å¹RÃ“DÅA OSZCZÄ˜DNOÅšCI:
1. Redukcja downtime (upgrade do FUEL = dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡, mniej awarii)
2. Eliminacja strat narzÄ™dzi (PACKOUT storage + ONE-KEY tracking)
3. Szybsza wymiana przy awarii (Premium Support 24h zamiast 3-5 dni)
4. Predictable budgeting (subscription model OPEX vs volatile CAPEX)

ðŸ›¡ï¸ RISK MITIGATION:
- Fixed cost structure (koniec volatile spending)
- Vendor lock-in protection (multi-year pricing guarantee)
- Downtime insurance (SLA 24h response)

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ peÅ‚nÄ… analizÄ™ TCO w 30-minutowym spotkaniu w przyszÅ‚ym tygodniu?

Pozdrawiam,
{{YOUR_NAME}}
Milwaukee Account Manager</div>
                    </div>

                    <button class="send-email-btn" onclick="markEmailSent('cfo')">Oznacz jako wysÅ‚any</button>
                    <button class="copy-email-btn" onclick="copyEmail('cfo')">Kopiuj email</button>
                </div>

                <!-- CEO Email Template -->
                <div class="email-template" id="template_ceo">
                    <div class="template-description">
                        <h4>ðŸŽ¯ CEO Pitch: Strategic Partnership & Innovation</h4>
                        <p><strong>Fokus:</strong> Strategic value, competitive advantage, innovation, industry leadership</p>
                    </div>

                    <div class="placeholder-inputs">
                        <h4>ðŸ“ WypeÅ‚nij Placeholdery:</h4>
                        <div class="placeholder-grid">
                            <div class="placeholder-field">
                                <label>{{CEO_NAME}}:</label>
                                <input type="text" id="ceo_name" placeholder="np. Zofia DÄ…browska" oninput="updateEmailPreview('ceo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{COMPANY}}:</label>
                                <input type="text" id="ceo_company" placeholder="np. KGHM" oninput="updateEmailPreview('ceo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{INDUSTRY}}:</label>
                                <input type="text" id="ceo_industry" placeholder="np. gÃ³rnictwo" oninput="updateEmailPreview('ceo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{STRATEGIC_GOAL}}:</label>
                                <input type="text" id="ceo_goal" placeholder="np. Industry 4.0 transformation" oninput="updateEmailPreview('ceo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{INNOVATION_EXAMPLE}}:</label>
                                <input type="text" id="ceo_innovation" placeholder="np. ONE-KEY IoT tracking, predictive maintenance" oninput="updateEmailPreview('ceo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{YOUR_NAME}}:</label>
                                <input type="text" id="ceo_yourname" placeholder="Twoje imiÄ™ i nazwisko" oninput="updateEmailPreview('ceo')">
                            </div>
                        </div>
                    </div>

                    <div class="email-preview">
                        <h4>ðŸ“§ PodglÄ…d Email:</h4>
                        <div class="email-field">
                            <div class="email-field-label">Temat:</div>
                            <div class="email-field-value" id="ceo_subject">Strategic Partnership: Milwaukee + {{COMPANY}} = {{STRATEGIC_GOAL}}</div>
                        </div>
                        <div class="email-field">
                            <div class="email-field-label">Do:</div>
                            <div class="email-field-value" id="ceo_to">{{CEO_NAME}}</div>
                        </div>
                        <div class="email-body" id="ceo_body">Szanowna Pani {{CEO_NAME}},

Milwaukee Tools obserwuje {{COMPANY}} jako lidera w {{INDUSTRY}}, szczegÃ³lnie w kontekÅ›cie {{STRATEGIC_GOAL}}. Wierzymy, Å¼e moÅ¼emy byÄ‡ czymÅ› wiÄ™cej niÅ¼ dostawcÄ… narzÄ™dzi â€” partnerem strategicznym w tej transformacji.

ðŸš€ WIZJA PARTNERSTWA:
Zamiast transakcyjnej relacji "dostawca-klient", proponujemy strategic partnership oparty na:
1. **Innovation co-development**: {{INNOVATION_EXAMPLE}}
2. **Industry leadership**: Case study {{COMPANY}} + Milwaukee jako benchmark w {{INDUSTRY}}
3. **Long-term commitment**: Multi-year agreement z roadmap innowacji

ðŸŽ¯ STRATEGIC VALUE:
- **Competitive advantage**: Pierwsza firma w {{INDUSTRY}} z peÅ‚nÄ… integracjÄ… IoT narzÄ™dzi
- **Brand enhancement**: Joint PR/case studies pozycjonujÄ…ce {{COMPANY}} jako tech leader
- **Talent retention**: Najlepsze narzÄ™dzia = attractive employer w walce o talent

ðŸ“ˆ BUSINESS IMPACT:
Strategic partnership wykracza poza oszczÄ™dnoÅ›ci operacyjne. To inwestycja w:
- Innovation culture (employees widzÄ… commitment do najlepszych narzÄ™dzi)
- Industry positioning (bycie first-mover w tech adoption)
- Long-term resilience (predictable costs, guaranteed supply, priority access do nowych technologii)

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ vision strategic partnership w Executive Board Meeting?

Pozdrawiam,
{{YOUR_NAME}}
Milwaukee Strategic Partnerships</div>
                    </div>

                    <button class="send-email-btn" onclick="markEmailSent('ceo')">Oznacz jako wysÅ‚any</button>
                    <button class="copy-email-btn" onclick="copyEmail('ceo')">Kopiuj email</button>
                </div>

                <!-- COO Email Template -->
                <div class="email-template" id="template_coo">
                    <div class="template-description">
                        <h4>âš™ï¸ COO Pitch: Operational Excellence & Reliability</h4>
                        <p><strong>Fokus:</strong> Downtime reduction, productivity gains, safety, quality, operational metrics</p>
                    </div>

                    <div class="placeholder-inputs">
                        <h4>ðŸ“ WypeÅ‚nij Placeholdery:</h4>
                        <div class="placeholder-grid">
                            <div class="placeholder-field">
                                <label>{{COO_NAME}}:</label>
                                <input type="text" id="coo_name" placeholder="np. Adam Kowalski" oninput="updateEmailPreview('coo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{COMPANY}}:</label>
                                <input type="text" id="coo_company" placeholder="np. Faurecia Poland" oninput="updateEmailPreview('coo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{DOWNTIME_CURRENT}}:</label>
                                <input type="text" id="coo_downtime" placeholder="np. 120 godzin/rok" oninput="updateEmailPreview('coo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{DOWNTIME_REDUCED}}:</label>
                                <input type="text" id="coo_reduced" placeholder="np. 30 godzin/rok" oninput="updateEmailPreview('coo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{SAFETY_METRIC}}:</label>
                                <input type="text" id="coo_safety" placeholder="np. 40% redukcja injury rate" oninput="updateEmailPreview('coo')">
                            </div>
                            <div class="placeholder-field">
                                <label>{{YOUR_NAME}}:</label>
                                <input type="text" id="coo_yourname" placeholder="Twoje imiÄ™ i nazwisko" oninput="updateEmailPreview('coo')">
                            </div>
                        </div>
                    </div>

                    <div class="email-preview">
                        <h4>ðŸ“§ PodglÄ…d Email:</h4>
                        <div class="email-field">
                            <div class="email-field-label">Temat:</div>
                            <div class="email-field-value" id="coo_subject">Operational Excellence: -75% Downtime + {{SAFETY_METRIC}}</div>
                        </div>
                        <div class="email-field">
                            <div class="email-field-label">Do:</div>
                            <div class="email-field-value" id="coo_to">{{COO_NAME}}</div>
                        </div>
                        <div class="email-body" id="coo_body">Szanowny Panie {{COO_NAME}},

PrzeanalizowaliÅ›my operational metryki {{COMPANY}} i zidentyfikowaliÅ›my opportunity dla dramatic improvement w downtime, safety i quality poprzez strategic tool management.

âš™ï¸ OPERATIONAL IMPACT:

1. **DOWNTIME REDUCTION:**
   - Obecny stan: {{DOWNTIME_CURRENT}} narzÄ™dziowego downtime/rok
   - Proponowany: {{DOWNTIME_REDUCED}}/rok (-75%)
   - Metoda: M18 FUEL (2x dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡) + Premium Support (24h wymiana)

2. **PRODUCTIVITY GAINS:**
   - Szybsze narzÄ™dzia = 15-20% faster task completion
   - PACKOUT system = zero time szukania narzÄ™dzi (avg 8 min/dzieÅ„ saved/pracownik)
   - ONE-KEY = automated inventory (koniec manual tracking)

3. **SAFETY IMPROVEMENT:**
   - Ergonomiczne narzÄ™dzia = {{SAFETY_METRIC}}
   - Grzewcza odzieÅ¼ Milwaukee = compliance z HSE w zimnych Å›rodowiskach
   - Training certification = 60% redukcja user errors

4. **QUALITY ENHANCEMENT:**
   - Precision tools dla Quality Department
   - Standardization (koniec mixed brands = lepsza consistency)
   - Calibration tracking via ONE-KEY

ðŸ“Š COMPETITIVE BENCHMARK:
Top automotive suppliers (VW, BMW suppliers) osiÄ…gajÄ…:
- <40h narzÄ™dziowego downtime/rok
- <2% tool-related quality issues
- 95%+ tool availability

{{COMPANY}} moÅ¼e to osiÄ…gnÄ…Ä‡ w 12 miesiÄ™cy.

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ operational roadmap ZespoÅ‚owi Operations?

Pozdrawiam,
{{YOUR_NAME}}
Milwaukee Operational Excellence Team</div>
                    </div>

                    <button class="send-email-btn" onclick="markEmailSent('coo')">Oznacz jako wysÅ‚any</button>
                    <button class="copy-email-btn" onclick="copyEmail('coo')">Kopiuj email</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="save-mapping-btn" id="saveExecutiveBtn" onclick="saveExecutiveSponsorship()" disabled>
                    ðŸ’¾ Zapisz Executive Sponsorship (+15 XP)
                </button>
            </div>

            <div class="success-message" id="executiveSuccess">âœ… Executive sponsorship zapisane! +15 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 8: QBR Template -->
        <div class="card" id="card8">
            <div class="card-header">
                <div class="card-number">8/10</div>
                <h2 class="card-title">ðŸ“… QBR - Quarterly Business Review</h2>
                <p>StwÃ³rz profesjonalny szablon QBR dla regularnych przeglÄ…dÃ³w strategicznych</p>
            </div>

            <!-- Executive Dashboard -->
            <div class="qbr-dashboard">
                <h3>ðŸ“Š Executive Dashboard - Kluczowe Metryki</h3>
                <div class="qbr-metrics">
                    <div class="qbr-metric">
                        <div class="qbr-metric-icon">ðŸ’°</div>
                        <div class="qbr-metric-label">PrzychÃ³d (Q)</div>
                        <input type="text" id="qbr-revenue" placeholder="np. 125,000 PLN" oninput="saveCard8Data(); updateQBRCompletion();">
                        <select id="qbr-revenue-change" onchange="saveCard8Data()">
                            <option value="">Zmiana vs. Q-1</option>
                            <option value="+15%">+15% â†‘</option>
                            <option value="+10%">+10% â†‘</option>
                            <option value="+5%">+5% â†‘</option>
                            <option value="0%">0% â†’</option>
                            <option value="-5%">-5% â†“</option>
                        </select>
                    </div>
                    <div class="qbr-metric">
                        <div class="qbr-metric-icon">ðŸ“¦</div>
                        <div class="qbr-metric-label">Wolumen SprzedaÅ¼y</div>
                        <input type="text" id="qbr-volume" placeholder="np. 2,400 szt" oninput="saveCard8Data(); updateQBRCompletion();">
                        <select id="qbr-volume-change" onchange="saveCard8Data()">
                            <option value="">Zmiana vs. Q-1</option>
                            <option value="+20%">+20% â†‘</option>
                            <option value="+12%">+12% â†‘</option>
                            <option value="+8%">+8% â†‘</option>
                            <option value="0%">0% â†’</option>
                            <option value="-3%">-3% â†“</option>
                        </select>
                    </div>
                    <div class="qbr-metric">
                        <div class="qbr-metric-icon">ðŸŽ¯</div>
                        <div class="qbr-metric-label">NPS Score</div>
                        <input type="text" id="qbr-nps" placeholder="np. 68" oninput="saveCard8Data(); updateQBRCompletion();">
                        <select id="qbr-nps-change" onchange="saveCard8Data()">
                            <option value="">Zmiana vs. Q-1</option>
                            <option value="+10 pkt">+10 pkt â†‘</option>
                            <option value="+5 pkt">+5 pkt â†‘</option>
                            <option value="0 pkt">0 pkt â†’</option>
                            <option value="-3 pkt">-3 pkt â†“</option>
                        </select>
                    </div>
                    <div class="qbr-metric">
                        <div class="qbr-metric-icon">ðŸ› ï¸</div>
                        <div class="qbr-metric-label">Czas Realizacji</div>
                        <input type="text" id="qbr-delivery" placeholder="np. 3.2 dni" oninput="saveCard8Data(); updateQBRCompletion();">
                        <select id="qbr-delivery-change" onchange="saveCard8Data()">
                            <option value="">Zmiana vs. Q-1</option>
                            <option value="-0.5 dni">-0.5 dni â†‘</option>
                            <option value="-0.3 dni">-0.3 dni â†‘</option>
                            <option value="0 dni">0 dni â†’</option>
                            <option value="+0.4 dni">+0.4 dni â†“</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Previous Quarter Review -->
            <div class="qbr-section">
                <h3>ðŸŽ¯ Podsumowanie Poprzedniego KwartaÅ‚u</h3>
                <div class="review-grid">
                    <div class="review-box">
                        <h4>âœ… GÅ‚Ã³wne OsiÄ…gniÄ™cia</h4>
                        <textarea id="qbr-achievements" placeholder="np. Uruchomienie nowej linii produktowej Milwaukee M18 FUEL, osiÄ…gniÄ™cie 15% wzrostu sprzedaÅ¼y, zbudowanie relacji z dziaÅ‚em zakupÃ³w..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                    <div class="review-box">
                        <h4>âš ï¸ Wyzwania i Przeszkody</h4>
                        <textarea id="qbr-challenges" placeholder="np. OpÃ³Åºnienia w dostawach spowodowane sytuacjÄ… logistycznÄ…, rotacja personelu w dziale technicznym klienta, presja cenowa ze strony konkurencji..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                    <div class="review-box">
                        <h4>ðŸ“š Kluczowe Wnioski</h4>
                        <textarea id="qbr-learnings" placeholder="np. Klient potrzebuje krÃ³tszych cykli zamÃ³wieÅ„ (14 dni zamiast 30), istnieje potencjaÅ‚ w segmencie automatyki, koniecznoÅ›Ä‡ wzmocnienia wsparcia technicznego..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                </div>
            </div>

            <!-- Action Items -->
            <div class="qbr-section">
                <h3>âœ”ï¸ Status Action Items z Poprzedniego QBR</h3>
                <ul class="action-items" id="action-items-list">
                    <!-- Action items will be rendered here -->
                </ul>
                <button class="add-action-btn" onclick="addActionItem()">+ Dodaj Action Item</button>
            </div>

            <!-- Next Quarter Roadmap -->
            <div class="qbr-section">
                <h3>ðŸš€ Roadmapa NastÄ™pnego KwartaÅ‚u</h3>
                <div class="roadmap-timeline">
                    <div class="roadmap-month">
                        <h4>MiesiÄ…c 1 - Inicjacja</h4>
                        <textarea id="qbr-month1" placeholder="np. Kick-off spotkanie nowego projektu automatyki, prezentacja rozszerzonej oferty ONE-KEY, szkolenie dla zespoÅ‚u technicznego (15 osÃ³b)..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                    <div class="roadmap-month">
                        <h4>MiesiÄ…c 2 - RozwÃ³j</h4>
                        <textarea id="qbr-month2" placeholder="np. PilotaÅ¼ systemu ONE-KEY w 2 lokalizacjach, spotkanie z CFO nt. optymalizacji TCO, analiza potencjaÅ‚u cross-sell w dziale maintenance..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                    <div class="roadmap-month">
                        <h4>MiesiÄ…c 3 - Konsolidacja</h4>
                        <textarea id="qbr-month3" placeholder="np. PrzeglÄ…d wynikÃ³w pilotaÅ¼u, podpisanie umowy ramowej na rok 2026, planowanie strategiczne na H2, follow-up z Executive Sponsorami..." oninput="saveCard8Data(); updateQBRCompletion();"></textarea>
                    </div>
                </div>
            </div>

            <!-- QBR Export -->
            <div class="qbr-export">
                <h4>ðŸ“„ Eksport QBR</h4>
                <p>TwÃ³j QBR jest <span id="qbr-completion-status" class="qbr-completion">W trakcie wypeÅ‚niania</span></p>
                <div class="qbr-actions">
                    <button class="qbr-btn secondary" onclick="previewQBR()">ðŸ‘ï¸ PodglÄ…d QBR</button>
                    <button class="qbr-btn secondary" onclick="copyQBRToClipboard()">ðŸ“‹ Kopiuj do schowka</button>
                    <button class="qbr-btn primary" onclick="downloadQBR()">ðŸ’¾ Pobierz jako PDF</button>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="save-mapping-btn" id="saveQBRBtn" onclick="saveQBR()" disabled>
                    ðŸ’¾ Zapisz QBR Template (+15 XP)
                </button>
            </div>

            <div class="success-message" id="qbrSuccess">âœ… QBR Template zapisany! +15 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 9: Risk Management -->
        <div class="card" id="card9">
            <div class="card-header">
                <div class="card-number">9/10</div>
                <h2 class="card-title">âš ï¸ Risk Management</h2>
                <p>Zidentyfikuj zagroÅ¼enia dla konta i opracuj strategie mitygacji</p>
            </div>

            <!-- Risk Summary Dashboard -->
            <div class="risk-summary">
                <h3>ðŸ“Š Podsumowanie Ryzyka</h3>
                <div class="risk-stats">
                    <div class="risk-stat">
                        <div class="risk-stat-value" id="totalRisksCount">0</div>
                        <div class="risk-stat-label">Zidentyfikowane Ryzyka</div>
                    </div>
                    <div class="risk-stat">
                        <div class="risk-stat-value" id="criticalRisksCount">0</div>
                        <div class="risk-stat-label">Krytyczne</div>
                    </div>
                    <div class="risk-stat">
                        <div class="risk-stat-value" id="mitigatedRisksCount">0</div>
                        <div class="risk-stat-label">Mitygowane</div>
                    </div>
                    <div class="risk-stat">
                        <div class="risk-stat-value" id="riskScoreValue">-</div>
                        <div class="risk-stat-label">Risk Score</div>
                    </div>
                </div>
            </div>

            <!-- Risk Categories -->
            <div class="risk-categories">
                <!-- Stakeholder Risk -->
                <div class="risk-category">
                    <h4>ðŸ‘¥ Ryzyko StakeholderÃ³w</h4>
                    <div class="risk-item" id="risk-churn">
                        <div class="risk-item-header">
                            <span class="risk-name">Rotacja Kluczowych OsÃ³b</span>
                            <span class="risk-level medium" id="churn-level">MEDIUM</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="churn-probability" onchange="updateRiskLevel('churn')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="churn-impact" onchange="updateRiskLevel('churn')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>

                    <div class="risk-item" id="risk-sponsor">
                        <div class="risk-item-header">
                            <span class="risk-name">Utrata Executive Sponsor</span>
                            <span class="risk-level high" id="sponsor-level">HIGH</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="sponsor-probability" onchange="updateRiskLevel('sponsor')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="sponsor-impact" onchange="updateRiskLevel('sponsor')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Competitive Risk -->
                <div class="risk-category">
                    <h4>ðŸŽ¯ Ryzyko Konkurencyjne</h4>
                    <div class="risk-item" id="risk-competitor">
                        <div class="risk-item-header">
                            <span class="risk-name">Agresywna Konkurencja</span>
                            <span class="risk-level medium" id="competitor-level">MEDIUM</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="competitor-probability" onchange="updateRiskLevel('competitor')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="competitor-impact" onchange="updateRiskLevel('competitor')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>

                    <div class="risk-item" id="risk-price">
                        <div class="risk-item-header">
                            <span class="risk-name">Presja Cenowa</span>
                            <span class="risk-level low" id="price-level">LOW</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="price-probability" onchange="updateRiskLevel('price')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="price-impact" onchange="updateRiskLevel('price')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Financial Risk -->
                <div class="risk-category">
                    <h4>ðŸ’° Ryzyko Finansowe</h4>
                    <div class="risk-item" id="risk-budget">
                        <div class="risk-item-header">
                            <span class="risk-name">CiÄ™cia BudÅ¼etowe</span>
                            <span class="risk-level medium" id="budget-level">MEDIUM</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="budget-probability" onchange="updateRiskLevel('budget')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="budget-impact" onchange="updateRiskLevel('budget')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>

                    <div class="risk-item" id="risk-payment">
                        <div class="risk-item-header">
                            <span class="risk-name">Problemy z PÅ‚atnoÅ›ciami</span>
                            <span class="risk-level low" id="payment-level">LOW</span>
                        </div>
                        <div class="risk-controls">
                            <select class="risk-select" id="payment-probability" onchange="updateRiskLevel('payment')">
                                <option value="">PrawdopodobieÅ„stwo</option>
                                <option value="1">Bardzo niskie (1)</option>
                                <option value="2">Niskie (2)</option>
                                <option value="3">Åšrednie (3)</option>
                                <option value="4">Wysokie (4)</option>
                                <option value="5">Bardzo wysokie (5)</option>
                            </select>
                            <select class="risk-select" id="payment-impact" onchange="updateRiskLevel('payment')">
                                <option value="">WpÅ‚yw</option>
                                <option value="1">Minimalny (1)</option>
                                <option value="2">Niski (2)</option>
                                <option value="3">Åšredni (3)</option>
                                <option value="4">Wysoki (4)</option>
                                <option value="5">Krytyczny (5)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mitigation Strategies -->
            <div class="mitigation-section">
                <h3>ðŸ›¡ï¸ Strategie Mitygacji</h3>
                <div class="mitigation-grid">
                    <div class="mitigation-card">
                        <h4>Stakeholder Relationship Management</h4>
                        <textarea id="mitigation-stakeholder" placeholder="np. MiesiÄ™czne 1:1 z kluczowymi stakeholderami, mapowanie sieci wpÅ‚ywÃ³w, budowanie relacji z nastÄ™pcami, dokumentacja wiedzy..." oninput="saveCard9Data()"></textarea>
                    </div>
                    <div class="mitigation-card">
                        <h4>Competitive Differentiation</h4>
                        <textarea id="mitigation-competitive" placeholder="np. Unique value proposition (ONE-KEY system), long-term partnerships, service excellence, product innovation showcases..." oninput="saveCard9Data()"></textarea>
                    </div>
                    <div class="mitigation-card">
                        <h4>Financial Risk Management</h4>
                        <textarea id="mitigation-financial" placeholder="np. Multi-year contracts, value-based pricing, ROI documentation, flexible payment terms, cost optimization programs..." oninput="saveCard9Data()"></textarea>
                    </div>
                    <div class="mitigation-card">
                        <h4>Early Warning System</h4>
                        <textarea id="mitigation-warning" placeholder="np. Quarterly NPS tracking, regular QBRs, competitor intelligence, budget cycle monitoring, stakeholder satisfaction surveys..." oninput="saveCard9Data()"></textarea>
                    </div>
                </div>
            </div>

            <!-- Action Plan -->
            <div class="action-plan">
                <h3>ðŸ“‹ Plan DziaÅ‚ania - Mitigation</h3>
                <ul class="action-plan-list" id="risk-action-plan">
                    <!-- Risk action items will be rendered here -->
                </ul>
                <button class="add-action-btn" onclick="addRiskAction()">+ Dodaj DziaÅ‚anie Mitygacyjne</button>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="save-mapping-btn" id="saveRiskBtn" onclick="saveRiskManagement()" disabled>
                    ðŸ›¡ï¸ Zapisz Risk Management (+20 XP)
                </button>
            </div>

            <div class="success-message" id="riskSuccess">âœ… Risk Management zapisany! +20 XP</div>

            <div class="card-navigation">
                <button class="nav-button btn-prev" onclick="prevCard()">â† Poprzednia</button>
                <button class="nav-button btn-next" onclick="nextCard()">NastÄ™pna â†’</button>
            </div>
        </div>

        <!-- Card 10: Summary + Badge -->
        <div class="card" id="card10">
            <div class="completion-hero">
                <h2>ðŸŽ‰ Gratulacje!</h2>
                <div class="badge-display">ðŸ’Ž</div>
                <div class="badge-title">Account Growth Master</div>
                <p style="font-size: 1.2rem; margin-top: 15px; opacity: 0.95;">
                    UkoÅ„czyÅ‚eÅ› kompleksowe szkolenie z rozwoju kont kluczowych klientÃ³w B2B
                </p>
                <div class="completion-stats">
                    <div class="completion-stat">
                        <div class="completion-stat-value">10/10</div>
                        <div class="completion-stat-label">UkoÅ„czone Karty</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-stat-value">120</div>
                        <div class="completion-stat-label">Zdobyte XP</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-stat-value" id="totalTimeSpent">-</div>
                        <div class="completion-stat-label">Czas Nauki</div>
                    </div>
                    <div class="completion-stat">
                        <div class="completion-stat-value">100%</div>
                        <div class="completion-stat-label">KompletnoÅ›Ä‡</div>
                    </div>
                </div>
            </div>

            <!-- Journey Recap -->
            <div class="journey-recap">
                <h3>ðŸ“š Twoja ÅšcieÅ¼ka Rozwoju</h3>
                <div class="recap-grid">
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ“º</div>
                        <div class="recap-content">
                            <h4>Fundamenty Wzrostu</h4>
                            <p>Video + refleksja nad strategiami rozwoju kont 100k â†’ 500k PLN</p>
                        </div>
                        <div class="recap-xp">+5 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ“Š</div>
                        <div class="recap-content">
                            <h4>Growth Framework</h4>
                            <p>Matryca Ansoffa: Penetracja, RozwÃ³j Produktu, Ekspansja, Dywersyfikacja</p>
                        </div>
                        <div class="recap-xp">Wiedza</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ—ºï¸</div>
                        <div class="recap-content">
                            <h4>Account Mapping</h4>
                            <p>Stakeholder analysis, org chart, white space - identyfikacja 12 kategorii produktowych</p>
                        </div>
                        <div class="recap-xp">+15 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸŽ¯</div>
                        <div class="recap-content">
                            <h4>Cross-Sell Calculator</h4>
                            <p>Matryca dopasowania produktÃ³w + ranking Top 3 moÅ¼liwoÅ›ci cross-sell</p>
                        </div>
                        <div class="recap-xp">+15 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ“ˆ</div>
                        <div class="recap-content">
                            <h4>Upsell Scenarios</h4>
                            <p>6 realistycznych scenariuszy B2B z feedback i ocenÄ… umiejÄ™tnoÅ›ci</p>
                        </div>
                        <div class="recap-xp">+20 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ“…</div>
                        <div class="recap-content">
                            <h4>12-Month Growth Plan</h4>
                            <p>Kwartalne planowanie (Q1-Q4) z 3 smart templates strategii wzrostu</p>
                        </div>
                        <div class="recap-xp">+15 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ’¼</div>
                        <div class="recap-content">
                            <h4>Executive Sponsorship</h4>
                            <p>Business case builder + 3 C-level email templates (CFO/CEO/COO)</p>
                        </div>
                        <div class="recap-xp">+15 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">ðŸ“…</div>
                        <div class="recap-content">
                            <h4>QBR Template</h4>
                            <p>Quarterly Business Review: metryki, achievements, action items, roadmapa</p>
                        </div>
                        <div class="recap-xp">+15 XP</div>
                    </div>
                    <div class="recap-card">
                        <div class="recap-icon">âš ï¸</div>
                        <div class="recap-content">
                            <h4>Risk Management</h4>
                            <p>6 kategorii ryzyk + strategie mitygacji + plan dziaÅ‚ania</p>
                        </div>
                        <div class="recap-xp">+20 XP</div>
                    </div>
                </div>
            </div>

            <!-- Key Takeaways -->
            <div class="key-takeaways">
                <h3>ðŸŽ“ Kluczowe Wnioski</h3>
                <ul class="takeaway-list">
                    <li class="takeaway-item">
                        <strong>Strategic Account Planning:</strong> Wzrost kont wymaga strukturalnego podejÅ›cia - od mapowania stakeholderÃ³w po dÅ‚ugoterminowe planowanie
                    </li>
                    <li class="takeaway-item">
                        <strong>Multi-Dimensional Growth:</strong> Penetracja, ekspansja produktowa, rozwÃ³j rynku i dywersyfikacja - wszystkie Å›cieÅ¼ki sÄ… waÅ¼ne
                    </li>
                    <li class="takeaway-item">
                        <strong>Executive Engagement:</strong> C-level buy-in to klucz do strategicznych projektÃ³w - kaÅ¼dy decydent potrzebuje innego przekazu
                    </li>
                    <li class="takeaway-item">
                        <strong>Continuous Value Delivery:</strong> QBR to nie raportowanie, to strategiczne partnerstwo i wspÃ³lne planowanie przyszÅ‚oÅ›ci
                    </li>
                    <li class="takeaway-item">
                        <strong>Proactive Risk Management:</strong> Identyfikacja i mitygacja ryzyk zanim siÄ™ zmaterializujÄ… - od rotacji stakeholderÃ³w po presjÄ™ konkurencyjnÄ…
                    </li>
                    <li class="takeaway-item">
                        <strong>Data-Driven Decisions:</strong> Metryki, ROI, TCO - kaÅ¼da decyzja wsparta konkretnymi danymi biznesowymi
                    </li>
                </ul>
            </div>

            <!-- Next Steps -->
            <div class="next-steps">
                <h3>ðŸš€ NastÄ™pne Kroki</h3>
                <div class="next-step-card">
                    <h4>1. Wybierz Konto PilotaÅ¼owe</h4>
                    <p>Zastosuj narzÄ™dzia z tej lekcji na 1 kliencie o potencjale 100k+ PLN. Zacznij od Account Mapping (Card 3).</p>
                </div>
                <div class="next-step-card">
                    <h4>2. Zaplanuj 30-Day Sprint</h4>
                    <p>Pierwszych 30 dni: stakeholder meetings (minimum 3), white space analysis, identyfikacja 2-3 quick wins.</p>
                </div>
                <div class="next-step-card">
                    <h4>3. Zarezerwuj Executive QBR</h4>
                    <p>UmÃ³w spotkanie z decision makerem na Q2 2026 - uÅ¼yj QBR Template (Card 8) jako struktury.</p>
                </div>
                <div class="next-step-card">
                    <h4>4. Benchmark Twoje Wyniki</h4>
                    <p>Za 90 dni: oceÅ„ wzrost (revenue, produkty, stakeholder engagement). Target: +15% w Q1.</p>
                </div>
                <div class="next-step-card">
                    <h4>5. Skaluj na Portfolio</h4>
                    <p>Po sukcesie pilotaÅ¼u - zastosuj framework na wszystkich kontach 50k+ w Twoim portfolio.</p>
                </div>
            </div>

            <!-- Certificate -->
            <div class="certificate-section">
                <div class="certificate-header">
                    <div class="certificate-title">CERTYFIKAT UKOÅƒCZENIA</div>
                    <div class="certificate-subtitle">Milwaukee B2B Training Academy</div>
                </div>
                <div class="certificate-recipient">
                    Niniejszym potwierdza siÄ™, Å¼e <strong id="cert-username">Account Manager</strong>
                </div>
                <div class="certificate-achievement">
                    ukoÅ„czyÅ‚/a z wyrÃ³Å¼nieniem kurs zaawansowany<br>
                    <strong style="color: #C62828; font-size: 1.3rem;">"Account Growth & Expansion Strategies"</strong><br>
                    osiÄ…gajÄ…c <strong>120 XP</strong> i tytuÅ‚ <strong>ðŸ’Ž Account Growth Master</strong>
                </div>
                <div style="color: #666; margin: 20px 0;">
                    Data ukoÅ„czenia: <strong id="cert-date">-</strong>
                </div>
                <div class="certificate-signature">
                    <div class="signature-line">
                        Milwaukee Tools Poland<br>
                        <strong>Training Director</strong>
                    </div>
                    <div class="signature-line">
                        BVA Academy<br>
                        <strong>Program Coordinator</strong>
                    </div>
                </div>
            </div>

            <!-- Final Actions -->
            <div class="final-actions">
                <button class="final-btn secondary" onclick="downloadCertificate()">ðŸ“„ Pobierz Certyfikat</button>
                <button class="final-btn secondary" onclick="shareAchievement()">ðŸ“± UdostÄ™pnij OsiÄ…gniÄ™cie</button>
                <button class="final-btn primary" onclick="completeLesson()">ðŸ† ZakoÅ„cz LekcjÄ™</button>
            </div>

            <div class="success-message" id="lessonComplete" style="margin-top: 30px;">âœ… Lekcja ukoÅ„czona! Badge dodany do profilu.</div>
        </div>

    </div>

    <script>
        // State Management
        let currentCard = 1;
        const totalCards = 10;
        let earnedXP = 0;
        let completedCards = new Set();

        const cardXPValues = {
            1: 5,   // Video + Reflection
            2: 0,   // Growth Framework (educational, no XP)
            3: 15,  // Account Mapping Tool
            4: 15,  // Cross-Sell Calculator
            5: 20,  // Upsell Scenarios
            6: 15,  // 12-Month Growth Plan
            7: 15,  // Executive Sponsorship
            8: 15,  // QBR Template
            9: 20,  // Risk Management
            10: 15  // Summary + Badge
        };

        // Navigation
        function nextCard() {
            if (currentCard < totalCards) {
                currentCard++;
                showCard(currentCard);
                updateNavigation();
            }
        }

        function prevCard() {
            if (currentCard > 1) {
                currentCard--;
                showCard(currentCard);
                updateNavigation();
            }
        }

        function showCard(n) {
            document.querySelectorAll('.card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('card' + n).classList.add('active');
            
            // Initialize Card 10 when showing it
            if (n === 10) {
                initializeCard10();
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateNavigation() {
            const prevBtn = document.querySelector('.btn-prev');
            const nextBtn = document.querySelector('.btn-next');

            if (prevBtn) prevBtn.disabled = currentCard === 1;
            if (nextBtn) nextBtn.disabled = currentCard === totalCards;
        }

        // Progress
        function updateProgress() {
            const totalXP = 120; // Total XP for the lesson
            const percentage = (earnedXP / totalXP) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressFill').textContent = earnedXP + ' XP';
            document.getElementById('progressText').textContent = `${earnedXP} / ${totalXP} XP zdobyte`;
            document.getElementById('progressCards').textContent = `Karta ${currentCard}/${totalCards}`;
        }

        function saveProgress() {
            const progress = {
                currentCard: currentCard,
                earnedXP: earnedXP,
                completedCards: Array.from(completedCards)
            };
            localStorage.setItem('lesson4_progress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('lesson4_progress');
            if (saved) {
                const progress = JSON.parse(saved);
                currentCard = progress.currentCard || 1;
                earnedXP = progress.earnedXP || 0;
                completedCards = new Set(progress.completedCards || []);
                
                showCard(currentCard);
                updateProgress();
                updateNavigation();
            }
        }

        // ===== Card 1: Video + Reflection Functions =====
        function toggleVideoCheckbox() {
            const checkbox = document.getElementById('videoWatched');
            
            if (checkbox.checked) {
                // Award XP (only once)
                if (!completedCards.has(1)) {
                    completedCards.add(1);
                    earnedXP += cardXPValues[1];
                    updateProgress();
                    saveProgress();
                    
                    // Show success message
                    const successMsg = document.getElementById('videoSuccess');
                    successMsg.classList.add('show');
                    setTimeout(() => {
                        successMsg.classList.remove('show');
                    }, 3000);
                }
                
                localStorage.setItem('lesson4_videoWatched', 'true');
            } else {
                localStorage.setItem('lesson4_videoWatched', 'false');
            }
        }

        function autoSaveReflection() {
            const reflection = document.getElementById('videoReflection').value;
            localStorage.setItem('lesson4_videoReflection', reflection);
        }

        // ===== Card 3: Account Mapping Functions =====
        let stakeholders = [];
        let orgPositions = { clevel: [], director: [], manager: [] };
        let whiteSpaceData = {};

        const productCategories = [
            { id: 'tools_m12_m18', name: 'ðŸ”§ NarzÄ™dzia rÄ™czne (M12/M18)' },
            { id: 'stationary', name: 'ðŸ­ NarzÄ™dzia stacjonarne' },
            { id: 'onekey', name: 'ðŸ“± System ONE-KEY' },
            { id: 'packout', name: 'ðŸ“¦ PACKOUT Storage' },
            { id: 'accessories', name: 'ðŸ”‹ Akcesoria (baterie, Å‚adowarki)' },
            { id: 'lighting', name: 'ðŸ’¡ OÅ›wietlenie' },
            { id: 'measurement', name: 'ðŸ“ Pomiar i detekcja' },
            { id: 'ppe', name: 'ðŸ¦º PPE (odzieÅ¼ ochronna)' },
            { id: 'vacuums', name: 'ðŸŒªï¸ Odkurzacze przemysÅ‚owe' },
            { id: 'pneumatic', name: 'âš™ï¸ NarzÄ™dzia pneumatyczne' },
            { id: 'training', name: 'ðŸŽ“ Szkolenia i certyfikacja' },
            { id: 'service', name: 'ðŸ› ï¸ Serwis premium' }
        ];

        function addStakeholder() {
            const name = document.getElementById('stakeholderName').value.trim();
            const title = document.getElementById('stakeholderTitle').value.trim();
            const dept = document.getElementById('stakeholderDept').value.trim();
            const influence = document.getElementById('stakeholderInfluence').value;
            const stance = document.getElementById('stakeholderStance').value;

            if (!name || !title || !dept || !influence || !stance) {
                alert('ProszÄ™ wypeÅ‚niÄ‡ wszystkie pola stakeholdera');
                return;
            }

            const stakeholder = { name, title, dept, influence, stance };
            stakeholders.push(stakeholder);
            renderStakeholders();
            saveCard3Data();
            validateCard3();

            // Clear inputs
            document.getElementById('stakeholderName').value = '';
            document.getElementById('stakeholderTitle').value = '';
            document.getElementById('stakeholderDept').value = '';
            document.getElementById('stakeholderInfluence').value = '';
            document.getElementById('stakeholderStance').value = '';
        }

        function removeStakeholder(index) {
            stakeholders.splice(index, 1);
            renderStakeholders();
            saveCard3Data();
            validateCard3();
        }

        function renderStakeholders() {
            const tbody = document.getElementById('stakeholderList');
            
            if (stakeholders.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999; padding: 30px;">Brak stakeholderÃ³w. Dodaj pierwszego powyÅ¼ej.</td></tr>';
                return;
            }

            tbody.innerHTML = stakeholders.map((s, index) => `
                <tr>
                    <td><strong>${s.name}</strong></td>
                    <td>${s.title}</td>
                    <td>${s.dept}</td>
                    <td><span class="stakeholder-badge influence-${s.influence}">${getInfluenceLabel(s.influence)}</span></td>
                    <td><span class="stakeholder-badge stance-${s.stance}">${getStanceLabel(s.stance)}</span></td>
                    <td><button class="delete-btn" onclick="removeStakeholder(${index})">UsuÅ„</button></td>
                </tr>
            `).join('');
        }

        function getInfluenceLabel(influence) {
            const labels = { high: 'Wysoki', medium: 'Åšredni', low: 'Niski' };
            return labels[influence] || influence;
        }

        function getStanceLabel(stance) {
            const labels = { champion: 'Champion', neutral: 'Neutralny', blocker: 'Blocker' };
            return labels[stance] || stance;
        }

        function addPosition(level) {
            const name = document.getElementById(`${level}Name`).value.trim();
            const title = document.getElementById(`${level}Title`).value.trim();
            const penetration = parseInt(document.getElementById(`${level}Penetration`).value) || 0;

            if (!name || !title || penetration < 0 || penetration > 100) {
                alert('ProszÄ™ wypeÅ‚niÄ‡ wszystkie pola (penetracja 0-100%)');
                return;
            }

            orgPositions[level].push({ name, title, penetration });
            renderOrgChart();
            saveCard3Data();
            validateCard3();

            // Clear inputs
            document.getElementById(`${level}Name`).value = '';
            document.getElementById(`${level}Title`).value = '';
            document.getElementById(`${level}Penetration`).value = '';
        }

        function removePosition(level, index) {
            orgPositions[level].splice(index, 1);
            renderOrgChart();
            saveCard3Data();
            validateCard3();
        }

        function renderOrgChart() {
            ['clevel', 'director', 'manager'].forEach(level => {
                const container = document.getElementById(`${level}Positions`);
                const positions = orgPositions[level];

                if (positions.length === 0) {
                    container.innerHTML = '<p style="color: #999; padding: 20px;">Brak pozycji. Dodaj powyÅ¼ej.</p>';
                    return;
                }

                container.innerHTML = positions.map((p, index) => `
                    <div class="org-position">
                        <div class="position-name">${p.name}</div>
                        <div class="position-title">${p.title}</div>
                        <div class="penetration-bar">
                            <div class="penetration-fill" style="width: ${p.penetration}%"></div>
                        </div>
                        <div class="penetration-label">Penetracja Milwaukee: ${p.penetration}%</div>
                        <button class="delete-btn" style="margin-top: 10px; width: 100%;" onclick="removePosition('${level}', ${index})">UsuÅ„</button>
                    </div>
                `).join('');
            });
        }

        function initWhiteSpace() {
            const grid = document.getElementById('whitespaceGrid');
            
            grid.innerHTML = productCategories.map(cat => `
                <div class="product-card">
                    <h4>${cat.name}</h4>
                    <div class="product-field">
                        <label>Obecne uÅ¼ycie:</label>
                        <select id="${cat.id}_usage" onchange="updateWhiteSpace()">
                            <option value="no">Nie</option>
                            <option value="yes">Tak</option>
                        </select>
                    </div>
                    <div class="product-field">
                        <label>Roczna wartoÅ›Ä‡ obecna (PLN):</label>
                        <input type="number" id="${cat.id}_current" min="0" value="0" onchange="updateWhiteSpace()" placeholder="0">
                    </div>
                    <div class="product-field">
                        <label>PotencjaÅ‚ roczny (PLN):</label>
                        <input type="number" id="${cat.id}_potential" min="0" value="0" onchange="updateWhiteSpace()" placeholder="0">
                    </div>
                    <div class="gap-display">
                        Luka: <span id="${cat.id}_gap">0 PLN</span>
                    </div>
                </div>
            `).join('');
        }

        function updateWhiteSpace() {
            let totalCurrent = 0;
            let totalPotential = 0;
            let filledCount = 0;

            productCategories.forEach(cat => {
                const usage = document.getElementById(`${cat.id}_usage`).value;
                const current = parseFloat(document.getElementById(`${cat.id}_current`).value) || 0;
                const potential = parseFloat(document.getElementById(`${cat.id}_potential`).value) || 0;
                const gap = potential - current;

                document.getElementById(`${cat.id}_gap`).textContent = `${gap.toLocaleString('pl-PL')} PLN`;

                totalCurrent += current;
                totalPotential += potential;

                if (potential > 0) filledCount++;

                whiteSpaceData[cat.id] = { usage, current, potential, gap };
            });

            const totalGap = totalPotential - totalCurrent;
            const penetration = totalPotential > 0 ? ((totalCurrent / totalPotential) * 100).toFixed(1) : 0;

            document.getElementById('currentRevenue').textContent = `${totalCurrent.toLocaleString('pl-PL')} PLN`;
            document.getElementById('potentialRevenue').textContent = `${totalPotential.toLocaleString('pl-PL')} PLN`;
            document.getElementById('revenueGap').textContent = `${totalGap.toLocaleString('pl-PL')} PLN`;
            document.getElementById('penetrationPercent').textContent = `${penetration}%`;

            saveCard3Data();
            validateCard3();
        }

        function validateCard3() {
            const totalPositions = orgPositions.clevel.length + orgPositions.director.length + orgPositions.manager.length;
            const filledProducts = productCategories.filter(cat => {
                const potential = parseFloat(document.getElementById(`${cat.id}_potential`)?.value) || 0;
                return potential > 0;
            }).length;

            const isValid = stakeholders.length >= 3 && totalPositions >= 5 && filledProducts >= 8;
            document.getElementById('saveMappingBtn').disabled = !isValid;
        }

        function saveAccountMapping() {
            if (!completedCards.has(3)) {
                completedCards.add(3);
                earnedXP += cardXPValues[3];
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('mappingSuccess');
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }

            saveCard3Data();
        }

        function saveCard3Data() {
            const data = {
                stakeholders,
                orgPositions,
                whiteSpaceData
            };
            localStorage.setItem('lesson4_card3', JSON.stringify(data));
        }

        function loadCard3Data() {
            const saved = localStorage.getItem('lesson4_card3');
            if (saved) {
                const data = JSON.parse(saved);
                stakeholders = data.stakeholders || [];
                orgPositions = data.orgPositions || { clevel: [], director: [], manager: [] };
                whiteSpaceData = data.whiteSpaceData || {};

                renderStakeholders();
                renderOrgChart();

                // Restore white space inputs
                productCategories.forEach(cat => {
                    const catData = whiteSpaceData[cat.id];
                    if (catData) {
                        const usageEl = document.getElementById(`${cat.id}_usage`);
                        const currentEl = document.getElementById(`${cat.id}_current`);
                        const potentialEl = document.getElementById(`${cat.id}_potential`);

                        if (usageEl) usageEl.value = catData.usage || 'no';
                        if (currentEl) currentEl.value = catData.current || 0;
                        if (potentialEl) potentialEl.value = catData.potential || 0;
                    }
                });

                updateWhiteSpace();
            }
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            
            // Restore video state
            const videoWatched = localStorage.getItem('lesson4_videoWatched');
            if (videoWatched === 'true') {
                document.getElementById('videoWatched').checked = true;
            }
            
            // Restore reflection
            const reflection = localStorage.getItem('lesson4_videoReflection');
            if (reflection) {
                document.getElementById('videoReflection').value = reflection;
            }

            // Initialize Card 3
            initWhiteSpace();
            loadCard3Data();

            // Initialize Card 4
            initFitMatrix();
            loadCard4Data();

            // Initialize Card 5
            initUpsellScenarios();
            loadCard5Data();

            // Initialize Card 6
            loadCard6Data();

            // Initialize Card 7
            loadCard7Data();

            // Initialize Card 8
            loadCard8Data();

            // Initialize Card 9
            loadCard9Data();

            // Initialize Card 10
            if (currentCard === 10) {
                initializeCard10();
            }
        });

        // ===== Card 10: Summary + Badge Functions =====
        function initializeCard10() {
            // Set certificate username
            const username = localStorage.getItem('username') || 'Account Manager';
            const certUsername = document.getElementById('cert-username');
            if (certUsername) {
                certUsername.textContent = username;
            }

            // Set completion date
            const certDate = document.getElementById('cert-date');
            if (certDate) {
                certDate.textContent = new Date().toLocaleDateString('pl-PL', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            }

            // Calculate total time (estimate based on saved progress)
            const startTime = localStorage.getItem('lesson4_startTime');
            if (startTime) {
                const elapsed = Date.now() - parseInt(startTime);
                const minutes = Math.round(elapsed / 60000);
                const timeSpentElement = document.getElementById('totalTimeSpent');
                if (timeSpentElement) {
                    if (minutes < 60) {
                        timeSpentElement.textContent = `${minutes} min`;
                    } else {
                        const hours = Math.floor(minutes / 60);
                        const mins = minutes % 60;
                        timeSpentElement.textContent = `${hours}h ${mins}m`;
                    }
                }
            } else {
                // Set start time if not already set
                localStorage.setItem('lesson4_startTime', Date.now().toString());
            }
        }

        function downloadCertificate() {
            alert('ðŸš§ Funkcja eksportu certyfikatu bÄ™dzie dostÄ™pna wkrÃ³tce!\n\nBÄ™dzie moÅ¼na pobraÄ‡ certyfikat jako PDF z peÅ‚nÄ… personalizacjÄ….');
        }

        function shareAchievement() {
            const shareText = `ðŸŽ‰ WÅ‚aÅ›nie ukoÅ„czyÅ‚em kurs "Account Growth & Expansion Strategies" od Milwaukee B2B Training Academy!\n\nðŸ’Ž Account Growth Master\nðŸ† 120 XP zdobyte\nðŸ“š 10/10 kart ukoÅ„czonych\n\n#MilwaukeeTraining #B2BSales #AccountManagement`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Milwaukee B2B Training - Achievement',
                    text: shareText
                }).catch(err => console.log('Share cancelled'));
            } else if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('âœ… Tekst skopiowany do schowka!\n\nMoÅ¼esz go teraz wkleiÄ‡ w social media.');
                });
            } else {
                alert(shareText);
            }
        }

        function completeLesson() {
            // Award final 15 XP if not already done
            if (!completedCards.has(10)) {
                earnedXP += 15;
                completedCards.add(10);
                updateProgress();
                saveProgress();

                // Save completion to localStorage
                const completionData = {
                    lessonId: 'lesson4_account_growth',
                    completedDate: new Date().toISOString(),
                    totalXP: 120,
                    badge: 'Account Growth Master',
                    badgeIcon: 'ðŸ’Ž'
                };
                localStorage.setItem('lesson4_completion', JSON.stringify(completionData));

                // Show success message
                const successMsg = document.getElementById('lessonComplete');
                if (successMsg) {
                    successMsg.style.display = 'block';
                }

                // Confetti effect (simple version)
                setTimeout(() => {
                    alert('ðŸŽ‰ GRATULACJE! ðŸŽ‰\n\nUkoÅ„czyÅ‚eÅ› kompleksowy kurs Account Growth & Expansion!\n\nðŸ’Ž Badge "Account Growth Master" zostaÅ‚ dodany do Twojego profilu.\nðŸ† 120 XP zdobyte\nðŸ“š Certyfikat dostÄ™pny do pobrania\n\nTeraz moÅ¼esz zastosowaÄ‡ te narzÄ™dzia w prawdziwych scenariuszach biznesowych!\n\nPowodzenia! ðŸš€');
                }, 500);
            } else {
                alert('âœ… Lekcja juÅ¼ ukoÅ„czona!\n\nMoÅ¼esz wrÃ³ciÄ‡ do poszczegÃ³lnych kart, aby odÅ›wieÅ¼yÄ‡ wiedzÄ™.');
            }
        }

        // ===== Card 9: Risk Management Functions =====
        let riskData = {
            churn: { probability: 0, impact: 0 },
            sponsor: { probability: 0, impact: 0 },
            competitor: { probability: 0, impact: 0 },
            price: { probability: 0, impact: 0 },
            budget: { probability: 0, impact: 0 },
            payment: { probability: 0, impact: 0 }
        };

        let riskActions = [];
        let riskActionCounter = 0;

        function updateRiskLevel(riskType) {
            const probability = parseInt(document.getElementById(`${riskType}-probability`)?.value) || 0;
            const impact = parseInt(document.getElementById(`${riskType}-impact`)?.value) || 0;
            
            riskData[riskType] = { probability, impact };
            
            const score = probability * impact;
            let level = 'low';
            
            if (score >= 20) level = 'critical';
            else if (score >= 12) level = 'high';
            else if (score >= 6) level = 'medium';
            else level = 'low';
            
            const levelElement = document.getElementById(`${riskType}-level`);
            if (levelElement) {
                levelElement.textContent = level.toUpperCase();
                levelElement.className = `risk-level ${level}`;
            }
            
            const riskItem = document.getElementById(`risk-${riskType}`);
            if (riskItem && (probability > 0 || impact > 0)) {
                riskItem.classList.add('active');
            }
            
            updateRiskStats();
            saveCard9Data();
            validateCard9();
        }

        function updateRiskStats() {
            let totalRisks = 0;
            let criticalRisks = 0;
            let mitigatedRisks = 0;
            let totalScore = 0;
            
            Object.keys(riskData).forEach(key => {
                const { probability, impact } = riskData[key];
                if (probability > 0 && impact > 0) {
                    totalRisks++;
                    const score = probability * impact;
                    totalScore += score;
                    if (score >= 20) criticalRisks++;
                }
            });
            
            const hasMitigation = [
                document.getElementById('mitigation-stakeholder')?.value,
                document.getElementById('mitigation-competitive')?.value,
                document.getElementById('mitigation-financial')?.value,
                document.getElementById('mitigation-warning')?.value
            ].filter(v => v && v.length > 30).length;
            
            mitigatedRisks = hasMitigation;
            
            document.getElementById('totalRisksCount').textContent = totalRisks;
            document.getElementById('criticalRisksCount').textContent = criticalRisks;
            document.getElementById('mitigatedRisksCount').textContent = mitigatedRisks;
            document.getElementById('riskScoreValue').textContent = totalRisks > 0 ? Math.round(totalScore / totalRisks) : '-';
        }

        function addRiskAction() {
            riskActionCounter++;
            const action = {
                id: riskActionCounter,
                title: '',
                description: '',
                owner: '',
                deadline: '',
                priority: 'medium'
            };
            riskActions.push(action);
            renderRiskActions();
        }

        function renderRiskActions() {
            const container = document.getElementById('risk-action-plan');
            if (!container) return;
            
            container.innerHTML = '';
            
            riskActions.forEach(action => {
                const li = document.createElement('li');
                li.className = 'action-plan-item';
                li.innerHTML = `
                    <input type="text" placeholder="TytuÅ‚ dziaÅ‚ania..." value="${action.title}" oninput="updateRiskAction(${action.id}, 'title', this.value)">
                    <textarea placeholder="Opis strategii mitygacji..." oninput="updateRiskAction(${action.id}, 'description', this.value)">${action.description}</textarea>
                    <div class="action-plan-meta">
                        <select onchange="updateRiskAction(${action.id}, 'owner', this.value)">
                            <option value="">WÅ‚aÅ›ciciel</option>
                            <option value="Account Manager" ${action.owner === 'Account Manager' ? 'selected' : ''}>Account Manager</option>
                            <option value="Sales Manager" ${action.owner === 'Sales Manager' ? 'selected' : ''}>Sales Manager</option>
                            <option value="Executive Team" ${action.owner === 'Executive Team' ? 'selected' : ''}>Executive Team</option>
                        </select>
                        <input type="date" value="${action.deadline}" onchange="updateRiskAction(${action.id}, 'deadline', this.value)">
                        <select onchange="updateRiskAction(${action.id}, 'priority', this.value)">
                            <option value="low" ${action.priority === 'low' ? 'selected' : ''}>Priorytet: Niski</option>
                            <option value="medium" ${action.priority === 'medium' ? 'selected' : ''}>Priorytet: Åšredni</option>
                            <option value="high" ${action.priority === 'high' ? 'selected' : ''}>Priorytet: Wysoki</option>
                        </select>
                    </div>
                `;
                container.appendChild(li);
            });
            
            saveCard9Data();
        }

        function updateRiskAction(id, field, value) {
            const action = riskActions.find(a => a.id === id);
            if (action) {
                action[field] = value;
                saveCard9Data();
                validateCard9();
            }
        }

        function validateCard9() {
            const assessedRisks = Object.values(riskData).filter(r => r.probability > 0 && r.impact > 0).length;
            const mitigationStrategies = [
                document.getElementById('mitigation-stakeholder')?.value,
                document.getElementById('mitigation-competitive')?.value,
                document.getElementById('mitigation-financial')?.value,
                document.getElementById('mitigation-warning')?.value
            ].filter(v => v && v.length > 30).length;
            const hasActions = riskActions.length >= 3 && riskActions.filter(a => a.title && a.description.length > 20).length >= 3;
            
            const isValid = assessedRisks >= 4 && mitigationStrategies >= 3 && hasActions;
            
            const saveBtn = document.getElementById('saveRiskBtn');
            if (saveBtn) {
                saveBtn.disabled = !isValid;
            }
            
            return isValid;
        }

        function saveRiskManagement() {
            if (!validateCard9()) {
                alert('âš ï¸ WypeÅ‚nij wymagane sekcje:\n- OceÅ„ minimum 4 ryzyka\n- Opisz minimum 3 strategie mitygacji\n- Dodaj minimum 3 dziaÅ‚ania');
                return;
            }

            if (!completedCards.has(9)) {
                earnedXP += 20;
                completedCards.add(9);
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('riskSuccess');
                const saveBtn = document.getElementById('saveRiskBtn');
                
                if (successMsg) {
                    successMsg.style.display = 'block';
                    setTimeout(() => {
                        successMsg.style.display = 'none';
                    }, 3000);
                }
                
                if (saveBtn) {
                    saveBtn.textContent = 'âœ… Zapisano!';
                    saveBtn.disabled = true;
                }
            }
        }

        function saveCard9Data() {
            const data = {
                riskData: riskData,
                mitigationStakeholder: document.getElementById('mitigation-stakeholder')?.value || '',
                mitigationCompetitive: document.getElementById('mitigation-competitive')?.value || '',
                mitigationFinancial: document.getElementById('mitigation-financial')?.value || '',
                mitigationWarning: document.getElementById('mitigation-warning')?.value || '',
                riskActions: riskActions
            };
            localStorage.setItem('lesson4_card9', JSON.stringify(data));
        }

        function loadCard9Data() {
            const saved = localStorage.getItem('lesson4_card9');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    
                    if (data.riskData) {
                        riskData = data.riskData;
                        Object.keys(riskData).forEach(key => {
                            const { probability, impact } = riskData[key];
                            if (document.getElementById(`${key}-probability`)) {
                                document.getElementById(`${key}-probability`).value = probability || '';
                            }
                            if (document.getElementById(`${key}-impact`)) {
                                document.getElementById(`${key}-impact`).value = impact || '';
                            }
                            if (probability > 0 || impact > 0) {
                                updateRiskLevel(key);
                            }
                        });
                    }
                    
                    if (document.getElementById('mitigation-stakeholder')) {
                        document.getElementById('mitigation-stakeholder').value = data.mitigationStakeholder || '';
                    }
                    if (document.getElementById('mitigation-competitive')) {
                        document.getElementById('mitigation-competitive').value = data.mitigationCompetitive || '';
                    }
                    if (document.getElementById('mitigation-financial')) {
                        document.getElementById('mitigation-financial').value = data.mitigationFinancial || '';
                    }
                    if (document.getElementById('mitigation-warning')) {
                        document.getElementById('mitigation-warning').value = data.mitigationWarning || '';
                    }
                    
                    if (data.riskActions) {
                        riskActions = data.riskActions;
                        riskActionCounter = Math.max(...riskActions.map(a => a.id), 0);
                        renderRiskActions();
                    }
                    
                    updateRiskStats();
                    validateCard9();
                } catch (e) {
                    console.error('Error loading Card 9 data:', e);
                }
            }
        }

        // ===== Card 8: QBR Template Functions =====
        let actionItemCounter = 0;
        let actionItems = [];

        function addActionItem() {
            actionItemCounter++;
            const item = {
                id: actionItemCounter,
                description: '',
                owner: '',
                status: 'in-progress',
                completed: false
            };
            actionItems.push(item);
            renderActionItems();
        }

        function renderActionItems() {
            const container = document.getElementById('action-items-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            actionItems.forEach(item => {
                const li = document.createElement('li');
                li.className = 'action-item';
                li.innerHTML = `
                    <input type="checkbox" ${item.completed ? 'checked' : ''} onchange="toggleActionItem(${item.id})">
                    <div class="action-item-content">
                        <input type="text" placeholder="Opis action item..." value="${item.description}" oninput="updateActionItem(${item.id}, 'description', this.value)">
                        <div class="action-meta">
                            <select onchange="updateActionItem(${item.id}, 'owner', this.value)">
                                <option value="">WÅ‚aÅ›ciciel</option>
                                <option value="Account Manager" ${item.owner === 'Account Manager' ? 'selected' : ''}>Account Manager</option>
                                <option value="Klient - Zakupy" ${item.owner === 'Klient - Zakupy' ? 'selected' : ''}>Klient - Zakupy</option>
                                <option value="Klient - Techniczny" ${item.owner === 'Klient - Techniczny' ? 'selected' : ''}>Klient - Techniczny</option>
                                <option value="Milwaukee - Wsparcie" ${item.owner === 'Milwaukee - Wsparcie' ? 'selected' : ''}>Milwaukee - Wsparcie</option>
                            </select>
                            <select onchange="updateActionItem(${item.id}, 'status', this.value)">
                                <option value="in-progress" ${item.status === 'in-progress' ? 'selected' : ''}>W trakcie</option>
                                <option value="completed" ${item.status === 'completed' ? 'selected' : ''}>ZakoÅ„czone</option>
                                <option value="delayed" ${item.status === 'delayed' ? 'selected' : ''}>OpÃ³Åºnione</option>
                                <option value="cancelled" ${item.status === 'cancelled' ? 'selected' : ''}>Anulowane</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(li);
            });
            
            saveCard8Data();
            updateQBRCompletion();
        }

        function toggleActionItem(id) {
            const item = actionItems.find(a => a.id === id);
            if (item) {
                item.completed = !item.completed;
                renderActionItems();
            }
        }

        function updateActionItem(id, field, value) {
            const item = actionItems.find(a => a.id === id);
            if (item) {
                item[field] = value;
                saveCard8Data();
                updateQBRCompletion();
            }
        }

        function updateQBRCompletion() {
            const revenue = document.getElementById('qbr-revenue')?.value || '';
            const achievements = document.getElementById('qbr-achievements')?.value || '';
            const challenges = document.getElementById('qbr-challenges')?.value || '';
            const learnings = document.getElementById('qbr-learnings')?.value || '';
            const month1 = document.getElementById('qbr-month1')?.value || '';
            const month2 = document.getElementById('qbr-month2')?.value || '';
            const month3 = document.getElementById('qbr-month3')?.value || '';
            
            const hasMetrics = revenue.length > 0;
            const hasReview = achievements.length > 50 && challenges.length > 30 && learnings.length > 30;
            const hasActions = actionItems.length >= 3;
            const hasRoadmap = month1.length > 30 && month2.length > 30 && month3.length > 30;
            
            const isComplete = hasMetrics && hasReview && hasActions && hasRoadmap;
            
            const statusElement = document.getElementById('qbr-completion-status');
            const saveBtn = document.getElementById('saveQBRBtn');
            
            if (statusElement) {
                if (isComplete) {
                    statusElement.textContent = 'Kompletny âœ“';
                    statusElement.className = 'qbr-completion complete';
                } else {
                    statusElement.textContent = 'W trakcie wypeÅ‚niania';
                    statusElement.className = 'qbr-completion';
                }
            }
            
            if (saveBtn) {
                saveBtn.disabled = !isComplete;
            }
            
            return isComplete;
        }

        function previewQBR() {
            const revenue = document.getElementById('qbr-revenue')?.value || 'N/A';
            const volume = document.getElementById('qbr-volume')?.value || 'N/A';
            const nps = document.getElementById('qbr-nps')?.value || 'N/A';
            const delivery = document.getElementById('qbr-delivery')?.value || 'N/A';
            const achievements = document.getElementById('qbr-achievements')?.value || 'Brak danych';
            const challenges = document.getElementById('qbr-challenges')?.value || 'Brak danych';
            const learnings = document.getElementById('qbr-learnings')?.value || 'Brak danych';
            const month1 = document.getElementById('qbr-month1')?.value || 'Brak planu';
            const month2 = document.getElementById('qbr-month2')?.value || 'Brak planu';
            const month3 = document.getElementById('qbr-month3')?.value || 'Brak planu';
            
            let actionItemsText = '';
            actionItems.forEach((item, index) => {
                const status = item.completed ? 'âœ“' : 'â—‹';
                actionItemsText += `${index + 1}. ${status} ${item.description || 'Brak opisu'} (${item.owner || 'Brak wÅ‚aÅ›ciciela'} - ${item.status})\n`;
            });
            
            const preview = `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           QUARTERLY BUSINESS REVIEW
           Milwaukee Tools - Account Growth
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“Š EXECUTIVE DASHBOARD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ’° PrzychÃ³d (Q): ${revenue}
ðŸ“¦ Wolumen SprzedaÅ¼y: ${volume}
ðŸŽ¯ NPS Score: ${nps}
ðŸ› ï¸ Czas Realizacji: ${delivery}

ðŸŽ¯ PODSUMOWANIE POPRZEDNIEGO KWARTAÅU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… GÅÃ“WNE OSIÄ„GNIÄ˜CIA:
${achievements}

âš ï¸ WYZWANIA I PRZESZKODY:
${challenges}

ðŸ“š KLUCZOWE WNIOSKI:
${learnings}

âœ”ï¸ STATUS ACTION ITEMS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
${actionItemsText || 'Brak action items'}

ðŸš€ ROADMAPA NASTÄ˜PNEGO KWARTAÅU
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸ“… MIESIÄ„C 1 - INICJACJA:
${month1}

ðŸ“… MIESIÄ„C 2 - ROZWÃ“J:
${month2}

ðŸ“… MIESIÄ„C 3 - KONSOLIDACJA:
${month3}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            Wygenerowano: ${new Date().toLocaleDateString('pl-PL')}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `;
            
            alert(preview);
        }

        function copyQBRToClipboard() {
            const revenue = document.getElementById('qbr-revenue')?.value || 'N/A';
            const volume = document.getElementById('qbr-volume')?.value || 'N/A';
            const nps = document.getElementById('qbr-nps')?.value || 'N/A';
            const delivery = document.getElementById('qbr-delivery')?.value || 'N/A';
            const achievements = document.getElementById('qbr-achievements')?.value || 'Brak danych';
            const challenges = document.getElementById('qbr-challenges')?.value || 'Brak danych';
            const learnings = document.getElementById('qbr-learnings')?.value || 'Brak danych';
            const month1 = document.getElementById('qbr-month1')?.value || 'Brak planu';
            const month2 = document.getElementById('qbr-month2')?.value || 'Brak planu';
            const month3 = document.getElementById('qbr-month3')?.value || 'Brak planu';
            
            let actionItemsText = '';
            actionItems.forEach((item, index) => {
                const status = item.completed ? 'âœ“' : 'â—‹';
                actionItemsText += `${index + 1}. ${status} ${item.description || 'Brak opisu'} (${item.owner || 'Brak wÅ‚aÅ›ciciela'} - ${item.status})\n`;
            });
            
            const qbrText = `QUARTERLY BUSINESS REVIEW - Milwaukee Tools\n\nEXECUTIVE DASHBOARD:\nPrzychÃ³d: ${revenue}\nWolumen: ${volume}\nNPS: ${nps}\nCzas Realizacji: ${delivery}\n\nOSIÄ„GNIÄ˜CIA:\n${achievements}\n\nWYZWANIA:\n${challenges}\n\nWNIOSKI:\n${learnings}\n\nACTION ITEMS:\n${actionItemsText}\n\nROADMAPA:\nMiesiÄ…c 1: ${month1}\nMiesiÄ…c 2: ${month2}\nMiesiÄ…c 3: ${month3}`;
            
            navigator.clipboard.writeText(qbrText).then(() => {
                alert('âœ“ QBR skopiowany do schowka!');
            }).catch(err => {
                console.error('BÅ‚Ä…d kopiowania:', err);
                alert('Nie udaÅ‚o siÄ™ skopiowaÄ‡. SprÃ³buj ponownie.');
            });
        }

        function downloadQBR() {
            alert('ðŸš§ Funkcja eksportu PDF bÄ™dzie dostÄ™pna wkrÃ³tce!\n\nNa razie uÅ¼yj opcji "Kopiuj do schowka" i wklej zawartoÅ›Ä‡ do dokumentu Word/Google Docs.');
        }

        function saveQBR() {
            if (!updateQBRCompletion()) {
                alert('âš ï¸ WypeÅ‚nij wszystkie wymagane sekcje QBR!');
                return;
            }

            if (!completedCards.has(8)) {
                earnedXP += 15;
                completedCards.add(8);
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('qbrSuccess');
                const saveBtn = document.getElementById('saveQBRBtn');
                
                if (successMsg) {
                    successMsg.style.display = 'block';
                    setTimeout(() => {
                        successMsg.style.display = 'none';
                    }, 3000);
                }
                
                if (saveBtn) {
                    saveBtn.textContent = 'âœ… Zapisano!';
                    saveBtn.disabled = true;
                }
            }
        }

        function saveCard8Data() {
            const data = {
                revenue: document.getElementById('qbr-revenue')?.value || '',
                volume: document.getElementById('qbr-volume')?.value || '',
                nps: document.getElementById('qbr-nps')?.value || '',
                delivery: document.getElementById('qbr-delivery')?.value || '',
                revenueChange: document.getElementById('qbr-revenue-change')?.value || '',
                volumeChange: document.getElementById('qbr-volume-change')?.value || '',
                npsChange: document.getElementById('qbr-nps-change')?.value || '',
                deliveryChange: document.getElementById('qbr-delivery-change')?.value || '',
                achievements: document.getElementById('qbr-achievements')?.value || '',
                challenges: document.getElementById('qbr-challenges')?.value || '',
                learnings: document.getElementById('qbr-learnings')?.value || '',
                month1: document.getElementById('qbr-month1')?.value || '',
                month2: document.getElementById('qbr-month2')?.value || '',
                month3: document.getElementById('qbr-month3')?.value || '',
                actionItems: actionItems
            };
            localStorage.setItem('lesson4_card8', JSON.stringify(data));
        }

        function loadCard8Data() {
            const saved = localStorage.getItem('lesson4_card8');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (document.getElementById('qbr-revenue')) document.getElementById('qbr-revenue').value = data.revenue || '';
                    if (document.getElementById('qbr-volume')) document.getElementById('qbr-volume').value = data.volume || '';
                    if (document.getElementById('qbr-nps')) document.getElementById('qbr-nps').value = data.nps || '';
                    if (document.getElementById('qbr-delivery')) document.getElementById('qbr-delivery').value = data.delivery || '';
                    if (document.getElementById('qbr-revenue-change')) document.getElementById('qbr-revenue-change').value = data.revenueChange || '';
                    if (document.getElementById('qbr-volume-change')) document.getElementById('qbr-volume-change').value = data.volumeChange || '';
                    if (document.getElementById('qbr-nps-change')) document.getElementById('qbr-nps-change').value = data.npsChange || '';
                    if (document.getElementById('qbr-delivery-change')) document.getElementById('qbr-delivery-change').value = data.deliveryChange || '';
                    if (document.getElementById('qbr-achievements')) document.getElementById('qbr-achievements').value = data.achievements || '';
                    if (document.getElementById('qbr-challenges')) document.getElementById('qbr-challenges').value = data.challenges || '';
                    if (document.getElementById('qbr-learnings')) document.getElementById('qbr-learnings').value = data.learnings || '';
                    if (document.getElementById('qbr-month1')) document.getElementById('qbr-month1').value = data.month1 || '';
                    if (document.getElementById('qbr-month2')) document.getElementById('qbr-month2').value = data.month2 || '';
                    if (document.getElementById('qbr-month3')) document.getElementById('qbr-month3').value = data.month3 || '';
                    if (data.actionItems) {
                        actionItems = data.actionItems;
                        actionItemCounter = Math.max(...actionItems.map(a => a.id), 0);
                        renderActionItems();
                    }
                    updateQBRCompletion();
                } catch (e) {
                    console.error('Error loading Card 8 data:', e);
                }
            }
        }

        // ===== Card 7: Executive Sponsorship Functions =====
        let businessCaseData = {
            currentSpend: 0,
            proposedSpend: 0,
            annualSavings: 0,
            currentProducts: '',
            painPoints: '',
            proposedSolution: '',
            savingsSources: ''
        };

        let emailsSent = {
            cfo: false,
            ceo: false,
            coo: false
        };

        function calculateROI() {
            const current = parseFloat(document.getElementById('currentSpend').value) || 0;
            const proposed = parseFloat(document.getElementById('proposedSpend').value) || 0;
            const savings = parseFloat(document.getElementById('annualSavings').value) || 0;

            const delta = proposed - current;
            const netGain = savings - delta;
            const roiMultiple = delta > 0 ? (savings / delta).toFixed(1) : 0;
            const paybackMonths = delta > 0 ? Math.round((delta / savings) * 12) : 0;
            const threeYearValue = netGain * 3;

            document.getElementById('roiAmount').textContent = `${netGain.toLocaleString('pl-PL')} PLN`;
            document.getElementById('roiMultiple').textContent = `${roiMultiple}x`;
            document.getElementById('roiPayback').textContent = `${paybackMonths} mies`;
            document.getElementById('roi3Year').textContent = `${threeYearValue.toLocaleString('pl-PL')} PLN`;

            businessCaseData.currentSpend = current;
            businessCaseData.proposedSpend = proposed;
            businessCaseData.annualSavings = savings;

            updateBusinessCase();
        }

        function updateBusinessCase() {
            businessCaseData.currentProducts = document.getElementById('currentProducts')?.value || '';
            businessCaseData.painPoints = document.getElementById('painPoints')?.value || '';
            businessCaseData.proposedSolution = document.getElementById('proposedSolution')?.value || '';
            businessCaseData.savingsSources = document.getElementById('savingsSources')?.value || '';

            validateCard7();
            saveCard7Data();
        }

        function switchEmailTemplate(type) {
            // Update tabs
            document.querySelectorAll('.template-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Update templates
            document.querySelectorAll('.email-template').forEach(template => template.classList.remove('active'));
            document.getElementById(`template_${type}`).classList.add('active');
        }

        function updateEmailPreview(type) {
            const current = businessCaseData.currentSpend;
            const proposed = businessCaseData.proposedSpend;
            const savings = businessCaseData.annualSavings;
            const delta = proposed - current;
            const netGain = savings - delta;
            const roiMultiple = delta > 0 ? (savings / delta).toFixed(1) : 0;
            const paybackMonths = delta > 0 ? Math.round((delta / savings) * 12) : 0;
            const threeYear = netGain * 3;

            if (type === 'cfo') {
                const name = document.getElementById('cfo_name').value || '{{CFO_NAME}}';
                const company = document.getElementById('cfo_company').value || '{{COMPANY}}';
                const currentStr = document.getElementById('cfo_current').value || '{{CURRENT_SPEND}}';
                const proposedStr = document.getElementById('cfo_proposed').value || '{{PROPOSED_SPEND}}';
                const roiStr = document.getElementById('cfo_roi').value || '{{ROI_AMOUNT}}';
                const payback = document.getElementById('cfo_payback').value || '{{PAYBACK_MONTHS}}';
                const yourName = document.getElementById('cfo_yourname').value || '{{YOUR_NAME}}';

                let body = `Szanowny Panie ${name},

ChciaÅ‚bym przedstawiÄ‡ analizÄ™ TCO (Total Cost of Ownership) narzÄ™dzi Milwaukee w ${company}, ktÃ³ra pokazuje potencjaÅ‚ oszczÄ™dnoÅ›ci ${roiStr} rocznie przy inwestycji ${proposedStr}.

ðŸ“Š KLUCZOWE LICZBY:
- Obecne wydatki: ${currentStr}/rok
- Proponowana inwestycja: ${proposedStr}/rok (+${delta.toLocaleString('pl-PL')} PLN)
- OszczÄ™dnoÅ›ci roczne: ${roiStr}
- Netto zysk: ${netGain.toLocaleString('pl-PL')} PLN/rok
- ROI: ${roiMultiple}x
- Payback period: ${payback} miesiÄ™cy
- 3-year value: ${threeYear.toLocaleString('pl-PL')} PLN

ðŸ‘‰ Å¹RÃ“DÅA OSZCZÄ˜DNOÅšCI:
1. Redukcja downtime (upgrade do FUEL = dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡, mniej awarii)
2. Eliminacja strat narzÄ™dzi (PACKOUT storage + ONE-KEY tracking)
3. Szybsza wymiana przy awarii (Premium Support 24h zamiast 3-5 dni)
4. Predictable budgeting (subscription model OPEX vs volatile CAPEX)

ðŸ›¡ï¸ RISK MITIGATION:
- Fixed cost structure (koniec volatile spending)
- Vendor lock-in protection (multi-year pricing guarantee)
- Downtime insurance (SLA 24h response)

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ peÅ‚nÄ… analizÄ™ TCO w 30-minutowym spotkaniu w przyszÅ‚ym tygodniu?

Pozdrawiam,
${yourName}
Milwaukee Account Manager`;

                document.getElementById('cfo_to').textContent = name;
                document.getElementById('cfo_body').textContent = body;

            } else if (type === 'ceo') {
                const name = document.getElementById('ceo_name').value || '{{CEO_NAME}}';
                const company = document.getElementById('ceo_company').value || '{{COMPANY}}';
                const industry = document.getElementById('ceo_industry').value || '{{INDUSTRY}}';
                const goal = document.getElementById('ceo_goal').value || '{{STRATEGIC_GOAL}}';
                const innovation = document.getElementById('ceo_innovation').value || '{{INNOVATION_EXAMPLE}}';
                const yourName = document.getElementById('ceo_yourname').value || '{{YOUR_NAME}}';

                document.getElementById('ceo_subject').textContent = `Strategic Partnership: Milwaukee + ${company} = ${goal}`;

                let body = `Szanowna Pani ${name},

Milwaukee Tools obserwuje ${company} jako lidera w ${industry}, szczegÃ³lnie w kontekÅ›cie ${goal}. Wierzymy, Å¼e moÅ¼emy byÄ‡ czymÅ› wiÄ™cej niÅ¼ dostawcÄ… narzÄ™dzi â€” partnerem strategicznym w tej transformacji.

ðŸš€ WIZJA PARTNERSTWA:
Zamiast transakcyjnej relacji "dostawca-klient", proponujemy strategic partnership oparty na:
1. **Innovation co-development**: ${innovation}
2. **Industry leadership**: Case study ${company} + Milwaukee jako benchmark w ${industry}
3. **Long-term commitment**: Multi-year agreement z roadmap innowacji

ðŸŽ¯ STRATEGIC VALUE:
- **Competitive advantage**: Pierwsza firma w ${industry} z peÅ‚nÄ… integracjÄ… IoT narzÄ™dzi
- **Brand enhancement**: Joint PR/case studies pozycjonujÄ…ce ${company} jako tech leader
- **Talent retention**: Najlepsze narzÄ™dzia = attractive employer w walce o talent

ðŸ“ˆ BUSINESS IMPACT:
Strategic partnership wykracza poza oszczÄ™dnoÅ›ci operacyjne. To inwestycja w:
- Innovation culture (employees widzÄ… commitment do najlepszych narzÄ™dzi)
- Industry positioning (bycie first-mover w tech adoption)
- Long-term resilience (predictable costs, guaranteed supply, priority access do nowych technologii)

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ vision strategic partnership w Executive Board Meeting?

Pozdrawiam,
${yourName}
Milwaukee Strategic Partnerships`;

                document.getElementById('ceo_to').textContent = name;
                document.getElementById('ceo_body').textContent = body;

            } else if (type === 'coo') {
                const name = document.getElementById('coo_name').value || '{{COO_NAME}}';
                const company = document.getElementById('coo_company').value || '{{COMPANY}}';
                const downtimeCurrent = document.getElementById('coo_downtime').value || '{{DOWNTIME_CURRENT}}';
                const downtimeReduced = document.getElementById('coo_reduced').value || '{{DOWNTIME_REDUCED}}';
                const safety = document.getElementById('coo_safety').value || '{{SAFETY_METRIC}}';
                const yourName = document.getElementById('coo_yourname').value || '{{YOUR_NAME}}';

                document.getElementById('coo_subject').textContent = `Operational Excellence: -75% Downtime + ${safety}`;

                let body = `Szanowny Panie ${name},

PrzeanalizowaliÅ›my operational metryki ${company} i zidentyfikowaliÅ›my opportunity dla dramatic improvement w downtime, safety i quality poprzez strategic tool management.

âš™ï¸ OPERATIONAL IMPACT:

1. **DOWNTIME REDUCTION:**
   - Obecny stan: ${downtimeCurrent} narzÄ™dziowego downtime/rok
   - Proponowany: ${downtimeReduced}/rok (-75%)
   - Metoda: M18 FUEL (2x dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡) + Premium Support (24h wymiana)

2. **PRODUCTIVITY GAINS:**
   - Szybsze narzÄ™dzia = 15-20% faster task completion
   - PACKOUT system = zero time szukania narzÄ™dzi (avg 8 min/dzieÅ„ saved/pracownik)
   - ONE-KEY = automated inventory (koniec manual tracking)

3. **SAFETY IMPROVEMENT:**
   - Ergonomiczne narzÄ™dzia = ${safety}
   - Grzewcza odzieÅ¼ Milwaukee = compliance z HSE w zimnych Å›rodowiskach
   - Training certification = 60% redukcja user errors

4. **QUALITY ENHANCEMENT:**
   - Precision tools dla Quality Department
   - Standardization (koniec mixed brands = lepsza consistency)
   - Calibration tracking via ONE-KEY

ðŸ“Š COMPETITIVE BENCHMARK:
Top automotive suppliers (VW, BMW suppliers) osiÄ…gajÄ…:
- <40h narzÄ™dziowego downtime/rok
- <2% tool-related quality issues
- 95%+ tool availability

${company} moÅ¼e to osiÄ…gnÄ…Ä‡ w 12 miesiÄ™cy.

Czy mÃ³gÅ‚bym zaprezentowaÄ‡ operational roadmap ZespoÅ‚owi Operations?

Pozdrawiam,
${yourName}
Milwaukee Operational Excellence Team`;

                document.getElementById('coo_to').textContent = name;
                document.getElementById('coo_body').textContent = body;
            }

            saveCard7Data();
        }

        function markEmailSent(type) {
            emailsSent[type] = true;
            alert(`âœ… Email do ${type.toUpperCase()} oznaczony jako wysÅ‚any!`);
            validateCard7();
            saveCard7Data();
        }

        function copyEmail(type) {
            const body = document.getElementById(`${type}_body`).textContent;
            const subject = document.getElementById(`${type}_subject`).textContent;
            const to = document.getElementById(`${type}_to`).textContent;
            
            const fullEmail = `Do: ${to}\nTemat: ${subject}\n\n${body}`;
            
            navigator.clipboard.writeText(fullEmail).then(() => {
                alert('âœ… Email skopiowany do schowka!');
            });
        }

        function validateCard7() {
            const businessCaseFilled = 
                businessCaseData.currentSpend > 0 &&
                businessCaseData.proposedSpend > 0 &&
                businessCaseData.annualSavings > 0 &&
                businessCaseData.currentProducts.trim() &&
                businessCaseData.painPoints.trim() &&
                businessCaseData.proposedSolution.trim() &&
                businessCaseData.savingsSources.trim();

            const atLeastOneEmail = emailsSent.cfo || emailsSent.ceo || emailsSent.coo;

            const isValid = businessCaseFilled && atLeastOneEmail;
            document.getElementById('saveExecutiveBtn').disabled = !isValid;
        }

        function saveExecutiveSponsorship() {
            if (!completedCards.has(7)) {
                completedCards.add(7);
                earnedXP += cardXPValues[7];
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('executiveSuccess');
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }

            saveCard7Data();
        }

        function saveCard7Data() {
            const data = {
                businessCase: businessCaseData,
                emailsSent: emailsSent
            };
            localStorage.setItem('lesson4_card7', JSON.stringify(data));
        }

        function loadCard7Data() {
            const saved = localStorage.getItem('lesson4_card7');
            if (saved) {
                const data = JSON.parse(saved);
                
                if (data.businessCase) {
                    businessCaseData = data.businessCase;
                    
                    document.getElementById('currentSpend').value = businessCaseData.currentSpend || '';
                    document.getElementById('proposedSpend').value = businessCaseData.proposedSpend || '';
                    document.getElementById('annualSavings').value = businessCaseData.annualSavings || '';
                    document.getElementById('currentProducts').value = businessCaseData.currentProducts || '';
                    document.getElementById('painPoints').value = businessCaseData.painPoints || '';
                    document.getElementById('proposedSolution').value = businessCaseData.proposedSolution || '';
                    document.getElementById('savingsSources').value = businessCaseData.savingsSources || '';
                    
                    calculateROI();
                }

                if (data.emailsSent) {
                    emailsSent = data.emailsSent;
                }

                validateCard7();
            }
        }

        // ===== Card 6: 12-Month Growth Plan Functions =====
        let growthPlanData = {
            template: null,
            q1: { actions: '', revenue: 0, stakeholders: '', metrics: '' },
            q2: { actions: '', revenue: 0, stakeholders: '', metrics: '' },
            q3: { actions: '', revenue: 0, stakeholders: '', metrics: '' },
            q4: { actions: '', revenue: 0, stakeholders: '', metrics: '' }
        };

        const planTemplates = {
            penetration: {
                q1: {
                    actions: 'Analiza obecnego wykorzystania produktÃ³w w istniejÄ…cych dziaÅ‚ach. Identyfikacja gapÃ³w w uÅ¼yciu (np. 50% pracownikÃ³w ma narzÄ™dzia, 50% nie). Pilot: wyposaÅ¼enie pozostaÅ‚ych 50% w podstawowe narzÄ™dzia M18.',
                    revenue: 120000,
                    stakeholders: 'Production Manager, Line Supervisors (3-5 osÃ³b)',
                    metrics: '15% wzrost uÅ¼ycia narzÄ™dzi w Produkcji, 3 nowi kontakty budowanie relacji'
                },
                q2: {
                    actions: 'Rozszerzenie na kolejne linie produkcyjne. Wprowadzenie akcesoriÃ³w (baterie, Å‚adowarki, oÅ›wietlenie) do obecnych uÅ¼ytkownikÃ³w. Pierwsze QBR pokazujÄ…ce ROI z Q1.',
                    revenue: 180000,
                    stakeholders: 'Production Manager, Maintenance Head, Procurement',
                    metrics: '30% wzrost wallet share, QBR przeprowadzone, akcesoria w 100% linii'
                },
                q3: {
                    actions: 'PeÅ‚na penetracja - kaÅ¼dy pracownik ma kompleksowy zestaw narzÄ™dzi. WdroÅ¼enie systemu ONE-KEY (tracking, anti-theft). Measurement tools dla JakoÅ›ci.',
                    revenue: 280000,
                    stakeholders: 'Production + Quality + Maintenance (multi-threading)',
                    metrics: '100% penetracja w Produkcji, ONE-KEY wdroÅ¼one, Quality Department wÅ‚Ä…czony'
                },
                q4: {
                    actions: 'Consolidation i renewal. Roczny kontrakt na staÅ‚e dostawy. Setup subscription modelu na rok 2. Executive Review pokazujÄ…cy ROI 12 miesiÄ™cy.',
                    revenue: 420000,
                    stakeholders: 'CFO, Procurement Director, PM (executive alignment)',
                    metrics: 'Kontrakt roczny podpisany, subscription model zaakceptowany, 250% ROI udokumentowany'
                }
            },
            expansion: {
                q1: {
                    actions: 'Identyfikacja nowych kategorii produktÃ³w komplementarnych do obecnych. Pilot PACKOUT storage w 2 dziaÅ‚ach (redukcja strat narzÄ™dzi). Pomiar baseline: ile narzÄ™dzi gubiÄ… miesiÄ™cznie.',
                    revenue: 100000,
                    stakeholders: 'Facility Manager, Warehouse Manager, obecni PM',
                    metrics: 'Pilot PACKOUT uruchomiony, baseline strat zmierzony (np. 10 narzÄ™dzi/mies)'
                },
                q2: {
                    actions: 'Rozszerzenie pilotu PACKOUT na 5 dziaÅ‚Ã³w. Wprowadzenie PPE (odzieÅ¼ grzewcza) do BHP. Cross-sell odkurzaczy przemysÅ‚owych do Maintenance.',
                    revenue: 180000,
                    stakeholders: 'BHP Manager, Maintenance Head, Procurement',
                    metrics: 'PACKOUT w 5 dziaÅ‚ach, straty narzÄ™dzi -60%, PPE pilot zatwierdzony'
                },
                q3: {
                    actions: 'PeÅ‚ne wdroÅ¼enie PACKOUT (100% dziaÅ‚Ã³w). Ekspansja PPE na caÅ‚Ä… organizacjÄ™. Training certification program dla technicianÃ³w (nowa kategoria usÅ‚ug).',
                    revenue: 300000,
                    stakeholders: 'HR Manager (training), CFO (ROI approval), multi-dept',
                    metrics: 'PACKOUT 100% adoption, PPE w 80% pracownikÃ³w, 30 osÃ³b w certification'
                },
                q4: {
                    actions: 'Strategic portfolio review - jakie KOLEJNE kategorie w rok 2 (np. pneumatics, lighting expansion). Renewal + expansion kontraktu. Setup multi-year partnership.',
                    revenue: 420000,
                    stakeholders: 'C-level (CEO, CFO), strategic partnership team',
                    metrics: 'Kontrakt +40% YoY, 5 nowych kategorii zidentyfikowanych, strategic supplier status'
                }
            },
            strategic: {
                q1: {
                    actions: 'Executive mapping: kto jest w C-level, kto ma budget authority. Stakeholder interviews (3-5 executiveÃ³w). Zrozumienie strategic priorities firmy na rok (nie tylko narzÄ™dzia - ogÃ³lny biznes).',
                    revenue: 150000,
                    stakeholders: 'CFO, COO, Procurement Director (C-level focus)',
                    metrics: '5 executive interviewÃ³w, strategic priorities zmapowane, business case draft'
                },
                q2: {
                    actions: 'Business case dla CFO: pokazanie ROI z redukcji downtime, TCO savings, productivity gains. Propozycja pilotÃ³w strategicznych (np. co-design linii produkcyjnej). Pierwsze Executive QBR.',
                    revenue: 220000,
                    stakeholders: 'CFO (business case presentation), CEO (strategic vision)',
                    metrics: 'Executive QBR przeprowadzone, business case zaakceptowany, pilot strategiczny zatwierdzony'
                },
                q3: {
                    actions: 'Pilot strategiczny (np. wsparto rozwoju nowej linii produkcyjnej Milwaukee tools + training + support). Multi-threading: relacje z 10+ stakeholderÃ³w (wszystkie poziomy). Innovation workshops.',
                    revenue: 350000,
                    stakeholders: 'Board members, Innovation Team, Operations Leadership',
                    metrics: 'Pilot strategiczny ukoÅ„czony, 10+ strong relationships, innovation roadmap Q4'
                },
                q4: {
                    actions: 'Strategic Partnership Agreement: multi-year, preferred supplier status, joint innovation projects. Executive Steering Committee setup (kwartalnie spotkania C-level). Roadmap na 3 lata.',
                    revenue: 500000,
                    stakeholders: 'CEO, Board (partnership signed at C-level)',
                    metrics: 'Strategic Partnership podpisane, 3-year agreement, Steering Committee utworzony, preferred supplier status'
                }
            }
        };

        function selectTemplate(templateName) {
            // Visual selection
            document.querySelectorAll('.template-option').forEach(opt => opt.classList.remove('selected'));
            event.target.closest('.template-option').classList.add('selected');

            // Load template data
            const template = planTemplates[templateName];
            growthPlanData.template = templateName;

            ['q1', 'q2', 'q3', 'q4'].forEach(quarter => {
                document.getElementById(`${quarter}_actions`).value = template[quarter].actions;
                document.getElementById(`${quarter}_revenue`).value = template[quarter].revenue;
                document.getElementById(`${quarter}_stakeholders`).value = template[quarter].stakeholders;
                document.getElementById(`${quarter}_metrics`).value = template[quarter].metrics;
                
                growthPlanData[quarter] = { ...template[quarter] };
                updateQuarter(quarter);
            });

            updatePlanSummary();
            saveCard6Data();
        }

        function updateQuarter(quarter) {
            const actions = document.getElementById(`${quarter}_actions`).value.trim();
            const revenue = parseFloat(document.getElementById(`${quarter}_revenue`).value) || 0;
            const stakeholders = document.getElementById(`${quarter}_stakeholders`).value.trim();
            const metrics = document.getElementById(`${quarter}_metrics`).value.trim();

            growthPlanData[quarter] = { actions, revenue, stakeholders, metrics };

            // Check if quarter is filled
            const isFilled = actions && revenue > 0 && stakeholders && metrics;
            const section = document.getElementById(`section_${quarter}`);
            const circle = document.getElementById(`circle_${quarter}`);

            if (isFilled) {
                section.classList.add('filled');
                circle.classList.add('completed');
            } else {
                section.classList.remove('filled');
                circle.classList.remove('completed');
            }

            updatePlanSummary();
            validateCard6();
            saveCard6Data();
        }

        function updatePlanSummary() {
            const totalRevenue = ['q1', 'q2', 'q3', 'q4'].reduce((sum, q) => {
                return sum + (parseFloat(document.getElementById(`${q}_revenue`).value) || 0);
            }, 0);

            const filledCount = ['q1', 'q2', 'q3', 'q4'].filter(q => {
                const actions = document.getElementById(`${q}_actions`).value.trim();
                const revenue = parseFloat(document.getElementById(`${q}_revenue`).value) || 0;
                const stakeholders = document.getElementById(`${q}_stakeholders`).value.trim();
                const metrics = document.getElementById(`${q}_metrics`).value.trim();
                return actions && revenue > 0 && stakeholders && metrics;
            }).length;

            const q1Rev = parseFloat(document.getElementById('q1_revenue').value) || 0;
            const q4Rev = parseFloat(document.getElementById('q4_revenue').value) || 0;
            const growthRate = q1Rev > 0 ? (((q4Rev - q1Rev) / q1Rev) * 100).toFixed(0) : 0;

            document.getElementById('totalRevenue').textContent = `${totalRevenue.toLocaleString('pl-PL')} PLN`;
            document.getElementById('quartersCompleted').textContent = `${filledCount}/4`;
            document.getElementById('growthRate').textContent = `${growthRate}%`;
        }

        function validateCard6() {
            const allFilled = ['q1', 'q2', 'q3', 'q4'].every(q => {
                const actions = document.getElementById(`${q}_actions`).value.trim();
                const revenue = parseFloat(document.getElementById(`${q}_revenue`).value) || 0;
                const stakeholders = document.getElementById(`${q}_stakeholders`).value.trim();
                const metrics = document.getElementById(`${q}_metrics`).value.trim();
                return actions && revenue > 0 && stakeholders && metrics;
            });

            document.getElementById('saveGrowthPlanBtn').disabled = !allFilled;
        }

        function generatePlanSummary() {
            let summary = '=== PLAN ROZWOJU KONTA NA 12 MIESIÄ˜CY ===\n\n';
            
            ['q1', 'q2', 'q3', 'q4'].forEach(q => {
                const qNum = q.toUpperCase();
                const data = {
                    actions: document.getElementById(`${q}_actions`).value,
                    revenue: document.getElementById(`${q}_revenue`).value,
                    stakeholders: document.getElementById(`${q}_stakeholders`).value,
                    metrics: document.getElementById(`${q}_metrics`).value
                };

                summary += `${qNum}:\n`;
                summary += `DziaÅ‚ania: ${data.actions}\n`;
                summary += `Target: ${data.revenue} PLN\n`;
                summary += `Stakeholderzy: ${data.stakeholders}\n`;
                summary += `Metryki: ${data.metrics}\n\n`;
            });

            const totalRev = ['q1', 'q2', 'q3', 'q4'].reduce((sum, q) => {
                return sum + (parseFloat(document.getElementById(`${q}_revenue`).value) || 0);
            }, 0);

            summary += `\nTOTAL TARGET ROCZNY: ${totalRev.toLocaleString('pl-PL')} PLN`;

            alert(summary);
        }

        function copyPlanToClipboard() {
            let text = '=== PLAN ROZWOJU KONTA ===\n\n';
            
            ['q1', 'q2', 'q3', 'q4'].forEach(q => {
                text += `${q.toUpperCase()}:\n`;
                text += `DziaÅ‚ania: ${document.getElementById(`${q}_actions`).value}\n`;
                text += `Revenue: ${document.getElementById(`${q}_revenue`).value} PLN\n`;
                text += `Stakeholderzy: ${document.getElementById(`${q}_stakeholders`).value}\n`;
                text += `Metryki: ${document.getElementById(`${q}_metrics`).value}\n\n`;
            });

            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… Plan skopiowany do schowka!');
            });
        }

        function saveGrowthPlan() {
            if (!completedCards.has(6)) {
                completedCards.add(6);
                earnedXP += cardXPValues[6];
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('growthPlanSuccess');
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }

            saveCard6Data();
        }

        function saveCard6Data() {
            localStorage.setItem('lesson4_card6', JSON.stringify(growthPlanData));
        }

        function loadCard6Data() {
            const saved = localStorage.getItem('lesson4_card6');
            if (saved) {
                growthPlanData = JSON.parse(saved);

                // Restore template selection
                if (growthPlanData.template) {
                    const templateOptions = document.querySelectorAll('.template-option');
                    const templates = ['penetration', 'expansion', 'strategic'];
                    const index = templates.indexOf(growthPlanData.template);
                    if (index >= 0 && templateOptions[index]) {
                        templateOptions[index].classList.add('selected');
                    }
                }

                // Restore quarters
                ['q1', 'q2', 'q3', 'q4'].forEach(q => {
                    const data = growthPlanData[q];
                    if (data) {
                        const actionsEl = document.getElementById(`${q}_actions`);
                        const revenueEl = document.getElementById(`${q}_revenue`);
                        const stakeholdersEl = document.getElementById(`${q}_stakeholders`);
                        const metricsEl = document.getElementById(`${q}_metrics`);

                        if (actionsEl) actionsEl.value = data.actions || '';
                        if (revenueEl) revenueEl.value = data.revenue || 0;
                        if (stakeholdersEl) stakeholdersEl.value = data.stakeholders || '';
                        if (metricsEl) metricsEl.value = data.metrics || '';

                        updateQuarter(q);
                    }
                });

                updatePlanSummary();
            }
        }

        // ===== Card 5: Upsell Scenarios Functions =====
        let scenarioAnswers = {};

        const upsellScenarios = [
            {
                id: 1,
                title: 'ðŸ“ˆ Upsell Wolumenu: 50 â†’ 100 NarzÄ™dzi',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> ZakÅ‚ad Produkcyjny VW PoznaÅ„ - 200 pracownikÃ³w linii montaÅ¼owych</p>
                    <p><strong>Obecne zuÅ¼ycie:</strong> 50 wkrÄ™tarek M18 rocznie (wymiana zniszczonych/zaginionych)</p>
                    <p><strong>TwÃ³j cel:</strong> ZwiÄ™kszyÄ‡ do 100 narzÄ™dzi rocznie (podwÃ³jny wolumen)</p>
                    <p><strong>Pain point:</strong> PM skarÅ¼y siÄ™, Å¼e czÄ™sto brakuje narzÄ™dzi (pracownicy dzielÄ… siÄ™, straty czasu)</p>`,
                question: 'Jak najlepiej podejÅ›Ä‡ do upsellingu wolumenu?',
                options: [
                    { letter: 'A', text: 'Zaoferuj rabat 15% przy zamÃ³wieniu 100 narzÄ™dzi zamiast 50 - wojuj cenÄ…' },
                    { letter: 'B', text: 'Zaproponuj analizÄ™ wykorzystania: "Policzymy ile czasu tracimy na szukanie/dzielenie narzÄ™dzi. ROI w przestojach."' },
                    { letter: 'C', text: 'Powiedz PM: "Konkurencja daje 20% rabatu przy wiÄ™kszym wolumenie, moÅ¼emy dopasowaÄ‡"' },
                    { letter: 'D', text: 'Po prostu zaproponuj podwÃ³jne zamÃ³wienie bez uzasadnienia biznesowego' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Idealnie! ROI z ProduktywnoÅ›ci</h4><p><strong>Dlaczego B jest najlepsze:</strong> Upsell wolumenu ZAWSZE musi mieÄ‡ uzasadnienie biznesowe. "Policzymy straty czasu" = kwantyfikujesz problem. PrzykÅ‚ad: 200 pracownikÃ³w Ã— 5 minut dziennie szukania narzÄ™dzi = 1000 minut/dzieÅ„ = 16.7 godzin strat. Przy stawce 50 PLN/h = 835 PLN/dzieÅ„ = 200k PLN/rok. 50 dodatkowych narzÄ™dzi po 1500 PLN = 75k PLN inwestycja â†’ ROI 2.7x w rok 1. To jest upsell strategiczny.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = wojna cenowa (malejace marÅ¼e). C = konkurencja nie jest argumentem (klient kupi od nich). D = brak value prop = odrzucenie.</p>',
                    incorrect: '<h4>âŒ Nie, to nie dziaÅ‚a w B2B</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - Analiza ROI z produktywnoÅ›ci.</p><p><strong>Problem z TwojÄ… odpowiedziÄ…:</strong> Upsell wolumenu BEZ kwantyfikacji problemu = PM nie dostaÅ‚ zgody budÅ¼etowej. CFO pyta: "Po co 2Ã— wiÄ™cej narzÄ™dzi?" PM nie ma odpowiedzi â†’ odrzucenie. Top KAM robi tak: Analiza uÅ¼ycia â†’ Kwantyfikacja strat (czas, pieniÄ…dze) â†’ ROI case â†’ PM prezentuje CFO â†’ zgoda. PrzykÅ‚ad: "16.7h/dzieÅ„ strat szukania narzÄ™dzi = 200k PLN/rok. 50 narzÄ™dzi = 75k PLN. ROI 2.7x." To jest jÄ™zyk biznesu.</p>'
                }
            },
            {
                id: 2,
                title: 'â¬†ï¸ Upgrade Path: Standard â†’ M18 FUEL Premium',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> KGHM Serwis GÃ³rniczy - 50 serwisantÃ³w</p>
                    <p><strong>Obecne narzÄ™dzia:</strong> Milwaukee M18 Standard (1800 PLN/szt)</p>
                    <p><strong>TwÃ³j cel:</strong> Upgrade do M18 FUEL Brushless (2800 PLN/szt) - +56% cena</p>
                    <p><strong>Pain point:</strong> Awarie co 18 miesiÄ™cy, serwisanci skarÅ¼Ä… siÄ™ na kreatywnoÅ›Ä‡ baterii</p>`,
                question: 'Jak usprawiedliwiÄ‡ +1000 PLN rÃ³Å¼nicy na narzÄ™dziu?',
                options: [
                    { letter: 'A', text: 'Powiedz: "FUEL to premium, lepsze dla profesjonalistÃ³w" - ogÃ³lniki bez liczb' },
                    { letter: 'B', text: 'Zbuduj TCO model: FUEL = 2Ã— dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡ (36 vs 18 mies) + 30% mniej awarii â†’ niÅ¼szy caÅ‚kowity koszt wÅ‚asnoÅ›ci przez 5 lat' },
                    { letter: 'C', text: 'Zaproponuj rozkÅ‚adanie pÅ‚atnoÅ›ci: "PÅ‚aÄ‡ +200 PLN/miesiÄ…c przez 5 miesiÄ™cy" - unikaj tematu wartoÅ›ci' },
                    { letter: 'D', text: 'Powiedz: "Wszyscy przechodziÄ… na FUEL, nie chcesz zostaÄ‡ w tyle"' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Perfekcyjnie! TCO Wygrywa Premium Pitch</h4><p><strong>Dlaczego B jest mistrzowskie:</strong> Premium upsell = pokazanie Å¼e "droÅ¼sze" jest "taÅ„sze" w dÅ‚ugim terminie. PrzykÅ‚adowy TCO: Standard (1800 PLN) Ã— 2 wymian/5 lat = 3600 PLN. FUEL (2800 PLN) Ã— 1 wymiana/5 lat + 30% mniej awarii = 2800 PLN + oszczÄ™dnoÅ›ci serwisowe 400 PLN = 3200 PLN. OszczÄ™dnoÅ›Ä‡: 400 PLN/narzÄ™dzie Ã— 50 serwisantÃ³w = 20k PLN w 5 lat. To jest TCO thinking.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = pusty marketing. C = finansowanie nie zmienia wartoÅ›ci. D = peer pressure nie dziaÅ‚a w B2B (Å¼ycia wydajnoÅ›Ä‡).</p>',
                    incorrect: '<h4>âŒ To nie przekona CFO</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - TCO (Total Cost of Ownership) model.</p><p><strong>Problem:</strong> Premium bez TCO = "Za drogie". CFO pyta: "Po co +56% cena?" Musisz pokazaÄ‡ liczby. PrzykÅ‚ad: Standard awariuje co 18 mies â†’ 2 wymian w 36 mies = 3600 PLN. FUEL = 36+ mies Å¼ywotnoÅ›ci = 2800 PLN + mniej awarii. W 5 lat: Standard = 2 wymian = 3600 PLN. FUEL = 1 wymiana = 2800 PLN. OszczÄ™dnoÅ›Ä‡ 800 PLN/narzÄ™dzie. Ã— 50 = 40k PLN oszczÄ™dnoÅ›ci. To jest argumentacja CFO.</p>'
                }
            },
            {
                id: 3,
                title: 'ðŸ“¦ Ekspansja Ekosystemu: Tools â†’ PACKOUT Storage',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> Budimex Warszawa - 120 brygadzistÃ³w budowlanych</p>
                    <p><strong>Obecne produkty:</strong> 300 narzÄ™dzi M18 (wkrÄ™tarki, szlifierki, piÅ‚y)</p>
                    <p><strong>TwÃ³j cel:</strong> DosprzedaÄ‡ system PACKOUT (skrzynki, wÃ³zki, organizery) - nowa kategoria produktu</p>
                    <p><strong>Pain point:</strong> PM skarÅ¼y siÄ™: "Co tydzieÅ„ gubiÄ… narzÄ™dzia, magazynowanie w aucie = chaos"</p>`,
                question: 'Jak najlepiej wprowadziÄ‡ NOWY produkt do istniejÄ…cego klienta?',
                options: [
                    { letter: 'A', text: 'WysyÅ‚asz broszurÄ™ PACKOUT mailem z opisem: "Zobacz nasze skrzynki!" - czekasz na reakcjÄ™' },
                    { letter: 'B', text: 'Zaproponuj pilot 3-miesiÄ™czny: 10 brygadzistÃ³w testuje PACKOUT za darmo. Mierzysz: straty narzÄ™dzi przed/po + czas pakowania. Po pilotcie pokazujesz ROI z danych.' },
                    { letter: 'C', text: 'Powiedz PM: "PACKOUT to must-have w branÅ¼y, konkurencja juÅ¼ ma" - naciskasz na FOMO' },
                    { letter: 'D', text: 'Zaoferuj pakiet bundle: "Kup 50 narzÄ™dzi, PACKOUT za 50% ceny" - rabatowanie nowej kategorii' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Genialne! Pilot = Data = SprzedaÅ¼</h4><p><strong>Dlaczego B to zÅ‚oty standard:</strong> Nowa kategoria produktu = ryzyko dla klienta. Pilot ELIMINUJE ryzyko + dostarcza DANE do decyzji. PrzykÅ‚ad: 10 brygadzistÃ³w Ã— 3 miesiÄ…ce. Przed: 5 zaginionych narzÄ™dzi/miesiÄ…c Ã— 1500 PLN = 7500 PLN/mies strat. Po PACKOUT: 1 zaginione/mies = 1500 PLN. OszczÄ™dnoÅ›Ä‡: 6000 PLN/mies. PACKOUT koszt: 800 PLN/brygadzista. ROI: 6000 PLN oszczÄ™dnoÅ›ci vs 800 PLN inwestycja = 7.5x ROI/mies. Po 3 mies masz DANE â†’ PM pokazuje CFO â†’ zamÃ³wienie 120 PACKOUT = 96k PLN.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = brak engagement. C = FOMO nie przekonuje CFO. D = rabat = marÅ¼a siÄ™ spaliÅ‚a, brak value prop.</p>',
                    incorrect: '<h4>âŒ Nowa kategoria potrzebuje proof</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - Pilot + pomiar ROI.</p><p><strong>Problem:</strong> Nowa kategoria BEZ pilotu = PM musi "wierzyÄ‡" Å¼e zadziaÅ‚a. CFO nie akceptuje wiary, chce dane. Pilot robi 3 rzeczy: (1) Usuwa ryzyko (darmowy test), (2) Dostarcza dane (straty przed/po), (3) Tworzy adwokatÃ³w (10 brygadzistÃ³w uÅ¼ywa â†’ mowiÄ… pozostaÅ‚ym 110). Po 3 mies masz case study wewnÄ™trzny. PM pokazuje CFO: "10 brygad zaoszczÄ™dziÅ‚o 18k PLN w 3 mies dziÄ™ki PACKOUT. ChcÄ™ rozerwaÄ‡ na 120 brygad." Zgoda automatyczna.</p>'
                }
            },
            {
                id: 4,
                title: 'ðŸ›¡ï¸ Service Tier: Basic Warranty â†’ Premium Support',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> Faurecia Poland - 80 narzÄ™dzi w Serwisie</p>
                    <p><strong>Obecny service:</strong> Gwarancja standardowa 3 lata (wymiana wadliwych, brak priorytetyzacji)</p>
                    <p><strong>TwÃ³j cel:</strong> Upsell do Premium Support (4500 PLN/rok): 24h wymiana, dedicated tech support, roczne audyty</p>
                    <p><strong>Pain point:</strong> Kierownik Serwisu: "Jak coÅ› siÄ™ zepsuje, linia stoi 3-5 dni czekajÄ…c na wymianÄ™"</p>`,
                question: 'Jak usprawiedliwiÄ‡ 4500 PLN/rok za "szybszÄ… usÅ‚ugÄ™"?',
                options: [
                    { letter: 'A', text: 'Powiedz: "Premium = VIP treatment, jesteÅ› waÅ¼nym klientem" - apeluj do ego' },
                    { letter: 'B', text: 'Oblicz koszt przestoju: Linia stoi 4 dni/rok z powodu awarii narzÄ™dzi Ã— produkcja 50k PLN/dzieÅ„ = 200k PLN strat. Premium (24h wymiana) = max 1 dzieÅ„ spaceÃ³j = oszczÄ™dnoÅ›Ä‡ 150k PLN/rok. Premium koszt: 4500 PLN. ROI: 33x.' },
                    { letter: 'C', text: 'Zaproponuj: "Pierwsze 6 miesiÄ™cy Premium za darmo, potem pÅ‚acisz" - darmowy okres prÃ³bny' },
                    { letter: 'D', text: 'Powiedz: "Premium ma 95% klientÃ³w w branÅ¼y automotive" - statystyka bez kontekstu' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Mistrzowskie! Downtime = NajdroÅ¼szy Koszt</h4><p><strong>Dlaczego B to perfekcja:</strong> Service upsell = kwantyfikacja UKRYTYCH kosztÃ³w (downtime). PrzykÅ‚ad: Linia produkuje 50k PLN/dzieÅ„. Awaria narzÄ™dzia â†’ stop linii â†’ 3-5 dni czekania na wymianÄ™ = 150-250k PLN strat. Premium = 24h wymiana = max 1 dzieÅ„ = 50k PLN straty. OszczÄ™dnoÅ›Ä‡: 100-200k PLN/rok. Premium koszt: 4500 PLN/rok. ROI: 22-44x. To jest matematyka, ktÃ³rej CFO nie moÅ¼e odrzuciÄ‡.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = ego nie pÅ‚aci rachunkÃ³w. C = darmowy okres = brak value prop (klient myÅ›li "nie jest tego warte"). D = statystyka bez ROI = nieistotna.</p>',
                    incorrect: '<h4>âŒ Service upsell bez ROI = odrzucenie</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - Kwantyfikacja kosztÃ³w przestoju.</p><p><strong>Problem:</strong> Service wydaje siÄ™ "intangible" (niema nienamacalny). Musisz to uczyniÄ‡ TANGIBLE. Jak? Downtime math. PrzykÅ‚ad: Linia automotive = 50k PLN produkcji/dzieÅ„. NarzÄ™dzie siÄ™ psuje â†’ STOP linii â†’ czekanie 4 dni na wymianÄ™ = 200k PLN strat. To siÄ™ dzieje 2Ã—/rok = 400k PLN rocznych strat. Premium (24h wymiana) = 1 dzieÅ„ max = 50k Ã— 2 = 100k strat. OszczÄ™dnoÅ›Ä‡: 300k PLN/rok. Premium: 4500 PLN. ROI 66x. Kierownik Serwisu pokazuje CFO â†’ natychmiastowa zgoda.</p>'
                }
            },
            {
                id: 5,
                title: 'ðŸŽ“ Training Upsell: Ad-hoc â†’ Certification Program',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> LG Chem WrocÅ‚aw - 60 technikÃ³w obsÅ‚ugi linii</p>
                    <p><strong>Obecny training:</strong> Ad-hoc szkolenia gdy kupujÄ… nowe narzÄ™dzia (2-3h intro, za darmo)</p>
                    <p><strong>TwÃ³j cel:</strong> SprzedaÄ‡ roczny Certification Program (24k PLN): 4 szkolenia Ã— 2 dni, certyfikat, materiaÅ‚y</p>
                    <p><strong>Pain point:</strong> HR Manager: "Technici Åºle uÅ¼ywajÄ… narzÄ™dzi, 40% awarii to bÅ‚Ä™dy operatorskie"</p>`,
                question: 'Jak usprawiedliwiÄ‡ 24k PLN za "szkolenia" gdy dotychczas byÅ‚y za darmo?',
                options: [
                    { letter: 'A', text: 'Powiedz: "Certyfikat to prestiÅ¼, technici bÄ™dÄ… dumni" - apeluj do ambicji' },
                    { letter: 'B', text: 'Zbuduj ROI z redukcji awarii: 40% awarii = bÅ‚Ä™dy ludzkie. 60 narzÄ™dzi Ã— 2 awarie/rok Ã— 1200 PLN koszt naprawy = 144k PLN. Certification redukuje bÅ‚Ä™dy o 60% = oszczÄ™dnoÅ›Ä‡ 86k PLN/rok. Program koszt: 24k. ROI: 3.6x + dÅ‚uÅ¼sza Å¼ywotnoÅ›Ä‡ narzÄ™dzi.' },
                    { letter: 'C', text: 'Zaproponuj: "Pierwsze szkolenie za darmo dla 10 osÃ³b, pozostaÅ‚e 50 pÅ‚atne" - trial model' },
                    { letter: 'D', text: 'Powiedz: "Top firmy w chemii majÄ… certification programs" - peer pressure' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Idealnie! Training = Redukcja KosztÃ³w Awarii</h4><p><strong>Dlaczego B jest najlepsze:</strong> Training upsell = pokazanie ROI z REDUKCJI STRAT (awarie, downtime). PrzykÅ‚ad: 60 narzÄ™dzi Ã— 40% awarii przez bÅ‚Ä™dy = 24 awarie/rok. Koszt naprawy: 1200 PLN Ã— 24 = 28.8k PLN. PLUS downtime: 24 awarie Ã— 2 dni czekania Ã— produkcja 30k PLN/dzieÅ„ = 1.44M PLN strat (!). Certification redukuje bÅ‚Ä™dy o 60% â†’ oszczÄ™dnoÅ›Ä‡ 864k PLN/rok + 17k oszczÄ™dnoÅ›ci napraw = 881k total. Program: 24k. ROI: 36x. To nie jest "szkolenie", to inwestycja w redukcjÄ™ strat.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = prestiÅ¼ nie pÅ‚aci. C = trial obniÅ¼a postrzeganÄ… wartoÅ›Ä‡. D = peer pressure nie dziaÅ‚a bez ROI.</p>',
                    incorrect: '<h4>âŒ Training bez ROI = "nice to have" = odrzucenie</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - ROI z redukcji awarii + downtime.</p><p><strong>Problem:</strong> Szkolenia sÄ… postrzegane jako "soft benefit" (miÄ™kka korzyÅ›Ä‡). CFO pyta: "Po co 24k za szkolenia?" Musisz to uczyniÄ‡ HARD (twarda liczba). Jak? Oblicz koszt bÅ‚Ä™dÃ³w. PrzykÅ‚ad: 40% awarii = user error. 60 narzÄ™dzi Ã— 2 awarie/rok = 120 awarii. Ã— 40% = 48 awarii przez bÅ‚Ä™dy. Naprawa 1200 PLN Ã— 48 = 57.6k. PLUS przestoje: 2 dni Ã— 30k produkcji = 60k Ã— 48 awarii = 2.88M PLN (!). Certification (24k) redukuje bÅ‚Ä™dy o 60% = oszczÄ™dnoÅ›Ä‡ 1.75M. ROI 72x. HR pokazuje CFO â†’ instant approval.</p>'
                }
            },
            {
                id: 6,
                title: 'ðŸ” Subscription Model: Jednorazowo â†’ Recurring Revenue',
                context: `<h4>Sytuacja:</h4>
                    <p><strong>Klient:</strong> Mahle Polska - 100 narzÄ™dzi w JakoÅ›ci</p>
                    <p><strong>Obecny model:</strong> KupujÄ… narzÄ™dzia jednorazowo gdy potrzebujÄ… (25-30 narzÄ™dzi/rok, nieregularne)</p>
                    <p><strong>TwÃ³j cel:</strong> PrzenieÅ›Ä‡ na subscription: 8000 PLN/miesiÄ…c = 100 narzÄ™dzi w rotacji, wymiana co 24 mies, serwis w cenie</p>
                    <p><strong>Pain point:</strong> CFO: "BudÅ¼etowanie narzÄ™dzi to koszmar, kaÅ¼dy kwartal inne wydatki"</p>`,
                question: 'Jak przekonaÄ‡ klienta do OPEX (miesiÄ™czny) zamiast CAPEX (jednorazowy zakup)?',
                options: [
                    { letter: 'A', text: 'Powiedz: "Subscription to trend, wszyscy przechodziÄ… na model usÅ‚ugowy" - ogÃ³lny trend' },
                    { letter: 'B', text: 'Zbuduj 3-year TCO + CFO benefits: CAPEX = 30 narzÄ™dzi/rok Ã— 1800 PLN = 54k/rok nieprzewidywalnie. Subscription = 8k/mies = 96k/rok PREDICTABLE + wymiana automatyczna (koniec awarii z powodu starych narzÄ™dzi) + serwis included. CFO zyska: (1) Predictable budget, (2) OPEX (lepsze dla cash flow niÅ¼ CAPEX), (3) Zero hassle administracji.' },
                    { letter: 'C', text: 'Zaproponuj: "Pierwsze 3 miesiÄ…ce za 50% ceny" - rabat na start' },
                    { letter: 'D', text: 'Powiedz: "Subscription = zawsze nowe narzÄ™dzia, pracownicy bÄ™dÄ… zadowoleni" - benefit dla uÅ¼ytkownikÃ³w' }
                ],
                correct: 'B',
                feedback: {
                    correct: '<h4>âœ… Genialne! MÃ³wisz JÄ™zykiem CFO</h4><p><strong>Dlaczego B to arcydzieÅ‚o:</strong> Subscription pitch = pokazanie FINANCIAL BENEFITS dla CFO (nie tylko wygoda). PrzykÅ‚ad: CAPEX model = 54k/rok VOLATILE (raz 30k, raz 80k - nightmare dla CFO). Subscription = 96k/rok PREDICTABLE (8k kaÅ¼dy miesiÄ…c - raj dla CFO). PLUS: (1) OPEX lepszÄ… dla P&L niÅ¼ CAPEX, (2) Cash flow smoothing, (3) Zero admin (koniec PO, faktur, wymian), (4) Zawsze nowe narzÄ™dzia (koniec awarii starych). CFO sÅ‚yszy: "Predictable + OPEX + zero hassle" â†’ natychmiastowa miÅ‚oÅ›Ä‡.</p><p><strong>Dlaczego NIE A/C/D:</strong> A = trend nie jest argumentem. C = rabat sugeruje brak wartoÅ›ci. D = benefit dla pracownikÃ³w nie przekonuje CFO (tylko koszty).</p>',
                    incorrect: '<h4>âŒ Subscription pitch musi trafiÄ‡ do CFO</h4><p><strong>PrawidÅ‚owa odpowiedÅº: B</strong> - 3-year TCO + CFO financial benefits.</p><p><strong>Problem:</strong> Subscription WYDAJE SIÄ˜ droÅ¼sze (96k/rok vs 54k/rok CAPEX). Musisz pokazaÄ‡ ukryte korzyÅ›ci: (1) PREDICTABILITY = CFO kocha staÅ‚e koszty (budÅ¼etowanie Å‚atwiejsze), (2) OPEX > CAPEX = lepsze dla P&L i cash flow, (3) Zero administracji = HR/Zakupy oszczÄ™dzajÄ… czas, (4) Zawsze nowe narzÄ™dzia = koniec awarii starych = mniej downtime. PrzykÅ‚ad pitch: "CFO, zamiast volatile 30-80k/rok CAPEX (nightmare budÅ¼etowy), masz flat 96k/rok OPEX. Cash flow gÅ‚adki, budÅ¼et przewidywalny, zero PO administracji, narzÄ™dzia zawsze nowe. To siÄ™ nazywa operational excellence." CFO approval.</p>'
                }
            }
        ];

        function initUpsellScenarios() {
            const container = document.getElementById('scenarioContainer');
            
            container.innerHTML = upsellScenarios.map(scenario => `
                <div class="scenario-card" id="scenario_${scenario.id}">
                    <div class="scenario-number">Scenariusz ${scenario.id}/6</div>
                    <div class="scenario-title">${scenario.title}</div>
                    <div class="scenario-context">${scenario.context}</div>
                    <div class="scenario-question">â“ ${scenario.question}</div>
                    <div class="answer-options">
                        ${scenario.options.map(opt => `
                            <div class="answer-option" onclick="selectAnswer(${scenario.id}, '${opt.letter}')" id="answer_${scenario.id}_${opt.letter}">
                                <div class="answer-letter">${opt.letter}</div>
                                <div class="answer-text">${opt.text}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback-box" id="feedback_${scenario.id}"></div>
                </div>
            `).join('');
        }

        function selectAnswer(scenarioId, selectedLetter) {
            // Prevent re-answering
            if (scenarioAnswers[scenarioId]) return;

            const scenario = upsellScenarios.find(s => s.id === scenarioId);
            const isCorrect = selectedLetter === scenario.correct;
            
            scenarioAnswers[scenarioId] = {
                selected: selectedLetter,
                correct: scenario.correct,
                isCorrect: isCorrect
            };

            // Mark card as answered
            const card = document.getElementById(`scenario_${scenarioId}`);
            card.classList.add('answered');
            if (!isCorrect) card.classList.add('incorrect');

            // Highlight selected answer
            const selectedOption = document.getElementById(`answer_${scenarioId}_${selectedLetter}`);
            selectedOption.classList.add('selected');
            
            // Show correct answer
            const correctOption = document.getElementById(`answer_${scenarioId}_${scenario.correct}`);
            correctOption.classList.add('correct');

            // If incorrect, mark it
            if (!isCorrect) {
                selectedOption.classList.add('incorrect');
            }

            // Show feedback
            const feedbackBox = document.getElementById(`feedback_${scenarioId}`);
            feedbackBox.innerHTML = isCorrect ? scenario.feedback.correct : scenario.feedback.incorrect;
            feedbackBox.classList.add('show', isCorrect ? 'correct' : 'incorrect');

            // Update progress
            updateScenariosProgress();
            saveCard5Data();
        }

        function updateScenariosProgress() {
            const answeredCount = Object.keys(scenarioAnswers).length;
            document.getElementById('scenariosAnswered').textContent = `${answeredCount}/6`;

            if (answeredCount === 6) {
                showScoreDashboard();
                document.getElementById('saveUpsellBtn').disabled = false;
            }
        }

        function showScoreDashboard() {
            const correctCount = Object.values(scenarioAnswers).filter(a => a.isCorrect).length;
            
            document.getElementById('finalScore').textContent = `${correctCount}/6`;
            
            let interpretation = '';
            let className = '';

            if (correctCount >= 5) {
                className = 'master';
                interpretation = `
                    <h4>ðŸ† Master Upsellera!</h4>
                    <ul>
                        <li>Rozumiesz Å¼e upsell to nie "sprzedawanie wiÄ™cej", ale <strong>rozwiÄ…zywanie wiÄ™kszych problemÃ³w</strong></li>
                        <li>KaÅ¼dy upsell ma <strong>kwantyfikowalny ROI</strong> - mÃ³wisz liczby, nie sÅ‚owa</li>
                        <li>Rozumiesz <strong>TCO, downtime math, pilot-driven proof</strong> - narzÄ™dzia top 1%</li>
                        <li>Nigdy nie wojujesz cenÄ… - budujesz <strong>value case dla CFO</strong></li>
                        <li>JesteÅ› gotowy escale konta 100k â†’ 500k przez strategiczny upselling</li>
                    </ul>
                `;
            } else if (correctCount >= 3) {
                className = 'solid';
                interpretation = `
                    <h4>ðŸ’ª Solidne Podstawy, Ale...</h4>
                    <ul>
                        <li>Rozumiesz Å¼e upsell potrzebuje uzasadnienia, ale <strong>czÄ™sto brakuje kwantyfikacji</strong></li>
                        <li>NiektÃ³re odpowiedzi oparte na "ogÃ³lnikach" zamiast <strong>konkretnych liczb ROI</strong></li>
                        <li>Przejrzyj scenariusze z odpowiedziami B - zobaczysz wzÃ³r: <strong>ROI, TCO, downtime math</strong></li>
                        <li>Naucz siÄ™ <strong>kwantyfikowaÄ‡ kaÅ¼dy problem</strong> (produktywnoÅ›Ä‡, awarie, przestoje)</li>
                        <li>Praktykuj: <strong>"Policzymy straty"</strong> zamiast "To jest lepsze"</li>
                    </ul>
                `;
            } else {
                className = 'review';
                interpretation = `
                    <h4>âš ï¸ Potrzebujesz PrzeglÄ…du Strategii</h4>
                    <ul>
                        <li><strong>Upsell â‰  wiÄ™ksza sprzedaÅ¼</strong>. Upsell = rozwiÄ…zanie wiÄ™kszego problemu za wiÄ™cej pieniÄ™dzy</li>
                        <li><strong>CFO nie kupuje "lepszego"</strong>. Kupuje ROI, TCO, predictability, risk reduction</li>
                        <li>KaÅ¼dy upsell potrzebuje <strong>3 liczb: (1) Koszt problemu, (2) Koszt rozwiÄ…zania, (3) ROI</strong></li>
                        <li>Przeczytaj WSZYSTKIE feedbacki powyÅ¼ej - sÄ… peÅ‚ne przykÅ‚adÃ³w ROI math</li>
                        <li>Praktykuj przed lustrem: <strong>"Pana problem kosztuje X PLN/rok. Nasze rozwiÄ…zanie Y PLN. ROI ZÃ—."</strong></li>
                    </ul>
                `;
            }

            const interpretationDiv = document.getElementById('scoreInterpretation');
            interpretationDiv.innerHTML = interpretation;
            interpretationDiv.className = `score-interpretation ${className}`;

            document.getElementById('scoringDashboard').style.display = 'block';
            
            // Scroll to dashboard
            setTimeout(() => {
                document.getElementById('scoringDashboard').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 300);
        }

        function saveUpsellScenarios() {
            if (!completedCards.has(5)) {
                completedCards.add(5);
                earnedXP += cardXPValues[5];
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('upsellSuccess');
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }

            saveCard5Data();
        }

        function saveCard5Data() {
            localStorage.setItem('lesson4_card5', JSON.stringify(scenarioAnswers));
        }

        function loadCard5Data() {
            const saved = localStorage.getItem('lesson4_card5');
            if (saved) {
                scenarioAnswers = JSON.parse(saved);
                
                // Restore answered state
                Object.keys(scenarioAnswers).forEach(scenarioId => {
                    const answer = scenarioAnswers[scenarioId];
                    const scenario = upsellScenarios.find(s => s.id === parseInt(scenarioId));
                    
                    if (scenario) {
                        const card = document.getElementById(`scenario_${scenarioId}`);
                        card.classList.add('answered');
                        if (!answer.isCorrect) card.classList.add('incorrect');

                        const selectedOption = document.getElementById(`answer_${scenarioId}_${answer.selected}`);
                        selectedOption.classList.add('selected');
                        
                        const correctOption = document.getElementById(`answer_${scenarioId}_${answer.correct}`);
                        correctOption.classList.add('correct');

                        if (!answer.isCorrect) {
                            selectedOption.classList.add('incorrect');
                        }

                        const feedbackBox = document.getElementById(`feedback_${scenarioId}`);
                        feedbackBox.innerHTML = answer.isCorrect ? scenario.feedback.correct : scenario.feedback.incorrect;
                        feedbackBox.classList.add('show', answer.isCorrect ? 'correct' : 'incorrect');
                    }
                });

                updateScenariosProgress();
            }
        }

        // ===== Card 4: Cross-Sell Calculator Functions =====
        let fitMatrixData = {};

        const crossSellProducts = [
            { id: 'cs_m12_m18', name: 'ðŸ”§ NarzÄ™dzia akumulatorowe M12/M18', category: 'Core Tools' },
            { id: 'cs_stationary', name: 'ðŸ­ NarzÄ™dzia stacjonarne', category: 'Stationary' },
            { id: 'cs_onekey', name: 'ðŸ“± System ONE-KEY (zarzÄ…dzanie narzÄ™dziami)', category: 'Digital' },
            { id: 'cs_packout', name: 'ðŸ“¦ System PACKOUT (transport i organizacja)', category: 'Storage' },
            { id: 'cs_batteries', name: 'ðŸ”‹ Baterie i Å‚adowarki', category: 'Accessories' },
            { id: 'cs_lighting', name: 'ðŸ’¡ OÅ›wietlenie LED', category: 'Lighting' },
            { id: 'cs_measurement', name: 'ðŸ“ NarzÄ™dzia pomiarowe i detekcja', category: 'Measurement' },
            { id: 'cs_ppe', name: 'ðŸ§¥ OdzieÅ¼ grzewcza i PPE', category: 'Safety' },
            { id: 'cs_vacuums', name: 'ðŸŒªï¸ Odkurzacze przemysÅ‚owe', category: 'Cleaning' },
            { id: 'cs_pneumatic', name: 'âš™ï¸ NarzÄ™dzia pneumatyczne', category: 'Pneumatic' },
            { id: 'cs_training', name: 'ðŸŽ“ Programy szkoleniowe i certyfikacja', category: 'Services' },
            { id: 'cs_service', name: 'ðŸ› ï¸ Pakiety serwisowe premium', category: 'Services' }
        ];

        function initFitMatrix() {
            const grid = document.getElementById('fitMatrixGrid');
            
            grid.innerHTML = crossSellProducts.map(product => `
                <div class="fit-product-card" id="card_${product.id}">
                    <div class="fit-product-title">
                        ${product.name}
                    </div>
                    
                    <div class="fit-field">
                        <label>Obecne uÅ¼ycie:</label>
                        <select id="${product.id}_usage" onchange="updateFitMatrix()">
                            <option value="no">Nie uÅ¼ywa</option>
                            <option value="yes">UÅ¼ywa obecnie</option>
                        </select>
                    </div>

                    <div class="fit-field">
                        <label>Ocena dopasowania (0-10):</label>
                        <div class="fit-score-label">0 = Brak dopasowania | 10 = Idealne dopasowanie</div>
                        <input type="range" class="fit-score-slider" id="${product.id}_fit" min="0" max="10" value="0" oninput="updateFitScore('${product.id}')">
                        <div class="fit-score-display" id="${product.id}_fitDisplay">0/10</div>
                    </div>

                    <div class="fit-field">
                        <label>Decision maker:</label>
                        <input type="text" id="${product.id}_decision" placeholder="np. Jan Kowalski - Dyrektor Produkcji" onchange="updateFitMatrix()">
                    </div>

                    <div class="fit-field">
                        <label>Szacunkowa wartoÅ›Ä‡ roczna (PLN):</label>
                        <input type="number" id="${product.id}_value" min="0" value="0" placeholder="0" onchange="updateFitMatrix()">
                    </div>
                </div>
            `).join('');
        }

        function updateFitScore(productId) {
            const slider = document.getElementById(`${productId}_fit`);
            const display = document.getElementById(`${productId}_fitDisplay`);
            display.textContent = `${slider.value}/10`;
            updateFitMatrix();
        }

        function updateFitMatrix() {
            let totalCurrent = 0;
            let totalPotential = 0;
            let evaluatedCount = 0;

            crossSellProducts.forEach(product => {
                const usage = document.getElementById(`${product.id}_usage`).value;
                const fit = parseInt(document.getElementById(`${product.id}_fit`).value) || 0;
                const decision = document.getElementById(`${product.id}_decision`).value.trim();
                const value = parseFloat(document.getElementById(`${product.id}_value`).value) || 0;

                const isEvaluated = fit > 0 && value > 0;
                
                if (isEvaluated) {
                    evaluatedCount++;
                    const card = document.getElementById(`card_${product.id}`);
                    card.classList.add('evaluated');
                } else {
                    const card = document.getElementById(`card_${product.id}`);
                    card.classList.remove('evaluated');
                }

                if (usage === 'yes') {
                    totalCurrent += value;
                }
                totalPotential += value;

                fitMatrixData[product.id] = {
                    name: product.name,
                    category: product.category,
                    usage,
                    fit,
                    decision,
                    value,
                    gap: usage === 'yes' ? 0 : value,
                    isEvaluated
                };
            });

            const totalGap = totalPotential - totalCurrent;
            const penetration = totalPotential > 0 ? ((totalCurrent / totalPotential) * 100).toFixed(1) : 0;

            document.getElementById('totalCurrentRevenue').textContent = `${totalCurrent.toLocaleString('pl-PL')} PLN`;
            document.getElementById('totalPotentialRevenue').textContent = `${totalPotential.toLocaleString('pl-PL')} PLN`;
            document.getElementById('totalRevenueGap').textContent = `${totalGap.toLocaleString('pl-PL')} PLN`;
            document.getElementById('portfolioPenetration').textContent = `${penetration}%`;
            document.getElementById('evaluatedCount').textContent = `${evaluatedCount}/12`;

            updateOpportunityRanking();
            validateCard4();
            saveCard4Data();
        }

        function updateOpportunityRanking() {
            // Filter products: not currently used, fit >= 6, value > 0
            const opportunities = Object.entries(fitMatrixData)
                .filter(([id, data]) => data.usage === 'no' && data.fit >= 6 && data.value > 0)
                .map(([id, data]) => ({ id, ...data }))
                .sort((a, b) => {
                    // Sort by: (fit score Ã— value)
                    const scoreA = a.fit * a.value;
                    const scoreB = b.fit * b.value;
                    return scoreB - scoreA;
                })
                .slice(0, 3);

            const listContainer = document.getElementById('opportunityList');
            const actionPlanBox = document.getElementById('actionPlanBox');
            const actionPlanList = document.getElementById('actionPlanList');

            if (opportunities.length === 0) {
                listContainer.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">OceÅ„ produkty z fit â‰¥6 i wartoÅ›ciÄ… >0 PLN, aby zobaczyÄ‡ ranking...</p>';
                actionPlanBox.style.display = 'none';
                return;
            }

            listContainer.innerHTML = opportunities.map((opp, index) => `
                <div class="opportunity-item">
                    <div class="opportunity-rank">#${index + 1}</div>
                    <div class="opportunity-details">
                        <h4>${opp.name}</h4>
                        <p><strong>Dopasowanie:</strong> ${opp.fit}/10 | <strong>Decision maker:</strong> ${opp.decision || 'Nie podano'}</p>
                        <p><strong>Kategoria:</strong> ${opp.category}</p>
                    </div>
                    <div class="opportunity-value">
                        <div class="opportunity-gap">${opp.value.toLocaleString('pl-PL')} PLN</div>
                        <div class="opportunity-fit">PotencjaÅ‚ roczny</div>
                    </div>
                </div>
            `).join('');

            // Generate action plan
            const actionItems = opportunities.map((opp, index) => {
                const actions = [
                    `<strong>#${index + 1}: ${opp.name.replace(/ðŸ”§|ðŸ­|ðŸ“±|ðŸ“¦|ðŸ”‹|ðŸ’¡|ðŸ“|ðŸ§¥|ðŸŒªï¸|âš™ï¸|ðŸŽ“|ðŸ› ï¸/g, '').trim()}</strong> - Skontaktuj siÄ™ z ${opp.decision || 'decision makerem'} w ciÄ…gu 7 dni`,
                    `Przygotuj demo/pilot pokazujÄ…cy ROI (wartoÅ›Ä‡: ${opp.value.toLocaleString('pl-PL')} PLN)`,
                    `Wykorzystaj obecne relacje (fit ${opp.fit}/10) do budowania business case`
                ];
                return actions.map(a => `<li>${a}</li>`).join('');
            }).join('');

            actionPlanList.innerHTML = actionItems;
            actionPlanBox.style.display = 'block';
        }

        function validateCard4() {
            const evaluatedCount = Object.values(fitMatrixData).filter(d => d.isEvaluated).length;
            const isValid = evaluatedCount >= 8;
            document.getElementById('saveCrossSellBtn').disabled = !isValid;
        }

        function saveCrossSell() {
            if (!completedCards.has(4)) {
                completedCards.add(4);
                earnedXP += cardXPValues[4];
                updateProgress();
                saveProgress();

                const successMsg = document.getElementById('crossSellSuccess');
                successMsg.classList.add('show');
                setTimeout(() => successMsg.classList.remove('show'), 3000);
            }

            saveCard4Data();
        }

        function saveCard4Data() {
            localStorage.setItem('lesson4_card4', JSON.stringify(fitMatrixData));
        }

        function loadCard4Data() {
            const saved = localStorage.getItem('lesson4_card4');
            if (saved) {
                fitMatrixData = JSON.parse(saved);

                crossSellProducts.forEach(product => {
                    const data = fitMatrixData[product.id];
                    if (data) {
                        const usageEl = document.getElementById(`${product.id}_usage`);
                        const fitEl = document.getElementById(`${product.id}_fit`);
                        const decisionEl = document.getElementById(`${product.id}_decision`);
                        const valueEl = document.getElementById(`${product.id}_value`);

                        if (usageEl) usageEl.value = data.usage || 'no';
                        if (fitEl) {
                            fitEl.value = data.fit || 0;
                            updateFitScore(product.id);
                        }
                        if (decisionEl) decisionEl.value = data.decision || '';
                        if (valueEl) valueEl.value = data.value || 0;
                    }
                });

                updateFitMatrix();
            }
        }
    </script>
</body>
</html>
