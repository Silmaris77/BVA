<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opcja B: 3 Pod-taby (UporzÄ…dkowane)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            color: #1e293b;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            color: #64748b;
            margin-bottom: 30px;
            font-size: 16px;
        }
        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .pros, .cons {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .pros h3 {
            color: #10b981;
            margin-bottom: 10px;
        }
        .cons h3 {
            color: #f59e0b;
            margin-bottom: 10px;
        }
        .pros ul, .cons ul {
            list-style: none;
            padding-left: 0;
        }
        .pros li::before {
            content: "âœ… ";
        }
        .cons li::before {
            content: "âš ï¸ ";
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }
        .tab {
            padding: 15px 30px;
            background: #e2e8f0;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #64748b;
            transition: all 0.3s;
        }
        .tab.active {
            background: white;
            color: #6366f1;
            border-bottom: 3px solid #6366f1;
        }
        .tab:hover {
            background: #cbd5e1;
        }
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 0 12px 12px 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        .tab-content.active {
            display: block;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h3 {
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        .client-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .client-card:hover {
            border-color: #6366f1;
            box-shadow: 0 2px 4px rgba(99, 102, 241, 0.1);
        }
        .product-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }
        .button-primary {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .button-primary:hover {
            background: #4f46e5;
            transform: translateY(-2px);
        }
        .button-secondary {
            background: white;
            color: #6366f1;
            border: 2px solid #6366f1;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
        }
        .chat-box {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
            margin-bottom: 20px;
        }
        .message {
            background: white;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 10px;
            max-width: 80%;
        }
        .message.player {
            background: #dbeafe;
            margin-left: auto;
        }
        .sidebar-widget {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f59e0b;
            margin-bottom: 15px;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }
        .tag.premium { background: #ddd6fe; color: #7c3aed; }
        .tag.value { background: #d1fae5; color: #10b981; }
        .tag.mixed { background: #fed7aa; color: #f59e0b; }
        .info-box {
            background: #e0e7ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #6366f1;
            margin-bottom: 20px;
        }
        .route-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #10b981;
            margin-bottom: 15px;
        }
        .tool-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .client-pin {
            transition: transform 0.2s;
        }
        .client-pin:hover {
            transform: scale(1.2);
        }
        .client-pin:hover .pin-info {
            display: block !important;
        }
        .pin-icon {
            color: #3b82f6;
            transition: color 0.3s;
        }
        #notes-panel {
            transition: transform 0.2s;
        }
        #visit-notes-content {
            transition: max-height 0.3s, opacity 0.3s;
            overflow: hidden;
        }
        #visit-notes-content.collapsed {
            max-height: 0;
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ Opcja B: 3 Pod-taby (UporzÄ…dkowane)</h1>
        <p class="subtitle">Balans miÄ™dzy organizacjÄ… a dostÄ™pnoÅ›ciÄ…</p>

        <div class="pros-cons">
            <div class="pros">
                <h3>Zalety</h3>
                <ul>
                    <li>Routing oddzielnie od produktÃ³w (mniej gÄ™ste)</li>
                    <li>"Przygotowanie" jako resource hub (produkty + narzÄ™dzia TM)</li>
                    <li>Wizyta czystsza, z sidebar quick access</li>
                    <li>Åatwa nawigacja - kaÅ¼da sekcja ma swoje miejsce</li>
                    <li>Skalowalna struktura (Å‚atwo dodaÄ‡ nowe sekcje)</li>
                </ul>
            </div>
            <div class="cons">
                <h3>Wady</h3>
                <ul>
                    <li>3 taby = wiÄ™cej klikniÄ™Ä‡ niÅ¼ w Opcji A</li>
                    <li>Trzeba przeÅ‚Ä…czaÄ‡ siÄ™ miÄ™dzy tabami aby zobaczyÄ‡ produkty podczas wizyty</li>
                </ul>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(event, 'clients')">ğŸ—ºï¸ Klienci & Trasa</button>
            <button class="tab" onclick="switchTab(event, 'resources')">ğŸ’¼ Przygotowanie</button>
            <button class="tab" onclick="switchTab(event, 'visit')">ğŸ’¬ Wizyta</button>
        </div>

        <div id="clients" class="tab-content active">
            <div class="section">
                <h3>ğŸ—ºï¸ Mapa KlientÃ³w - Kliknij aby zaplanowaÄ‡ trasÄ™</h3>
                
                <!-- Filtry -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e2e8f0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <strong style="display: block; margin-bottom: 8px; color: #1e293b;">Filtruj po statusie:</strong>
                            <label style="margin-right: 15px; cursor: pointer;">
                                <input type="checkbox" checked onchange="filterMap()"> 
                                <span class="tag premium" style="vertical-align: middle;">Premium</span>
                            </label>
                            <label style="margin-right: 15px; cursor: pointer;">
                                <input type="checkbox" checked onchange="filterMap()"> 
                                <span class="tag value" style="vertical-align: middle;">Value</span>
                            </label>
                            <label style="cursor: pointer;">
                                <input type="checkbox" checked onchange="filterMap()"> 
                                <span class="tag mixed" style="vertical-align: middle;">Mixed</span>
                            </label>
                        </div>
                        <div>
                            <strong style="display: block; margin-bottom: 8px; color: #1e293b;">Legenda - ostatnia wizyta:</strong>
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <span style="font-size: 12px;">ğŸŸ¢ 0-3 dni</span>
                                <span style="font-size: 12px;">ğŸŸ¡ 4-7 dni</span>
                                <span style="font-size: 12px;">ğŸŸ  8-14 dni</span>
                                <span style="font-size: 12px;">ğŸ”´ 15+ dni</span>
                                <span style="font-size: 12px;">âšª Brak wizyt</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #e0e7ff; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <p style="color: #4338ca; font-weight: 600; margin-bottom: 10px;">ğŸ“ Interaktywna mapa - Kliknij na pin aby dodaÄ‡/usunÄ…Ä‡ z trasy</p>
                    <div id="map-container" style="background: #cbd5e1; height: 400px; border-radius: 8px; position: relative; overflow: hidden;">
                        <!-- Symulacja mapy z klikalnymi pinami -->
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; height: 90%;">
                            <!-- Base location -->
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                <span style="font-size: 32px; cursor: default;">ğŸ¢</span>
                                <div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); background: #1e293b; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap;">BAZA</div>
                            </div>
                            
                            <!-- Client pins with color-coded visit recency -->
                            <div class="client-pin" data-client="grill" data-status="premium" data-days="2" style="position: absolute; top: 30%; left: 40%;" onclick="toggleClient(this, 'Grill House', 5.2)">
                                <span class="pin-icon" style="font-size: 28px; cursor: pointer; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));">ï¿½</span>
                                <div class="pin-label" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap; border: 1px solid #e2e8f0; font-weight: 600;">ğŸ” Grill House</div>
                                <div class="pin-info" style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 3px 6px; border-radius: 3px; font-size: 10px; white-space: nowrap; display: none;">2 dni temu</div>
                            </div>
                            
                            <div class="client-pin" data-client="kebab" data-status="value" data-days="6" style="position: absolute; top: 45%; left: 65%;" onclick="toggleClient(this, 'Kebab King', 8.1)">
                                <span class="pin-icon" style="font-size: 28px; cursor: pointer; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));">ï¿½</span>
                                <div class="pin-label" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap; border: 1px solid #e2e8f0; font-weight: 600;">ğŸ¥™ Kebab King</div>
                                <div class="pin-info" style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 3px 6px; border-radius: 3px; font-size: 10px; white-space: nowrap; display: none;">6 dni temu</div>
                            </div>
                            
                            <div class="client-pin" data-client="pizza" data-status="mixed" data-days="12" style="position: absolute; top: 70%; left: 30%;" onclick="toggleClient(this, 'Pizza House', 12.3)">
                                <span class="pin-icon" style="font-size: 28px; cursor: pointer; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));">ï¿½</span>
                                <div class="pin-label" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap; border: 1px solid #e2e8f0; font-weight: 600;">ğŸ• Pizza House</div>
                                <div class="pin-info" style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 3px 6px; border-radius: 3px; font-size: 10px; white-space: nowrap; display: none;">12 dni temu</div>
                            </div>
                            
                            <div class="client-pin" data-client="taco" data-status="value" data-days="18" style="position: absolute; top: 25%; left: 70%;" onclick="toggleClient(this, 'Taco Loco', 9.5)">
                                <span class="pin-icon" style="font-size: 28px; cursor: pointer; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));">ï¿½</span>
                                <div class="pin-label" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap; border: 1px solid #e2e8f0; font-weight: 600;">ğŸŒ® Taco Loco</div>
                                <div class="pin-info" style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 3px 6px; border-radius: 3px; font-size: 10px; white-space: nowrap; display: none;">18 dni temu!</div>
                            </div>
                            
                            <div class="client-pin" data-client="sushi" data-status="premium" data-days="0" style="position: absolute; top: 60%; left: 75%;" onclick="toggleClient(this, 'Sushi Bar', 7.8)">
                                <span class="pin-icon" style="font-size: 28px; cursor: pointer; filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));">âšª</span>
                                <div class="pin-label" style="position: absolute; top: -30px; left: 50%; transform: translateX(-50%); background: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; white-space: nowrap; border: 1px solid #e2e8f0; font-weight: 600;">ğŸ£ Sushi Bar</div>
                                <div class="pin-info" style="position: absolute; top: 30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 3px 6px; border-radius: 3px; font-size: 10px; white-space: nowrap; display: none;">Nowy klient</div>
                            </div>
                            
                            <!-- SVG for route lines -->
                            <svg id="route-lines" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                                <!-- Lines will be drawn here by JavaScript -->
                            </svg>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 2px solid #8b5cf6;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div>
                                <strong style="color: #8b5cf6;">ï¿½ Planowana trasa:</strong>
                                <span id="route-count" style="margin-left: 10px; color: #64748b;">0 klientÃ³w</span>
                            </div>
                            <button class="button-secondary" onclick="clearRoute()" style="padding: 6px 12px; font-size: 12px;">WyczyÅ›Ä‡ trasÄ™</button>
                        </div>
                        <div id="route-list" style="color: #64748b; font-size: 14px; min-height: 20px;">
                            <em>Kliknij na pinach aby zaplanowaÄ‡ trasÄ™...</em>
                        </div>
                        <div id="route-stats" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e2e8f0; display: none;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                                <div>
                                    <div style="color: #64748b; font-size: 12px;">Dystans</div>
                                    <div style="font-size: 20px; font-weight: 700; color: #6366f1;"><span id="total-distance">0</span> km</div>
                                </div>
                                <div>
                                    <div style="color: #64748b; font-size: 12px;">Czas</div>
                                    <div style="font-size: 20px; font-weight: 700; color: #6366f1;"><span id="total-time">0</span>h</div>
                                </div>
                                <div>
                                    <div style="color: #64748b; font-size: 12px;">Energia</div>
                                    <div style="font-size: 20px; font-weight: 700; color: #f59e0b;">-<span id="total-energy">0</span>%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ’¡ Tip:</strong> Kliknij na pinach aby dodaÄ‡ klientÃ³w do trasy. KolejnoÅ›Ä‡ klikniÄ™cia = kolejnoÅ›Ä‡ wizyt. NajedÅº na pin aby zobaczyÄ‡ kiedy byÅ‚a ostatnia wizyta.<br>
                    <strong>ğŸ“Š Baza:</strong> 8 Premium | 12 Value | 5 Mixed | <strong>ğŸš¨ Priorytet:</strong> ğŸ”´ Taco Loco (18 dni!), ğŸŸ  Pizza House (12 dni)
                </div>
            </div>

            <div class="section">
                <h3>ğŸ“‹ Lista KlientÃ³w</h3>
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                    <div>
                        <h4 style="margin-bottom: 10px; color: #1e293b;">Klienci (25)</h4>
                        <div class="client-card">
                            <div>
                                <strong>ğŸ” Grill House</strong>
                                <span class="tag premium">Premium</span>
                                <br>
                                <small style="color: #64748b;">5.2 km | 83 kg/mies | Kotlin | Rep: 65/100</small>
                            </div>
                            <button class="button-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="openNotes('grill')">ğŸ“ Notatki</button>
                        </div>
                        <div class="client-card">
                            <div>
                                <strong>ğŸ¥™ Kebab King</strong>
                                <span class="tag value">Value</span>
                                <br>
                                <small style="color: #64748b;">8.1 km | 115 kg/mies | Kotlin | Rep: 42/100</small>
                            </div>
                            <button class="button-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="openNotes('kebab')">ğŸ“ Notatki</button>
                        </div>
                        <div class="client-card">
                            <div>
                                <strong>ğŸ• Pizza House</strong>
                                <span class="tag mixed">Mixed</span>
                                <br>
                                <small style="color: #64748b;">12.3 km | 44 kg/mies | Makro | Rep: 28/100</small>
                            </div>
                            <button class="button-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="openNotes('pizza')">ğŸ“ Notatki</button>
                        </div>
                        <div class="client-card">
                            <div>
                                <strong>ğŸŒ® Taco Loco</strong>
                                <span class="tag value">Value</span>
                                <br>
                                <small style="color: #64748b;">9.5 km | 67 kg/mies | Makro | Rep: 55/100</small>
                            </div>
                            <button class="button-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="openNotes('taco')">ğŸ“ Notatki</button>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="margin-bottom: 10px; color: #1e293b;">ğŸ“ Panel Notatek</h4>
                        <div id="notes-panel" style="background: #fffbeb; padding: 15px; border-radius: 8px; border: 2px solid #fbbf24; min-height: 400px;">
                            <div id="notes-header" style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #fcd34d;">
                                <strong style="color: #92400e;">Notatki ogÃ³lne</strong>
                                <div style="font-size: 11px; color: #78716c; margin-top: 4px;">Zapisane: <span id="notes-timestamp">-</span></div>
                            </div>
                            <textarea id="notes-content" style="width: 100%; min-height: 300px; padding: 10px; border: 1px solid #fcd34d; border-radius: 6px; font-family: inherit; font-size: 13px; resize: vertical; background: white;" placeholder="Twoje notatki...&#10;&#10;ğŸ’¡ PrzykÅ‚ady:&#10;- Grill House: WÅ‚aÅ›ciciel lubi Heinz, ale czeka na lepszÄ… ofertÄ™&#10;- Kebab King: Bardzo price-sensitive, prÃ³bowaÄ‡ promocji 4+1&#10;- Pizza House: Nowy wÅ‚aÅ›ciciel, otwarty na zmianÄ™ dostawcy"></textarea>
                            <div style="margin-top: 10px; display: flex; gap: 10px;">
                                <button class="button-primary" style="flex: 1; padding: 8px;" onclick="saveNotes()">ğŸ’¾ Zapisz</button>
                                <button class="button-secondary" style="padding: 8px 12px; font-size: 12px;" onclick="clearNotes()">ğŸ—‘ï¸</button>
                            </div>
                            
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #fcd34d;">
                                <strong style="color: #92400e; font-size: 12px;">ğŸ“Œ Szybkie notatki:</strong>
                                <div id="quick-notes" style="margin-top: 8px; font-size: 12px;">
                                    <div style="background: white; padding: 8px; border-radius: 4px; margin-bottom: 6px; border-left: 3px solid #10b981;">
                                        <strong>ğŸ” Grill House:</strong> <em style="color: #64748b;">Bez notatek</em>
                                    </div>
                                    <div style="background: white; padding: 8px; border-radius: 4px; margin-bottom: 6px; border-left: 3px solid #6366f1;">
                                        <strong>ğŸ¥™ Kebab King:</strong> <em style="color: #64748b;">Bez notatek</em>
                                    </div>
                                    <div style="background: white; padding: 8px; border-radius: 4px; margin-bottom: 6px; border-left: 3px solid #f59e0b;">
                                        <strong>ğŸ• Pizza House:</strong> <em style="color: #64748b;">Bez notatek</em>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>ğŸš— Planowanie Trasy</h3>
                <p style="margin-bottom: 15px; color: #64748b;"><strong>Wybrani klienci (2):</strong></p>
                
                <div class="route-card">
                    <h4 style="margin-bottom: 10px;">ğŸ¤– Sugestia ALEX Praktykant</h4>
                    <ol style="margin-left: 20px; margin-bottom: 15px;">
                        <li>Baza â†’ ğŸ” Grill House (5.2 km)</li>
                        <li>ğŸ” Grill House â†’ ğŸ¥™ Kebab King (6.8 km)</li>
                        <li>ğŸ¥™ Kebab King â†’ Baza (6.5 km)</li>
                    </ol>
                    <div style="background: #f0fdf4; padding: 12px; border-radius: 6px; margin-bottom: 10px;">
                        <strong>ğŸ“Š Statystyki:</strong><br>
                        ğŸ“ Dystans: 18.5 km | â±ï¸ Czas: ~3h | âš¡ Energia: -45%<br>
                        ğŸ’¡ OszczÄ™dnoÅ›Ä‡ vs Twoja kolejnoÅ›Ä‡: -2.3 km, -15 min
                    </div>
                    <p style="font-size: 13px; color: #64748b; font-style: italic;">
                        ğŸ’­ Dlaczego? Grill House jest po drodze do Kebab King. MinimalizujÄ™ backtracking.
                    </p>
                </div>

                <div class="grid-2">
                    <button class="button-primary">ğŸš€ UÅ¼yj sugestii ALEX</button>
                    <button class="button-secondary">ğŸ“ Moja kolejnoÅ›Ä‡</button>
                </div>
            </div>
        </div>

        <div id="resources" class="tab-content">
            <div class="section">
                <h3>ğŸ“¦ Portfolio ProduktÃ³w</h3>
                <div style="margin-bottom: 20px;">
                    <label style="margin-right: 20px;">
                        <input type="radio" name="brand" checked> Wszystkie
                    </label>
                    <label style="margin-right: 20px;">
                        <input type="radio" name="brand"> FreshLife
                    </label>
                    <label>
                        <input type="radio" name="brand"> Konkurencja
                    </label>
                </div>

                <div class="product-card">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div>
                            <strong style="font-size: 18px;">Heinz Ketchup Åagodny</strong>
                            <span class="tag premium">Premium</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="color: #10b981; font-size: 24px; font-weight: 700;">28.50 PLN</span>
                        </div>
                    </div>
                    <p style="color: #64748b; margin-bottom: 10px;">875ml Food Service | MarÅ¼a: 8.50 PLN (30%)</p>
                    <div style="background: white; padding: 12px; border-radius: 6px; border-left: 3px solid #6366f1; margin-bottom: 10px;">
                        <strong>ğŸ’¬ Sales Story:</strong> "Marka #1 na Å›wiecie, zero konserwantÃ³w, idealna dla burger joints premium. GoÅ›cie oczekujÄ… Heinza!"
                    </div>
                    <button class="button-secondary">Zobacz peÅ‚ne szczegÃ³Å‚y</button>
                </div>

                <div class="product-card">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div>
                            <strong style="font-size: 18px;">Pudliszki Ketchup Åagodny</strong>
                            <span class="tag value">Value</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="color: #10b981; font-size: 24px; font-weight: 700;">18.50 PLN</span>
                        </div>
                    </div>
                    <p style="color: #64748b; margin-bottom: 10px;">980g Food Service | MarÅ¼a: 4.50 PLN (24%)</p>
                    <div style="background: white; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; margin-bottom: 10px;">
                        <strong>ğŸ’¬ Sales Story:</strong> "Polski lider, Å›wietna cena przy zachowaniu jakoÅ›ci. Idealna dla value segment!"
                    </div>
                    <button class="button-secondary">Zobacz peÅ‚ne szczegÃ³Å‚y</button>
                </div>
            </div>

            <div class="section">
                <h3>ğŸ NarzÄ™dzia Trade-Marketing</h3>
                <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #10b981;">
                    <strong>ğŸ’° BudÅ¼et TM:</strong> 3,800 / 5,000 PLN 
                    <div style="background: #dcfce7; height: 20px; border-radius: 10px; margin-top: 8px; overflow: hidden;">
                        <div style="background: #10b981; height: 100%; width: 76%;"></div>
                    </div>
                    <small style="color: #64748b;">76% pozostaÅ‚o (wydane: 1,200 PLN)</small>
                </div>

                <h4 style="margin-bottom: 15px; color: #1e293b;">ğŸ¯ Rekomendowane dla Twojej trasy:</h4>
                
                <div class="tool-card">
                    <div>
                        <strong>ğŸ¨ Heinz Dispenser</strong><br>
                        <small style="color: #64748b;">Idealny dla: Premium clients | Wzrost sprzedaÅ¼y: +15%</small>
                    </div>
                    <div style="text-align: right;">
                        <span style="color: #f59e0b; font-weight: 700;">15 PLN</span><br>
                        <button class="button-secondary" style="padding: 6px 12px; font-size: 12px; margin-top: 4px;">Dodaj</button>
                    </div>
                </div>

                <div class="tool-card">
                    <div>
                        <strong>ğŸ¯ Promocja 4+1</strong><br>
                        <small style="color: #64748b;">Idealny dla: Value clients | Conversion: +40%</small>
                    </div>
                    <div style="text-align: right;">
                        <span style="color: #f59e0b; font-weight: 700;">100 PLN</span><br>
                        <button class="button-secondary" style="padding: 6px 12px; font-size: 12px; margin-top: 4px;">Dodaj</button>
                    </div>
                </div>

                <div class="tool-card">
                    <div>
                        <strong>ğŸ“„ POS MateriaÅ‚y (plakat A3)</strong><br>
                        <small style="color: #64748b;">Idealny dla: Wszystkie | Visibility: High</small>
                    </div>
                    <div style="text-align: right;">
                        <span style="color: #f59e0b; font-weight: 700;">25 PLN</span><br>
                        <button class="button-secondary" style="padding: 6px 12px; font-size: 12px; margin-top: 4px;">Dodaj</button>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 20px;">
                    <strong>ğŸ’¡ ALEX Sugeruje:</strong><br>
                    "Dla Grill House uÅ¼yj Dispenser + POS (premium approach). Dla Kebab King lepiej promocja 4+1 (price sensitive segment)."
                </div>
            </div>
        </div>

        <div id="visit" class="tab-content">
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                <div>
                    <div class="section">
                        <h3>ğŸ’¬ Rozmowa z Klientem</h3>
                        <p style="margin-bottom: 15px;"><strong>Wybierz klienta:</strong> 
                            <select style="padding: 10px; border-radius: 6px; border: 1px solid #e2e8f0; font-size: 14px; width: 100%;">
                                <option>ğŸ” Grill House (z trasy 1/2)</option>
                                <option>ğŸ¥™ Kebab King (z trasy 2/2)</option>
                                <option disabled>--- Ad-hoc ---</option>
                                <option>ğŸ• Pizza House</option>
                            </select>
                        </p>
                        
                        <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 2px solid #6366f1;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong style="font-size: 18px;">ğŸ” Grill House</strong>
                                    <span class="tag premium">Premium</span>
                                    <br>
                                    <small style="color: #64748b;">Burger joint | Kotlin currently | Rep: 65/100</small>
                                </div>
                                <div style="text-align: right;">
                                    <p style="margin: 0; color: #64748b; font-size: 13px;">PotencjaÅ‚:</p>
                                    <p style="margin: 0; font-size: 20px; font-weight: 700; color: #10b981;">83 kg/mies</p>
                                </div>
                            </div>
                        </div>

                        <div class="chat-box">
                            <div class="message">
                                <strong>WÅ‚aÅ›ciciel (Pan Marek):</strong> DzieÅ„ dobry! Co Pan ma dla mnie dzisiaj?
                            </div>
                            <div class="message player">
                                <strong>Ty:</strong> DzieÅ„ dobry Panie Marku! ChciaÅ‚bym przedstawiÄ‡ nowy Heinz Ketchup Åagodny 875ml...
                            </div>
                            <div class="message">
                                <strong>WÅ‚aÅ›ciciel:</strong> Kotlin daje mi lepszÄ… cenÄ™ i zawsze dostawa na czas. Co Pan moÅ¼e zaoferowaÄ‡?
                            </div>
                        </div>

                        <textarea style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0; font-family: inherit; min-height: 100px; margin-bottom: 10px;" placeholder="Wpisz swojÄ… odpowiedÅº...&#10;ğŸ’¡ Tip: UÅ¼yj kompensacji - zaproponuj Dispenser za darmo"></textarea>
                        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                            <button class="button-primary" style="flex: 1;">ğŸ“¤ WyÅ›lij</button>
                            <button class="button-secondary">ğŸ¤ Audio</button>
                        </div>

                        <!-- Notatki podczas wizyty -->
                        <div style="background: #fffbeb; padding: 15px; border-radius: 8px; border: 2px solid #fbbf24;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <strong style="color: #92400e;">ğŸ“ Notatki: Grill House</strong>
                                <button class="button-secondary" style="padding: 4px 8px; font-size: 11px;" onclick="toggleNotes()">ZwiÅ„/RozwiÅ„</button>
                            </div>
                            <div id="visit-notes-content">
                                <textarea id="visit-notes" style="width: 100%; min-height: 120px; padding: 10px; border: 1px solid #fcd34d; border-radius: 6px; font-family: inherit; font-size: 13px; resize: vertical; background: white; margin-bottom: 10px;" placeholder="Notatki z tej wizyty...&#10;&#10;ğŸ’¡ Zapisuj:&#10;- Kluczowe informacje z rozmowy&#10;- Obiekcje i odpowiedzi&#10;- Uzgodnienia&#10;- Co pamiÄ™taÄ‡ na nastÄ™pnÄ… wizytÄ™"></textarea>
                                <div style="display: flex; gap: 10px;">
                                    <button class="button-primary" style="flex: 1; padding: 8px; font-size: 12px;" onclick="saveVisitNotes()">ğŸ’¾ Zapisz notatki</button>
                                    <button class="button-secondary" style="padding: 8px 12px; font-size: 12px;" onclick="loadPreviousNotes()">ğŸ“– Poprzednie</button>
                                </div>
                                <div style="margin-top: 10px; padding: 10px; background: white; border-radius: 6px; font-size: 12px; color: #64748b;">
                                    <strong>Ostatnia wizyta (2 dni temu):</strong><br>
                                    <em>"WÅ‚aÅ›ciciel zainteresowany Heinzem, ale chce zobaczyÄ‡ prÃ³bki. WspomniaÅ‚ o problemach z dostawami od Kotlin - opÃ³Åºnienia 2-3 dni."</em>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section" style="margin-top: 20px;">
                        <h3>ğŸ›’ ZamÃ³wienie</h3>
                        <p style="color: #64748b;">Formularz zamÃ³wienia pojawi siÄ™ po zakoÅ„czeniu rozmowy</p>
                    </div>
                </div>

                <div>
                    <div class="sidebar-widget">
                        <h4 style="margin-bottom: 12px;">ğŸ“¦ Quick Products</h4>
                        <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #e2e8f0;">
                            <strong>Heinz Åagodny</strong><br>
                            <small style="color: #10b981; font-weight: 600;">28.50 PLN</small><br>
                            <small style="color: #64748b;">Premium â€¢ FS 875ml</small>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #e2e8f0;">
                            <strong>Pudliszki Åagodny</strong><br>
                            <small style="color: #10b981; font-weight: 600;">18.50 PLN</small><br>
                            <small style="color: #64748b;">Value â€¢ FS 980g</small>
                        </div>
                        <button class="button-secondary" style="width: 100%; font-size: 12px;">Zobacz wszystkie (12)</button>
                    </div>

                    <div class="sidebar-widget">
                        <h4 style="margin-bottom: 12px;">ğŸ Quick Tools</h4>
                        <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; border: 1px solid #e2e8f0;">
                            <strong>Dispenser</strong><br>
                            <small>15 PLN â€¢ Dodano âœ“</small>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #e2e8f0;">
                            <strong>Promocja 4+1</strong><br>
                            <small>100 PLN</small>
                        </div>
                        <button class="button-secondary" style="width: 100%; font-size: 12px;">Dodaj narzÄ™dzie</button>
                    </div>

                    <div class="sidebar-widget">
                        <h4 style="margin-bottom: 12px;">ğŸ’¡ AI Tips</h4>
                        <p style="font-size: 13px; line-height: 1.6; margin-bottom: 10px;">
                            <strong>Strategia:</strong> Kompensacja<br>
                            <strong>Kluczowe obiekcje:</strong><br>
                            â€¢ Za drogi vs Kotlin<br>
                            â€¢ LojalnoÅ›Ä‡ dostawcy<br>
                            â€¢ Obawy o dostÄ™pnoÅ›Ä‡
                        </p>
                        <button class="button-secondary" style="width: 100%; font-size: 12px;">ğŸ“‹ Zobacz peÅ‚ny profil</button>
                    </div>

                    <div class="sidebar-widget" style="background: #fae8ff; border-left-color: #a855f7;">
                        <h4 style="margin-bottom: 12px;">ğŸ‘” Manager Support</h4>
                        <button class="button-secondary" style="width: 100%; font-size: 12px; margin-bottom: 8px;">ğŸ’¬ Zapytaj o poradÄ™</button>
                        <button class="button-secondary" style="width: 100%; font-size: 12px;">âœ… PoproÅ› o approval</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(event, tabName) {
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }

            const tabs = document.getElementsByClassName('tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }

            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Route planning
        let selectedRoute = [];
        const clientDistances = {
            'grill': 5.2,
            'kebab': 8.1,
            'pizza': 12.3,
            'taco': 9.5,
            'sushi': 7.8
        };
        const clientNames = {
            'grill': 'ğŸ” Grill House',
            'kebab': 'ğŸ¥™ Kebab King',
            'pizza': 'ğŸ• Pizza House',
            'taco': 'ğŸŒ® Taco Loco',
            'sushi': 'ğŸ£ Sushi Bar'
        };

        // Filter map by client status
        function filterMap() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const premiumChecked = checkboxes[0].checked;
            const valueChecked = checkboxes[1].checked;
            const mixedChecked = checkboxes[2].checked;
            
            document.querySelectorAll('.client-pin').forEach(pin => {
                const status = pin.getAttribute('data-status');
                let show = false;
                
                if (status === 'premium' && premiumChecked) show = true;
                if (status === 'value' && valueChecked) show = true;
                if (status === 'mixed' && mixedChecked) show = true;
                
                pin.style.display = show ? 'block' : 'none';
            });
            
            // Redraw route lines after filter
            drawRouteLines();
        }

        function toggleClient(element, name, distance) {
            const clientId = element.getAttribute('data-client');
            const pinIcon = element.querySelector('.pin-icon');
            
            if (selectedRoute.includes(clientId)) {
                // Remove from route
                selectedRoute = selectedRoute.filter(id => id !== clientId);
                // Restore original color based on days since last visit
                const days = parseInt(element.getAttribute('data-days'));
                pinIcon.textContent = getColorByDays(days);
                element.querySelector('.pin-label').style.background = 'white';
            } else {
                // Add to route
                selectedRoute.push(clientId);
                pinIcon.textContent = 'ğŸŸ£'; // Purple for selected
                element.querySelector('.pin-label').style.background = '#ddd6fe';
            }
            
            updateRouteDisplay();
            drawRouteLines();
        }

        function getColorByDays(days) {
            if (days === 0) return 'âšª'; // No visits yet
            if (days <= 3) return 'ğŸŸ¢';  // 0-3 days
            if (days <= 7) return 'ğŸŸ¡';  // 4-7 days
            if (days <= 14) return 'ğŸŸ '; // 8-14 days
            return 'ğŸ”´'; // 15+ days
        }

        function updateRouteDisplay() {
            const routeCount = document.getElementById('route-count');
            const routeList = document.getElementById('route-list');
            const routeStats = document.getElementById('route-stats');
            
            if (selectedRoute.length === 0) {
                routeCount.textContent = '0 klientÃ³w';
                routeList.innerHTML = '<em>Kliknij na pinach aby zaplanowaÄ‡ trasÄ™...</em>';
                routeStats.style.display = 'none';
            } else {
                routeCount.textContent = `${selectedRoute.length} ${selectedRoute.length === 1 ? 'klient' : 'klientÃ³w'}`;
                
                // Build route list
                let routeHTML = '<ol style="margin: 0; padding-left: 20px;">';
                selectedRoute.forEach((clientId, index) => {
                    routeHTML += `<li>${clientNames[clientId]} (${clientDistances[clientId]} km)</li>`;
                });
                routeHTML += '</ol>';
                routeList.innerHTML = routeHTML;
                
                // Calculate stats
                let totalDistance = selectedRoute.reduce((sum, id) => sum + clientDistances[id], 0);
                let totalTime = Math.round(totalDistance / 6 * 10) / 10; // ~6km/h average
                let totalEnergy = Math.round(totalDistance * 2.5); // 2.5% per km
                
                document.getElementById('total-distance').textContent = totalDistance.toFixed(1);
                document.getElementById('total-time').textContent = totalTime.toFixed(1);
                document.getElementById('total-energy').textContent = totalEnergy;
                
                routeStats.style.display = 'block';
            }
        }

        function drawRouteLines() {
            const svg = document.getElementById('route-lines');
            svg.innerHTML = ''; // Clear existing lines
            
            if (selectedRoute.length < 2) return;
            
            // Get all pin positions
            const pins = {};
            document.querySelectorAll('.client-pin').forEach(pin => {
                const clientId = pin.getAttribute('data-client');
                const rect = pin.getBoundingClientRect();
                const container = document.getElementById('map-container').getBoundingClientRect();
                pins[clientId] = {
                    x: rect.left - container.left + rect.width / 2,
                    y: rect.top - container.top + rect.height / 2
                };
            });
            
            // Draw lines between consecutive clients in route
            for (let i = 0; i < selectedRoute.length - 1; i++) {
                const from = pins[selectedRoute[i]];
                const to = pins[selectedRoute[i + 1]];
                
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', from.x);
                line.setAttribute('y1', from.y);
                line.setAttribute('x2', to.x);
                line.setAttribute('y2', to.y);
                line.setAttribute('stroke', '#8b5cf6');
                line.setAttribute('stroke-width', '3');
                line.setAttribute('stroke-dasharray', '5,5');
                svg.appendChild(line);
            }
        }

        function clearRoute() {
            selectedRoute = [];
            document.querySelectorAll('.client-pin').forEach(pin => {
                const days = parseInt(pin.getAttribute('data-days'));
                pin.querySelector('.pin-icon').textContent = getColorByDays(days);
                pin.querySelector('.pin-label').style.background = 'white';
            });
            updateRouteDisplay();
            drawRouteLines();
        }

        // Notes panel
        let currentNotesClient = 'general';
        const notesData = {
            'general': '',
            'grill': '',
            'kebab': '',
            'pizza': '',
            'taco': ''
        };

        function openNotes(clientId) {
            // Save current notes
            notesData[currentNotesClient] = document.getElementById('notes-content').value;
            
            // Switch to new client
            currentNotesClient = clientId;
            
            // Update header
            const headerText = clientId === 'general' ? 'Notatki ogÃ³lne' : `Notatki: ${clientNames[clientId]}`;
            document.querySelector('#notes-header strong').textContent = headerText;
            
            // Load notes
            document.getElementById('notes-content').value = notesData[clientId];
            document.getElementById('notes-content').placeholder = 
                `Notatki dla ${clientNames[clientId]}...\\n\\nğŸ’¡ Zapisuj waÅ¼ne info:\\n- Preferencje wÅ‚aÅ›ciciela\\n- Ostatnia rozmowa\\n- Obiekcje do obsÅ‚uÅ¼enia\\n- Planowana strategia`;
            
            // Highlight panel
            const panel = document.getElementById('notes-panel');
            panel.style.transform = 'scale(1.02)';
            setTimeout(() => panel.style.transform = 'scale(1)', 200);
        }

        function saveNotes() {
            notesData[currentNotesClient] = document.getElementById('notes-content').value;
            
            // Update timestamp
            const now = new Date();
            const timestamp = now.toLocaleString('pl-PL', { 
                day: '2-digit', 
                month: '2-digit', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('notes-timestamp').textContent = timestamp;
            
            // Update quick notes preview
            updateQuickNotes();
            
            // Visual feedback
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = 'âœ… Zapisano';
            setTimeout(() => btn.innerHTML = originalText, 1500);
        }

        function clearNotes() {
            if (confirm('Czy na pewno chcesz usunÄ…Ä‡ te notatki?')) {
                notesData[currentNotesClient] = '';
                document.getElementById('notes-content').value = '';
                updateQuickNotes();
            }
        }

        function updateQuickNotes() {
            const quickNotesDiv = document.getElementById('quick-notes');
            let html = '';
            
            const clients = ['grill', 'kebab', 'pizza'];
            clients.forEach(clientId => {
                const note = notesData[clientId];
                const preview = note ? note.substring(0, 50) + (note.length > 50 ? '...' : '') : '<em style="color: #64748b;">Bez notatek</em>';
                const borderColor = note ? '#10b981' : '#e2e8f0';
                
                html += `
                    <div style="background: white; padding: 8px; border-radius: 4px; margin-bottom: 6px; border-left: 3px solid ${borderColor}; cursor: pointer;" onclick="openNotes('${clientId}')">
                        <strong>${clientNames[clientId]}:</strong> ${preview}
                    </div>
                `;
            });
            
            quickNotesDiv.innerHTML = html;
        }

        // Visit notes functions
        function toggleNotes() {
            const notesContent = document.getElementById('visit-notes-content');
            notesContent.classList.toggle('collapsed');
        }

        function saveVisitNotes() {
            const notes = document.getElementById('visit-notes').value;
            // Save to localStorage or session state
            localStorage.setItem('visit_notes_grill', notes);
            
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = 'âœ… Zapisano';
            setTimeout(() => btn.innerHTML = originalText, 1500);
        }

        function loadPreviousNotes() {
            const previousNotes = localStorage.getItem('visit_notes_grill') || '';
            if (previousNotes) {
                document.getElementById('visit-notes').value = previousNotes;
                alert('ZaÅ‚adowano notatki z poprzedniej wizyty');
            } else {
                alert('Brak notatek z poprzednich wizyt');
            }
        }

        // Initialize
        window.addEventListener('resize', drawRouteLines);
    </script>
</body>
</html>