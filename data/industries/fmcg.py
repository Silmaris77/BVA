"""
FMCG Industry Configuration
Fast-Moving Consumer Goods - Sales Career Path

Career progression from Junior Sales Rep to Chief Sales Officer
"""

# =============================================================================
# INDUSTRY METADATA
# =============================================================================

INDUSTRY_INFO = {
    "id": "fmcg",
    "name": "FMCG Sales",
    "full_name": "Fast-Moving Consumer Goods",
    "icon": "üõí",
    "description": "Zbuduj karierƒô w sprzeda≈ºy FMCG - od Przedstawiciela Handlowego do Chief Sales Officer",
    "company_name": "FreshLife Poland",
    "company_description": "Polski oddzia≈Ç miƒôdzynarodowego koncernu FMCG. Lider w kategorii Personal Care, dynamiczny rozw√≥j w Food i Home Care. Portfolio 12 produkt√≥w w 3 kategoriach."
}

# =============================================================================
# CAREER LEVELS - 10-poziomowa ≈õcie≈ºka kariery
# =============================================================================

CAREER_LEVELS = {
    1: {
        "role": "Junior Sales Representative",
        "role_short": "Jr Sales Rep",
        "icon": "üéØ",
        "team_size": 0,
        "description": "Uczysz siƒô podstaw sprzeda≈ºy FMCG. Obs≈Çugujesz ma≈Çe sklepy detaliczne.",
        "responsibilities": [
            "Wizyt w ma≈Çych sklepach (spo≈ºywczaki, kioski)",
            "Realizacja zam√≥wie≈Ñ",
            "Podstawowa ekspozycja produkt√≥w",
            "Raportowanie sprzeda≈ºy"
        ],
        "required_metrics": {
            "monthly_sales": 10000,      # 10k PLN/miesiƒÖc
            "market_share": 5,           # 5% market share
            "customer_satisfaction": 70  # 70% satisfaction
        }
    },
    2: {
        "role": "Sales Representative",
        "role_short": "Sales Rep",
        "icon": "üíº",
        "team_size": 0,
        "description": "Samodzielny przedstawiciel handlowy. ZarzƒÖdzasz w≈Çasnym terytorium.",
        "responsibilities": [
            "Wizyt w ≈õrednich sklepach (≈ªabka, ABC, ma≈Çe sieci)",
            "Negocjacje warunk√≥w handlowych",
            "Planowanie trasy i wizyt",
            "Analiza konkurencji"
        ],
        "required_metrics": {
            "monthly_sales": 25000,
            "market_share": 10,
            "customer_satisfaction": 75
        }
    },
    3: {
        "role": "Senior Sales Representative",
        "role_short": "Sr Sales Rep",
        "icon": "‚≠ê",
        "team_size": 0,
        "description": "Ekspert sprzeda≈ºy. Obs≈Çugujesz kluczowych klient√≥w i mentoruje junior√≥w.",
        "responsibilities": [
            "Obs≈Çuga Key Accounts (ma≈Çe sieci regionalne)",
            "Wdra≈ºanie promocji i kampanii",
            "Mentoring junior√≥w (nieformalne)",
            "Optymalizacja dystybucji"
        ],
        "required_metrics": {
            "monthly_sales": 50000,
            "market_share": 15,
            "customer_satisfaction": 80
        }
    },
    4: {
        "role": "Sales Team Leader",
        "role_short": "Team Leader",
        "icon": "üë•",
        "team_size": 3,
        "description": "ZarzƒÖdzasz ma≈Çym zespo≈Çem przedstawicieli. Pierwsza rola managerska.",
        "responsibilities": [
            "ZarzƒÖdzanie zespo≈Çem 3 sales rep√≥w",
            "Coaching i rozw√≥j zespo≈Çu",
            "Planowanie territory coverage",
            "Realizacja team targets"
        ],
        "required_metrics": {
            "team_sales": 150000,        # Sales ca≈Çego zespo≈Çu
            "market_share": 18,
            "team_satisfaction": 75      # Satysfakcja zespo≈Çu
        }
    },
    5: {
        "role": "Area Sales Manager",
        "role_short": "Area Manager",
        "icon": "üó∫Ô∏è",
        "team_size": 5,
        "description": "ZarzƒÖdzasz obszarem sprzeda≈ºy (kilka miast). ≈öredni management.",
        "responsibilities": [
            "ZarzƒÖdzanie zespo≈Çem 5 sales rep√≥w",
            "Strategia sprzeda≈ºy dla obszaru",
            "Negocjacje z wiƒôkszymi sieciami",
            "Bud≈ºet marketingowy dla obszaru"
        ],
        "required_metrics": {
            "team_sales": 300000,
            "market_share": 20,
            "team_satisfaction": 80
        }
    },
    6: {
        "role": "District Sales Manager",
        "role_short": "District Manager",
        "icon": "üèôÔ∏è",
        "team_size": 8,
        "description": "ZarzƒÖdzasz dystryktem (wojew√≥dztwo). Du≈ºe operacje sprzeda≈ºowe.",
        "responsibilities": [
            "ZarzƒÖdzanie zespo≈Çem 8 os√≥b (reps + 1 team leader)",
            "Strategia dystrybucji",
            "Obs≈Çuga sieci krajowych (Biedronka, Lidl, Kaufland)",
            "Trade marketing i promocje"
        ],
        "required_metrics": {
            "team_sales": 600000,
            "market_share": 22,
            "team_satisfaction": 82
        }
    },
    7: {
        "role": "Regional Sales Manager",
        "role_short": "Regional Manager",
        "icon": "üåç",
        "team_size": 15,
        "description": "ZarzƒÖdzasz ca≈Çym regionem (kilka wojew√≥dztw). Senior management.",
        "responsibilities": [
            "ZarzƒÖdzanie regionem (15+ os√≥b)",
            "Strategia wzrostu i ekspansji",
            "Bud≈ºet regionalny (sales + marketing)",
            "Partnership z national chains"
        ],
        "required_metrics": {
            "team_sales": 1200000,
            "market_share": 25,
            "team_satisfaction": 85
        }
    },
    8: {
        "role": "Regional Sales Director",
        "role_short": "Regional Director",
        "icon": "üíé",
        "team_size": 25,
        "description": "Dyrektor sprzeda≈ºy dla du≈ºego regionu. Executive level.",
        "responsibilities": [
            "Strategia sprzeda≈ºy dla makro-regionu",
            "ZarzƒÖdzanie bud≈ºetem milionowym",
            "Rekrutacja i rozw√≥j manager√≥w",
            "Board presentations"
        ],
        "required_metrics": {
            "team_sales": 2500000,
            "market_share": 28,
            "team_satisfaction": 87
        }
    },
    9: {
        "role": "Vice President of Sales",
        "role_short": "VP Sales",
        "icon": "üëî",
        "team_size": 50,
        "description": "VP Sales dla ca≈Çego kraju. C-level position.",
        "responsibilities": [
            "Strategia sprzeda≈ºy krajowej",
            "ZarzƒÖdzanie ca≈ÇƒÖ strukturƒÖ sales (50+ os√≥b)",
            "Alokacja bud≈ºetu",
            "M&A i partnerships"
        ],
        "required_metrics": {
            "team_sales": 5000000,
            "market_share": 30,
            "team_satisfaction": 90
        }
    },
    10: {
        "role": "Chief Sales Officer",
        "role_short": "CSO",
        "icon": "üëë",
        "team_size": 100,
        "description": "Najwy≈ºsze stanowisko sprzeda≈ºowe. Cz≈Çonek zarzƒÖdu.",
        "responsibilities": [
            "Wizja i strategia sales dla firmy",
            "ZarzƒÖdzanie ca≈ÇƒÖ organizacjƒÖ sprzeda≈ºy",
            "Ekspansja miƒôdzynarodowa",
            "Revenue growth & profitability"
        ],
        "required_metrics": {
            "team_sales": 10000000,
            "market_share": 35,
            "team_satisfaction": 92
        }
    }
}

# =============================================================================
# METRICS CONFIGURATION
# =============================================================================

METRICS_CONFIG = {
    "primary": {
        "name": "Monthly Sales",
        "short_name": "Sales",
        "icon": "üí∞",
        "unit": "PLN",
        "description": "Twoja/Twojego zespo≈Çu miesiƒôczna sprzeda≈º",
        "display_format": "{:,} PLN",
        "color": "green"
    },
    "secondary": {
        "name": "Market Share",
        "short_name": "Market Share",
        "icon": "üìä",
        "unit": "%",
        "description": "Udzia≈Ç w rynku w Twoim obszarze",
        "display_format": "{}%",
        "color": "blue"
    },
    "tertiary": {
        "name": "Customer Satisfaction",
        "short_name": "CSAT",
        "icon": "‚≠ê",
        "unit": "%",
        "description": "≈örednia satysfakcja klient√≥w (sklepy, sieci)",
        "display_format": "{}%",
        "color": "yellow"
    },
    "team_metric": {  # Tylko dla poziom√≥w 4+
        "name": "Team Satisfaction",
        "short_name": "Team SAT",
        "icon": "üë•",
        "unit": "%",
        "description": "Satysfakcja i zaanga≈ºowanie Twojego zespo≈Çu",
        "display_format": "{}%",
        "color": "purple"
    }
}

# =============================================================================
# TASK CATEGORIES - Zamiast kontrakt√≥w, mamy "zadania zawodowe"
# =============================================================================

TASK_CATEGORIES = {
    "field_sales": {
        "name": "Sprzeda≈º Terenowa",
        "icon": "üöó",
        "description": "Wizyty w sklepach, negocjacje, zam√≥wienia",
        "levels": [1, 2, 3, 4, 5, 6, 7]  # Dostƒôpne dla tych poziom√≥w
    },
    "key_accounts": {
        "name": "Obs≈Çuga Kluczowych Klient√≥w",
        "icon": "üè¢",
        "description": "Wsp√≥≈Çpraca z sieciami handlowymi, du≈ºe kontrakty",
        "levels": [3, 4, 5, 6, 7, 8, 9, 10]
    },
    "team_management": {
        "name": "ZarzƒÖdzanie Zespo≈Çem",
        "icon": "üë•",
        "description": "Coaching, rekrutacja, rozw√≥j zespo≈Çu",
        "levels": [4, 5, 6, 7, 8, 9, 10]
    },
    "trade_marketing": {
        "name": "Trade Marketing",
        "icon": "üì¢",
        "description": "Promocje, kampanie, planowanie merchandisingu",
        "levels": [2, 3, 4, 5, 6, 7, 8]
    },
    "strategy": {
        "name": "Strategia i Planowanie",
        "icon": "üéØ",
        "description": "Business planning, bud≈ºety, ekspansja",
        "levels": [5, 6, 7, 8, 9, 10]
    },
    "crisis": {
        "name": "ZarzƒÖdzanie Kryzysowe",
        "icon": "üö®",
        "description": "Product recall, konflikty, problemy operacyjne",
        "levels": [4, 5, 6, 7, 8, 9, 10]
    }
}

# =============================================================================
# TEAM MEMBERS - Dla poziom√≥w 4+ (Team Leader i wy≈ºej)
# =============================================================================

TEAM_MEMBER_TYPES = {
    "junior_rep": {
        "role": "Junior Sales Rep",
        "icon": "üéØ",
        "base_salary": 4000,  # PLN/miesiƒÖc
        "productivity": 8000,  # ≈örednia sprzeda≈º/miesiƒÖc
        "skill_level": "beginner",
        "requires_coaching": True
    },
    "sales_rep": {
        "role": "Sales Representative",
        "icon": "üíº",
        "base_salary": 5500,
        "productivity": 20000,
        "skill_level": "intermediate",
        "requires_coaching": False
    },
    "senior_rep": {
        "role": "Senior Sales Rep",
        "icon": "‚≠ê",
        "base_salary": 7000,
        "productivity": 40000,
        "skill_level": "advanced",
        "requires_coaching": False
    },
    "team_leader": {
        "role": "Team Leader",
        "icon": "üë•",
        "base_salary": 9000,
        "productivity": 0,  # Manager, nie sprzedaje sam
        "skill_level": "management",
        "manages_team": True
    }
}

# =============================================================================
# ADVANCEMENT FORMULA
# =============================================================================

def can_advance_to_next_level(current_level: int, metrics: dict, career_stage: str) -> tuple[bool, str]:
    """
    Sprawdza czy gracz mo≈ºe awansowaƒá na nastƒôpny poziom
    
    Args:
        current_level: Obecny poziom (1-10)
        metrics: Dict z aktualnymi metrykami gracza
        career_stage: "ic", "manager", "director"
    
    Returns:
        (can_advance, reason)
    """
    if current_level >= 10:
        return False, "OsiƒÖgnƒÖ≈Çe≈õ najwy≈ºszy poziom!"
    
    next_level = current_level + 1
    requirements = CAREER_LEVELS[next_level]["required_metrics"]
    
    # Sprawd≈∫ metryki w zale≈ºno≈õci od career stage
    if career_stage in ["ic"]:  # Individual Contributor (1-3)
        checks = [
            (metrics.get("monthly_sales", 0) >= requirements["monthly_sales"], 
             f"Monthly Sales: {metrics.get('monthly_sales', 0):,} / {requirements['monthly_sales']:,} PLN"),
            (metrics.get("market_share", 0) >= requirements["market_share"],
             f"Market Share: {metrics.get('market_share', 0)}% / {requirements['market_share']}%"),
            (metrics.get("customer_satisfaction", 0) >= requirements["customer_satisfaction"],
             f"Customer Satisfaction: {metrics.get('customer_satisfaction', 0)}% / {requirements['customer_satisfaction']}%")
        ]
    else:  # Manager/Director (4+)
        checks = [
            (metrics.get("team_sales", 0) >= requirements["team_sales"],
             f"Team Sales: {metrics.get('team_sales', 0):,} / {requirements['team_sales']:,} PLN"),
            (metrics.get("market_share", 0) >= requirements["market_share"],
             f"Market Share: {metrics.get('market_share', 0)}% / {requirements['market_share']}%"),
            (metrics.get("team_satisfaction", 0) >= requirements.get("team_satisfaction", 0),
             f"Team Satisfaction: {metrics.get('team_satisfaction', 0)}% / {requirements.get('team_satisfaction', 0)}%")
        ]
    
    # Sprawd≈∫ wszystkie wymagania
    failed_checks = [reason for passed, reason in checks if not passed]
    
    if failed_checks:
        return False, "Wymagania do awansu:\n" + "\n".join(f"‚ùå {r}" for r in failed_checks)
    
    return True, f"Gratulacje! Spe≈Çniasz wymagania na poziom {next_level}: {CAREER_LEVELS[next_level]['role']}! üéâ"

# =============================================================================
# CAREER STAGE HELPER
# =============================================================================

def get_career_stage(level: int) -> str:
    """Zwraca career stage na podstawie poziomu"""
    if level <= 3:
        return "ic"  # Individual Contributor
    elif level <= 7:
        return "manager"
    else:
        return "director"

# =============================================================================
# GAME CONFIG
# =============================================================================

FMCG_GAME_CONFIG = {
    "starting_level": 1,
    "starting_role": "Junior Sales Representative",
    "max_level": 10,
    "tasks_per_day": {
        1: 1,   # Level 1: 1 zadanie/dzie≈Ñ
        2: 1,
        3: 2,   # Level 3: 2 zadania/dzie≈Ñ (bardziej do≈õwiadczony)
        4: 2,   # Team Leader: mniej hands-on
        5: 2,
        6: 3,
        7: 3,
        8: 3,
        9: 4,
        10: 5
    },
    "currency": "PLN",
    "performance_review_frequency": "quarterly",  # Co 3 miesiƒÖce review
    "bonus_multipliers": {
        "exceeds_target": 1.5,      # 150% bonusu je≈õli przekroczysz target
        "meets_target": 1.0,        # 100% bonusu
        "below_target": 0.5         # 50% bonusu
    }
}
