<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIN Selling - Czƒô≈õƒá 2: Interaktywno≈õƒá</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --situation-color: #2196F3;
            --problem-color: #F44336;
            --implication-color: #FF9800;
            --need-payoff-color: #4CAF50;
            --spin-gradient: linear-gradient(135deg, #2196F3 0%, #F44336 33%, #FF9800 66%, #4CAF50 100%);
            --bg-primary: #0a0e27;
            --bg-secondary: #1a1f3a;
            --text-primary: #ffffff;
            --text-secondary: #b0b8da;
            --accent: #00d4ff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .lesson-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .lesson-header {
            text-align: center;
            padding: 40px 20px;
            background: var(--spin-gradient);
            border-radius: 20px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .lesson-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .lesson-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .lesson-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .progress-container {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--spin-gradient);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: var(--text-secondary);
        }

        .lesson-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .lesson-card.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .card-icon {
            font-size: 2rem;
        }

        .card-title-group {
            flex: 1;
            margin-left: 20px;
        }

        .card-title-group h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .card-time {
            color: var(--accent);
            font-size: 0.9rem;
        }

        /* Card 5: Hotspot - Journey Map */
        .journey-map {
            position: relative;
            padding: 40px;
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            margin: 30px 0;
        }

        .journey-path {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 40px;
        }

        .journey-path::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--situation-color) 0%, var(--problem-color) 33%, var(--implication-color) 66%, var(--need-payoff-color) 100%);
            z-index: 0;
        }

        .journey-step {
            background: var(--bg-secondary);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            border: 4px solid;
        }

        .journey-step.situation { border-color: var(--situation-color); color: var(--situation-color); }
        .journey-step.problem { border-color: var(--problem-color); color: var(--problem-color); }
        .journey-step.implication { border-color: var(--implication-color); color: var(--implication-color); }
        .journey-step.need-payoff { border-color: var(--need-payoff-color); color: var(--need-payoff-color); }

        .journey-step:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px currentColor;
        }

        .journey-step.active {
            transform: scale(1.3);
            box-shadow: 0 0 40px currentColor;
        }

        .journey-dialog {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 15px;
            border-left: 4px solid var(--accent);
            min-height: 200px;
        }

        .dialog-line {
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .dialog-label {
            font-weight: bold;
            color: var(--accent);
        }

        /* Card 6: Drag & Drop */
        .drag-drop-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .drag-items {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 15px;
        }

        .drag-item {
            background: var(--bg-primary);
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: grab;
            transition: all 0.3s ease;
            border-left: 4px solid var(--accent);
        }

        .drag-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,212,255,0.3);
        }

        .drag-item.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .drop-zones {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .drop-zone {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 15px;
            min-height: 150px;
            border: 2px dashed rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .drop-zone.situation { border-color: var(--situation-color); }
        .drop-zone.problem { border-color: var(--problem-color); }
        .drop-zone.implication { border-color: var(--implication-color); }
        .drop-zone.need-payoff { border-color: var(--need-payoff-color); }

        .drop-zone.drag-over {
            background: rgba(255,255,255,0.1);
            border-style: solid;
            box-shadow: 0 0 20px currentColor;
        }

        .drop-zone-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .drop-zone.situation .drop-zone-title { color: var(--situation-color); }
        .drop-zone.problem .drop-zone-title { color: var(--problem-color); }
        .drop-zone.implication .drop-zone-title { color: var(--implication-color); }
        .drop-zone.need-payoff .drop-zone-title { color: var(--need-payoff-color); }

        .dropped-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin-top: 10px;
            border-radius: 8px;
            font-size: 0.95rem;
        }

        .dropped-item.correct {
            border-left: 4px solid var(--need-payoff-color);
        }

        .dropped-item.incorrect {
            border-left: 4px solid var(--problem-color);
        }

        .drag-feedback {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2rem;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .drag-feedback.show {
            display: block;
        }

        .drag-feedback.success {
            background: rgba(76,175,80,0.2);
            border: 2px solid var(--need-payoff-color);
            color: var(--need-payoff-color);
        }

        /* Card 7: Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin: 30px 0;
        }

        .flashcard {
            background: var(--bg-primary);
            border-radius: 15px;
            min-height: 300px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            padding: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
        }

        .flashcard-front {
            background: linear-gradient(135deg, var(--situation-color) 0%, var(--problem-color) 100%);
        }

        .flashcard-back {
            background: linear-gradient(135deg, var(--implication-color) 0%, var(--need-payoff-color) 100%);
            transform: rotateY(180deg);
        }

        .flashcard-content {
            text-align: center;
            font-size: 1.3rem;
            line-height: 1.8;
        }

        .flashcard-number {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1rem;
            color: rgba(255,255,255,0.6);
        }

        .flashcard-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .flashcard-btn {
            padding: 12px 25px;
            background: rgba(255,255,255,0.1);
            border: 2px solid var(--accent);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .flashcard-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }

        /* Card 8: Role-Play */
        .roleplay-scenario {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 4px solid var(--accent);
        }

        .roleplay-stage {
            margin: 30px 0;
        }

        .stage-header {
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .stage-header.situation { background: var(--situation-color); }
        .stage-header.problem { background: var(--problem-color); }
        .stage-header.implication { background: var(--implication-color); }
        .stage-header.need-payoff { background: var(--need-payoff-color); }

        .stage-options {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 0 0 10px 10px;
        }

        .option {
            background: var(--bg-primary);
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .option:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .option.selected.correct {
            border-left-color: var(--need-payoff-color);
            background: rgba(76,175,80,0.2);
        }

        .option.selected.incorrect {
            border-left-color: var(--problem-color);
            background: rgba(244,67,54,0.2);
        }

        .option-label {
            font-weight: bold;
            margin-right: 10px;
        }

        .roleplay-score {
            background: var(--spin-gradient);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .roleplay-score.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .score-value {
            font-size: 4rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-badge {
            font-size: 2rem;
            margin-top: 15px;
        }

        /* Navigation */
        .card-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid rgba(255,255,255,0.1);
        }

        .nav-btn {
            padding: 15px 30px;
            background: var(--spin-gradient);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,212,255,0.4);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .lesson-header h1 {
                font-size: 1.8rem;
            }

            .drag-drop-container {
                grid-template-columns: 1fr;
            }

            .drop-zones {
                grid-template-columns: 1fr;
            }

            .journey-path {
                flex-wrap: wrap;
                gap: 20px;
            }

            .journey-step {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="lesson-container">
        <!-- Header -->
        <div class="lesson-header">
            <h1>üéØ SPIN Selling - Czƒô≈õƒá 2</h1>
            <p>Interaktywno≈õƒá - Karty 5-8</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text">
                Karta <span id="currentCard">5</span> z <span id="totalCards">8</span>
            </div>
        </div>

        <!-- Card 5: Hotspot - Journey Map -->
        <div class="lesson-card active" data-card="5">
            <div class="card-header">
                <span class="card-icon">üìç</span>
                <div class="card-title-group">
                    <h2>SPIN Journey Map</h2>
                    <span class="card-subtitle">Karta 5 z 8 ‚Ä¢ Hotspot</span>
                </div>
                <span class="card-time">‚è±Ô∏è 3 min</span>
            </div>

            <div class="hotspot-content">
                <p style="font-size: 1.2rem; margin-bottom: 30px; line-height: 1.8;">
                    Kliknij na ka≈ºdy etap SPIN, aby zobaczyƒá <strong>przyk≈Çadowy dialog</strong> z klientem.
                </p>

                <div class="journey-map">
                    <div class="journey-path">
                        <div class="journey-step situation active" onclick="showDialog('situation')">S</div>
                        <div class="journey-step problem" onclick="showDialog('problem')">P</div>
                        <div class="journey-step implication" onclick="showDialog('implication')">I</div>
                        <div class="journey-step need-payoff" onclick="showDialog('need-payoff')">N</div>
                    </div>

                    <div class="journey-dialog" id="dialogBox">
                        <div id="dialogContent">
                            <!-- Situation dialog (default) -->
                            <h3 style="color: var(--situation-color); margin-bottom: 20px; font-size: 1.5rem;">
                                üìä Situation - Poznaj kontekst
                            </h3>
                            <div class="dialog-line">
                                <span class="dialog-label">Sprzedawca:</span> "Cze≈õƒá! Dziƒôkujƒô za spotkanie. ≈ªeby lepiej zrozumieƒá WaszƒÖ sytuacjƒô - ile os√≥b pracuje w dziale sprzeda≈ºy?"
                            </div>
                            <div class="dialog-line">
                                <span class="dialog-label">Klient:</span> "Mamy 12 os√≥b - 10 handlowc√≥w i 2 support."
                            </div>
                            <div class="dialog-line">
                                <span class="dialog-label">Sprzedawca:</span> "Rozumiem. A jaki system CRM obecnie u≈ºywacie do ≈õledzenia lead√≥w?"
                            </div>
                            <div class="dialog-line">
                                <span class="dialog-label">Klient:</span> "G≈Ç√≥wnie Excel. Ka≈ºdy handlowiec ma sw√≥j plik."
                            </div>
                            <div class="dialog-line">
                                <span class="dialog-label">Sprzedawca:</span> "OK, Excel. A jak czƒôsto synchronizujecie dane miƒôdzy osobami?"
                            </div>
                            <div class="dialog-line">
                                <span class="dialog-label">Klient:</span> "Hmm, w≈Ça≈õciwie rzadko... Ka≈ºdy pracuje na swoim."
                            </div>
                            <p style="margin-top: 30px; padding: 20px; background: rgba(33,150,243,0.2); border-radius: 10px; border-left: 4px solid var(--situation-color);">
                                <strong>üí° Cel Situation:</strong> Zebraƒá fakty. Nie osƒÖdzaƒá, nie proponowaƒá. Tylko poznaƒá sytuacjƒô.<br>
                                <strong>‚úì Masz kontekst:</strong> 12 os√≥b, Excel bez synchronizacji ‚Üí gotowy do Problem Questions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-navigation">
                <button class="nav-btn prev" onclick="prevCard()" disabled>‚Üê Poprzednia</button>
                <button class="nav-btn next" onclick="nextCard()">Nastƒôpna ‚Üí</button>
            </div>
        </div>

        <!-- Card 6: Drag & Drop -->
        <div class="lesson-card" data-card="6">
            <div class="card-header">
                <span class="card-icon">üîÄ</span>
                <div class="card-title-group">
                    <h2>Dopasuj pytanie do typu SPIN</h2>
                    <span class="card-subtitle">Karta 6 z 8 ‚Ä¢ Drag & Drop</span>
                </div>
                <span class="card-time">‚è±Ô∏è 3 min</span>
            </div>

            <div class="drag-content">
                <p style="font-size: 1.2rem; margin-bottom: 30px; line-height: 1.8;">
                    PrzeciƒÖgnij 12 pyta≈Ñ do odpowiednich kategorii SPIN. <strong>Ka≈ºda kategoria powinna mieƒá 3 pytania.</strong>
                </p>

                <div class="drag-drop-container">
                    <div class="drag-items">
                        <h3 style="margin-bottom: 20px; font-size: 1.3rem;">Pytania do przypisania:</h3>
                        <div class="drag-item" draggable="true" data-type="situation">
                            "Ile os√≥b obs≈Çuguje zam√≥wienia w waszej firmie?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="problem">
                            "Jak czƒôsto zdarzajƒÖ siƒô b≈Çƒôdy w fakturowaniu?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="implication">
                            "Je≈õli b≈ÇƒÖd trafi do klienta, jaki to ma wp≈Çyw na waszƒÖ reputacjƒô?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="need-payoff">
                            "Gdyby b≈Çƒôd√≥w by≈Ço zero, ile czasu zaoszczƒôdziliby≈õcie?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="situation">
                            "Jaki bud≈ºet macie na narzƒôdzia IT rocznie?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="problem">
                            "Jakie wyzwania macie z komunikacjƒÖ miƒôdzy dzia≈Çami?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="implication">
                            "Je≈õli zesp√≥≈Ç traci 2h dziennie na rƒôczne zadania, ile to kosztuje miesiƒôcznie?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="need-payoff">
                            "Co by siƒô zmieni≈Ço, gdyby proces by≈Ç automatyczny?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="situation">
                            "Jak d≈Çugo u≈ºywacie obecnego systemu?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="problem">
                            "Co was najbardziej frustruje w obecnym rozwiƒÖzaniu?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="implication">
                            "Je≈õli konkurencja reaguje szybciej, jak wp≈Çywa to na wasze kontrakty?"
                        </div>
                        <div class="drag-item" draggable="true" data-type="need-payoff">
                            "Gdyby≈õcie mieli pe≈ÇnƒÖ widoczno≈õƒá lead√≥w, o ile wzros≈Çaby konwersja?"
                        </div>
                    </div>

                    <div class="drop-zones">
                        <div class="drop-zone situation" data-type="situation">
                            <div class="drop-zone-title">üìä Situation</div>
                            <div class="drop-count">0/3 pyta≈Ñ</div>
                        </div>
                        <div class="drop-zone problem" data-type="problem">
                            <div class="drop-zone-title">‚ö†Ô∏è Problem</div>
                            <div class="drop-count">0/3 pyta≈Ñ</div>
                        </div>
                        <div class="drop-zone implication" data-type="implication">
                            <div class="drop-zone-title">üî• Implication</div>
                            <div class="drop-count">0/3 pyta≈Ñ</div>
                        </div>
                        <div class="drop-zone need-payoff" data-type="need-payoff">
                            <div class="drop-zone-title">üí∞ Need-Payoff</div>
                            <div class="drop-count">0/3 pyta≈Ñ</div>
                        </div>
                    </div>
                </div>

                <div class="drag-feedback" id="dragFeedback">
                    <div id="feedbackText"></div>
                </div>

                <button class="nav-btn" onclick="checkDragAnswers()" style="margin-top: 30px; width: 100%;">
                    Sprawd≈∫ odpowiedzi
                </button>
            </div>

            <div class="card-navigation">
                <button class="nav-btn prev" onclick="prevCard()">‚Üê Poprzednia</button>
                <button class="nav-btn next" onclick="nextCard()">Nastƒôpna ‚Üí</button>
            </div>
        </div>

        <!-- Card 7: Flashcards -->
        <div class="lesson-card" data-card="7">
            <div class="card-header">
                <span class="card-icon">üé¥</span>
                <div class="card-title-group">
                    <h2>10 zasad SPIN</h2>
                    <span class="card-subtitle">Karta 7 z 8 ‚Ä¢ Flashcards</span>
                </div>
                <span class="card-time">‚è±Ô∏è 3 min</span>
            </div>

            <div class="flashcard-content-wrapper">
                <p style="font-size: 1.2rem; margin-bottom: 30px; line-height: 1.8; text-align: center;">
                    Kliknij kartƒô, aby obr√≥ciƒá i poznaƒá <strong>kluczowe zasady SPIN Selling</strong>.
                </p>

                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-front">
                            <div class="flashcard-number">
                                <span id="flashcardNum">1</span>/10
                            </div>
                            <div class="flashcard-content" id="flashcardFront">
                                <strong style="font-size: 1.5rem;">ZASADA #1</strong>
                                <p style="margin-top: 20px;">Kliknij aby odkryƒá</p>
                            </div>
                        </div>
                        <div class="flashcard-back">
                            <div class="flashcard-number">
                                <span id="flashcardNumBack">1</span>/10
                            </div>
                            <div class="flashcard-content" id="flashcardBack">
                                Zacznij od Situation, ale <strong>nie za d≈Çugo</strong> (max 3-4 pytania)
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flashcard-nav">
                    <button class="flashcard-btn" onclick="prevFlashcard()">‚Üê Poprzednia</button>
                    <button class="flashcard-btn" onclick="nextFlashcard()">Nastƒôpna ‚Üí</button>
                </div>
            </div>

            <div class="card-navigation">
                <button class="nav-btn prev" onclick="prevCard()">‚Üê Poprzednia</button>
                <button class="nav-btn next" onclick="nextCard()">Nastƒôpna ‚Üí</button>
            </div>
        </div>

        <!-- Card 8: Role-Play -->
        <div class="lesson-card" data-card="8">
            <div class="card-header">
                <span class="card-icon">üé≠</span>
                <div class="card-title-group">
                    <h2>Scenariusz: CRM dla firmy budowlanej</h2>
                    <span class="card-subtitle">Karta 8 z 8 ‚Ä¢ Role-Play</span>
                </div>
                <span class="card-time">‚è±Ô∏è 4 min</span>
            </div>

            <div class="roleplay-content">
                <div class="roleplay-scenario">
                    <h3 style="font-size: 1.4rem; margin-bottom: 15px;">üìã Sytuacja:</h3>
                    <p style="font-size: 1.1rem; line-height: 1.8;">
                        Sprzedajesz system CRM. Klient to <strong>firma budowlana BudPro</strong> (15 os√≥b, 
                        g≈Ç√≥wnie realizacja projekt√≥w budowlanych).<br><br>
                        
                        Szef firmy zgodzi≈Ç siƒô na spotkanie. <strong>Wybierz najlepsze pytanie na ka≈ºdym etapie SPIN.</strong>
                    </p>
                </div>

                <!-- Stage 1: Situation -->
                <div class="roleplay-stage">
                    <div class="stage-header situation">
                        ETAP 1: Situation - Poznaj kontekst
                    </div>
                    <div class="stage-options">
                        <div class="option" data-stage="1" data-correct="true" onclick="selectOption(this)">
                            <span class="option-label">A)</span> "Ile projekt√≥w rocznie realizujecie?"
                        </div>
                        <div class="option" data-stage="1" data-correct="false" onclick="selectOption(this)">
                            <span class="option-label">B)</span> "Nasze CRM obs≈Çuguje 1000 projekt√≥w jednocze≈õnie!"
                        </div>
                    </div>
                </div>

                <!-- Stage 2: Problem -->
                <div class="roleplay-stage">
                    <div class="stage-header problem">
                        ETAP 2: Problem - Odkryj wyzwania
                    </div>
                    <div class="stage-options">
                        <div class="option" data-stage="2" data-correct="true" onclick="selectOption(this)">
                            <span class="option-label">A)</span> "Czy macie problem z ≈õledzeniem koszt√≥w projekt√≥w?"
                        </div>
                        <div class="option" data-stage="2" data-correct="false" onclick="selectOption(this)">
                            <span class="option-label">B)</span> "Nasz system ma zaawansowany modu≈Ç koszt√≥w!"
                        </div>
                    </div>
                </div>

                <!-- Stage 3: Implication -->
                <div class="roleplay-stage">
                    <div class="stage-header implication">
                        ETAP 3: Implication - Pog≈Çƒôb konsekwencje
                    </div>
                    <div class="stage-options">
                        <div class="option" data-stage="3" data-correct="true" onclick="selectOption(this)">
                            <span class="option-label">A)</span> "Je≈õli projekt przekroczy bud≈ºet o 10%, ile tracicie rocznie?"
                        </div>
                        <div class="option" data-stage="3" data-correct="false" onclick="selectOption(this)">
                            <span class="option-label">B)</span> "Nasz system automatycznie zapobiega przekroczeniom bud≈ºetu!"
                        </div>
                    </div>
                </div>

                <!-- Stage 4: Need-Payoff -->
                <div class="roleplay-stage">
                    <div class="stage-header need-payoff">
                        ETAP 4: Need-Payoff - Klient wizualizuje warto≈õƒá
                    </div>
                    <div class="stage-options">
                        <div class="option" data-stage="4" data-correct="true" onclick="selectOption(this)">
                            <span class="option-label">A)</span> "Gdyby ka≈ºdy projekt by≈Ç w bud≈ºecie, o ile wzr√≥s≈Çby zysk?"
                        </div>
                        <div class="option" data-stage="4" data-correct="false" onclick="selectOption(this)">
                            <span class="option-label">B)</span> "Mo≈ºemy zaczƒÖƒá ju≈º dzi≈õ! Podpiszmy umowƒô!"
                        </div>
                    </div>
                </div>

                <div class="roleplay-score" id="roleplayScore">
                    <h2 style="font-size: 2rem; margin-bottom: 20px;">Tw√≥j wynik:</h2>
                    <div class="score-value" id="scoreValue">0/4</div>
                    <div class="score-badge" id="scoreBadge"></div>
                    <p style="font-size: 1.2rem; margin-top: 20px;" id="scoreMessage"></p>
                </div>

                <button class="nav-btn" onclick="calculateRoleplayScore()" style="margin-top: 30px; width: 100%;">
                    Poka≈º wynik
                </button>
            </div>

            <div class="card-navigation">
                <button class="nav-btn prev" onclick="prevCard()">‚Üê Poprzednia</button>
                <button class="nav-btn next" onclick="nextCard()" disabled>Koniec Czƒô≈õci 2 ‚úì</button>
            </div>
        </div>

    </div>

    <script>
        let currentCard = 5;
        const totalCards = 8;

        // Progress
        function updateProgress() {
            const progress = ((currentCard - 4) / 4) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentCard').textContent = currentCard;
        }

        function showCard(cardNumber) {
            document.querySelectorAll('.lesson-card').forEach(card => {
                card.classList.remove('active');
            });
            const card = document.querySelector(`[data-card="${cardNumber}"]`);
            if (card) {
                card.classList.add('active');
                currentCard = cardNumber;
                updateProgress();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function nextCard() {
            if (currentCard < totalCards) {
                showCard(currentCard + 1);
            }
        }

        function prevCard() {
            if (currentCard > 5) {
                showCard(currentCard - 1);
            }
        }

        // Card 5: Journey Dialog
        const dialogs = {
            'situation': {
                title: 'üìä Situation - Poznaj kontekst',
                color: 'var(--situation-color)',
                content: `
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Cze≈õƒá! Dziƒôkujƒô za spotkanie. ≈ªeby lepiej zrozumieƒá WaszƒÖ sytuacjƒô - ile os√≥b pracuje w dziale sprzeda≈ºy?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Mamy 12 os√≥b - 10 handlowc√≥w i 2 support."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Rozumiem. A jaki system CRM obecnie u≈ºywacie do ≈õledzenia lead√≥w?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "G≈Ç√≥wnie Excel. Ka≈ºdy handlowiec ma sw√≥j plik."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "OK, Excel. A jak czƒôsto synchronizujecie dane miƒôdzy osobami?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Hmm, w≈Ça≈õciwie rzadko... Ka≈ºdy pracuje na swoim."</div>
                    <p style="margin-top: 30px; padding: 20px; background: rgba(33,150,243,0.2); border-radius: 10px; border-left: 4px solid var(--situation-color);">
                        <strong>üí° Cel Situation:</strong> Zebraƒá fakty. Nie osƒÖdzaƒá, nie proponowaƒá. Tylko poznaƒá sytuacjƒô.<br>
                        <strong>‚úì Masz kontekst:</strong> 12 os√≥b, Excel bez synchronizacji ‚Üí gotowy do Problem Questions.
                    </p>
                `
            },
            'problem': {
                title: '‚ö†Ô∏è Problem - Odkryj wyzwania',
                color: 'var(--problem-color)',
                content: `
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Skoro ka≈ºdy handlowiec pracuje na swoim Excelu - jakie problemy siƒô przez to pojawiajƒÖ?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Czasem lead trafia do dw√≥ch os√≥b jednocze≈õnie... i obaj dzwoniƒÖ do tego samego klienta."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Rozumiem. A jak czƒôsto to siƒô zdarza?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Mo≈ºe raz-dwa w tygodniu? To wyglƒÖda bardzo nieprofesjonalnie."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Opr√≥cz duplikat√≥w - czy zdarzajƒÖ siƒô sytuacje, ≈ºe lead ginie i nikt do niego nie dzwoni?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Tak... Czasem handlowiec zapisze lead w Excelu i zapomni. A potem klient kupuje u konkurencji."</div>
                    <p style="margin-top: 30px; padding: 20px; background: rgba(244,67,54,0.2); border-radius: 10px; border-left: 4px solid var(--problem-color);">
                        <strong>üí° Cel Problem:</strong> Odkryj b√≥l. Nie rozwiƒÖzuj jeszcze - tylko pog≈Çƒôbiaj zrozumienie.<br>
                        <strong>‚úì Problem odkryty:</strong> Duplikaty + zgubione leady ‚Üí gotowy do Implication.
                    </p>
                `
            },
            'implication': {
                title: 'üî• Implication - Konsekwencje problemu',
                color: 'var(--implication-color)',
                content: `
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Je≈õli handlowcy dzwoniƒÖ do tego samego klienta podw√≥jnie - jaki to ma wp≈Çyw na waszƒÖ reputacjƒô?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Klient my≈õli, ≈ºe jeste≈õmy niezorganizowani. Kilka razy s≈Çysza≈Çem: 'To drugi telefon od was, nie mo≈ºecie siƒô dogadaƒá?'"</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "A je≈õli lead ginie i nikt nie dzwoni - ile tracicie miesiƒôcznie w utraconych dealach?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Hmm... Mo≈ºe 5-10 lead√≥w miesiƒôcznie? ≈öredni deal to ‚Ç¨2000, wiƒôc... ‚Ç¨10,000-20,000?"</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Czyli rocznie to mo≈ºe byƒá ‚Ç¨120,000-240,000 utraconej sprzeda≈ºy?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Wow... Nie patrzy≈Çem na to w ten spos√≥b. To sporo."</div>
                    <p style="margin-top: 30px; padding: 20px; background: rgba(255,152,0,0.2); border-radius: 10px; border-left: 4px solid var(--implication-color);">
                        <strong>üí° Cel Implication:</strong> Pokazaƒá KOSZT nierozwiƒÖzania problemu. Buduj urgency.<br>
                        <strong>‚úì Urgency zbudowane:</strong> ‚Ç¨240k rocznie stracone + reputacja ‚Üí klient widzi wagƒô problemu.
                    </p>
                `
            },
            'need-payoff': {
                title: 'üí∞ Need-Payoff - Warto≈õƒá rozwiƒÖzania',
                color: 'var(--need-payoff-color)',
                content: `
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Gdyby system automatycznie rozdziela≈Ç leady i przypomina≈Ç o follow-up - ile z tych 5-10 lead√≥w miesiƒôcznie odzyskaliby≈õcie?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Pewnie wiƒôkszo≈õƒá... Mo≈ºe 80%? To by≈Çoby 8 lead√≥w, czyli ‚Ç¨16,000 miesiƒôcznie."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "A co by siƒô zmieni≈Ço w waszym zespole, gdyby ka≈ºdy handlowiec widzia≈Ç, kto z kim rozmawia?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "Koniec z duplikatami. Koniec z zawstydzajƒÖcymi sytuacjami przed klientem. WyglƒÖdaliby≈õmy profesjonalnie."</div>
                    <div class="dialog-line"><span class="dialog-label">Sprzedawca:</span> "Gdyby taka zmiana mia≈Ça miejsce w ciƒÖgu 30 dni - ile by to znaczy≈Ço dla waszych rocznych cel√≥w sprzeda≈ºowych?"</div>
                    <div class="dialog-line"><span class="dialog-label">Klient:</span> "‚Ç¨192,000 rocznie odzyskanej sprzeda≈ºy... Plus lepsza reputacja. To mog≈Çoby nas wypchnƒÖƒá ponad target."</div>
                    <p style="margin-top: 30px; padding: 20px; background: rgba(76,175,80,0.2); border-radius: 10px; border-left: 4px solid var(--need-payoff-color);">
                        <strong>üí° Cel Need-Payoff:</strong> Klient SAM opisuje warto≈õƒá. Nie Ty!<br>
                        <strong>‚úì Klient chce rozwiƒÖzania:</strong> ‚Ç¨192k + profesjonalizm ‚Üí gotowy do prezentacji produktu.
                    </p>
                `
            }
        };

        function showDialog(type) {
            const dialog = dialogs[type];
            const content = document.getElementById('dialogContent');
            content.innerHTML = `
                <h3 style="color: ${dialog.color}; margin-bottom: 20px; font-size: 1.5rem;">
                    ${dialog.title}
                </h3>
                ${dialog.content}
            `;

            // Update active state
            document.querySelectorAll('.journey-step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector('.journey-step.' + type).classList.add('active');
        }

        // Card 6: Drag & Drop
        let draggedElement = null;
        const dropCounts = { situation: 0, problem: 0, implication: 0, 'need-payoff': 0 };

        function initDragDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            dragItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedElement = item;
                    item.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                });

                item.addEventListener('dragend', (e) => {
                    item.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', (e) => {
                    zone.classList.remove('drag-over');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');

                    if (draggedElement) {
                        const type = zone.dataset.type;
                        const droppedItem = document.createElement('div');
                        droppedItem.className = 'dropped-item';
                        droppedItem.textContent = draggedElement.textContent;
                        droppedItem.dataset.correctType = draggedElement.dataset.type;
                        droppedItem.dataset.droppedType = type;

                        zone.appendChild(droppedItem);
                        draggedElement.remove();
                        
                        dropCounts[type]++;
                        updateDropCount(zone, type);
                    }
                });
            });
        }

        function updateDropCount(zone, type) {
            const countEl = zone.querySelector('.drop-count');
            countEl.textContent = `${dropCounts[type]}/3 pyta≈Ñ`;
        }

        function checkDragAnswers() {
            let correct = 0;
            let total = 0;

            document.querySelectorAll('.dropped-item').forEach(item => {
                total++;
                if (item.dataset.correctType === item.dataset.droppedType) {
                    item.classList.add('correct');
                    correct++;
                } else {
                    item.classList.add('incorrect');
                }
            });

            const feedback = document.getElementById('dragFeedback');
            const feedbackText = document.getElementById('feedbackText');
            
            if (correct === total && total === 12) {
                feedback.className = 'drag-feedback success show';
                feedbackText.innerHTML = `
                    <strong>üéØ Perfekcyjnie!</strong><br>
                    Wszystkie 12 pyta≈Ñ przypisane poprawnie. Rozumiesz r√≥≈ºnice miƒôdzy typami SPIN! 
                `;
            } else {
                feedback.className = 'drag-feedback show';
                feedbackText.innerHTML = `
                    <strong>Wynik: ${correct}/${total}</strong><br>
                    ${correct < total ? 'Sprawd≈∫ zaznaczone na czerwono - to niepoprawne przypisania.' : ''}
                `;
            }
        }

        // Card 7: Flashcards
        const flashcards = [
            { front: "ZASADA #1", back: "Zacznij od Situation, ale <strong>nie za d≈Çugo</strong> (max 3-4 pytania)" },
            { front: "ZASADA #2", back: "<strong>Problem Questions</strong> = serce SPIN. Tutaj odkrywasz prawdziwy b√≥l." },
            { front: "ZASADA #3", back: "Implication = poka≈º <strong>koszt NIErozwiƒÖzania</strong> problemu" },
            { front: "ZASADA #4", back: "Need-Payoff = <strong>klient opisuje rozwiƒÖzanie</strong> (nie ty!)" },
            { front: "ZASADA #5", back: "Nie skacz do prezentacji bez Need-Payoff. <strong>Najpierw buduj commitment.</strong>" },
            { front: "ZASADA #6", back: "S≈Çuchaj <strong>2x wiƒôcej</strong> ni≈º m√≥wisz. SPIN to pytania, nie monolog." },
            { front: "ZASADA #7", back: "Implication dzia≈Ça tylko je≈õli <strong>Problem jest prawdziwy</strong>. Nie wymy≈õlaj problem√≥w." },
            { front: "ZASADA #8", back: "Need-Payoff buduje <strong>commitment do dzia≈Çania</strong>. Klient SAM chce zmian." },
            { front: "ZASADA #9", back: "Small sale = <strong>mniej Implication</strong>, wiƒôcej Problem (szybka decyzja)" },
            { front: "ZASADA #10", back: "Large sale = <strong>wiƒôcej Implication</strong> (decyzja bardziej z≈Ço≈ºona, wiƒôcej stakeholder√≥w)" }
        ];

        let currentFlashcard = 0;
        let isFlipped = false;

        function updateFlashcard() {
            const card = flashcards[currentFlashcard];
            document.getElementById('flashcardFront').innerHTML = `
                <strong style="font-size: 1.5rem;">${card.front}</strong>
                <p style="margin-top: 20px;">Kliknij aby odkryƒá</p>
            `;
            document.getElementById('flashcardBack').innerHTML = card.back;
            document.getElementById('flashcardNum').textContent = currentFlashcard + 1;
            document.getElementById('flashcardNumBack').textContent = currentFlashcard + 1;
        }

        function flipCard() {
            const card = document.getElementById('flashcard');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        function nextFlashcard() {
            if (currentFlashcard < flashcards.length - 1) {
                currentFlashcard++;
                updateFlashcard();
                if (isFlipped) flipCard();
            }
        }

        function prevFlashcard() {
            if (currentFlashcard > 0) {
                currentFlashcard--;
                updateFlashcard();
                if (isFlipped) flipCard();
            }
        }

        // Card 8: Role-Play
        let selectedAnswers = { 1: null, 2: null, 3: null, 4: null };

        function selectOption(element) {
            const stage = element.dataset.stage;
            const isCorrect = element.dataset.correct === 'true';

            // Clear previous selection in this stage
            const siblings = element.parentElement.querySelectorAll('.option');
            siblings.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            // Mark selection
            element.classList.add('selected');
            element.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            selectedAnswers[stage] = isCorrect;
        }

        function calculateRoleplayScore() {
            const score = Object.values(selectedAnswers).filter(v => v === true).length;
            const scoreDiv = document.getElementById('roleplayScore');
            const scoreValue = document.getElementById('scoreValue');
            const scoreBadge = document.getElementById('scoreBadge');
            const scoreMessage = document.getElementById('scoreMessage');

            scoreValue.textContent = `${score}/4`;

            if (score === 4) {
                scoreBadge.textContent = 'üèÜ SPIN Master';
                scoreMessage.textContent = 'Perfekcyjnie! Rozumiesz, jak prowadziƒá rozmowƒô SPIN od poczƒÖtku do ko≈Ñca.';
            } else if (score === 3) {
                scoreBadge.textContent = '‚úÖ Bardzo dobrze';
                scoreMessage.textContent = '≈öwietnie! Jedna pomy≈Çka - przejrzyj dialog jeszcze raz.';
            } else if (score === 2) {
                scoreBadge.textContent = '‚ö†Ô∏è Do poprawy';
                scoreMessage.textContent = 'Zrozumia≈Çe≈õ czƒô≈õƒá, ale wr√≥ƒá do teorii (Czƒô≈õƒá 1).';
            } else {
                scoreBadge.textContent = '‚ùå Spr√≥buj ponownie';
                scoreMessage.textContent = 'Przejrzyj karty 1-4 (Czƒô≈õƒá 1) i spr√≥buj jeszcze raz.';
            }

            scoreDiv.classList.add('show');
        }

        // Initialize
        updateProgress();
        initDragDrop();
        updateFlashcard();

        // Keyboard navigation
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowRight') nextCard();
            else if (event.key === 'ArrowLeft') prevCard();
        });
    </script>
</body>
</html>